# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Date 1684428536 25200
#      Thu May 18 09:48:56 2023 -0700
# Node ID 8cad9e5d6a544245930d89dd6aadf29e20ded366
# Parent  85d90852b1c5700ae8f887b5e57b5cc57992ec9f
Bug 1833879 - Add a UseCounter for DOMParser.parseFromString;r=smaug

Differential Revision: https://phabricator.services.mozilla.com/D178457

diff --git a/dom/base/UseCounters.conf b/dom/base/UseCounters.conf
--- a/dom/base/UseCounters.conf
+++ b/dom/base/UseCounters.conf
@@ -366,6 +366,8 @@ method Window.WritableStream
 // Gecko-specific command usage of `Document.execCommand`
 custom DocumentExecCommandContentReadOnly calls execCommand with contentReadOnly
 
+method DOMParser.parseFromString
+
 // Gecko-specific command usage of `Document.queryCommandState` or `Document.queryCommandValue`
 custom DocumentQueryCommandStateOrValueContentReadOnly calls queryCommandState or queryCommandValue with contentReadOnly
 custom DocumentQueryCommandStateOrValueInsertBrOnReturn calls queryCommandState or queryCommandValue with insertBrOnReturn
diff --git a/dom/webidl/DOMParser.webidl b/dom/webidl/DOMParser.webidl
--- a/dom/webidl/DOMParser.webidl
+++ b/dom/webidl/DOMParser.webidl
@@ -23,7 +23,7 @@ interface DOMParser {
   [Throws]
   constructor();
 
-  [NewObject, Throws]
+  [NewObject, Throws, UseCounter]
   Document parseFromString(DOMString str, SupportedType type);
 
   [NewObject, ChromeOnly, Throws]
