# HG changeset patch
# Parent  bb528a123b65479d96326b5f4d5b7981538542d2

diff --git a/browser/components/about/AboutRedirector.cpp b/browser/components/about/AboutRedirector.cpp
--- a/browser/components/about/AboutRedirector.cpp
+++ b/browser/components/about/AboutRedirector.cpp
@@ -76,6 +76,8 @@ static const RedirEntry kRedirMap[] = {
     {"tabcrashed", "chrome://browser/content/aboutTabCrashed.xhtml",
      nsIAboutModule::URI_SAFE_FOR_UNTRUSTED_CONTENT |
          nsIAboutModule::ALLOW_SCRIPT | nsIAboutModule::HIDE_FROM_ABOUTABOUT},
+    {"tabs", "chrome://browser/content/tabsui/tabs.html",
+     nsIAboutModule::ALLOW_SCRIPT | nsIAboutModule::IS_SECURE_CHROME_UI},
     {"policies", "chrome://browser/content/policies/aboutPolicies.html",
      nsIAboutModule::ALLOW_SCRIPT | nsIAboutModule::IS_SECURE_CHROME_UI},
     {"privatebrowsing", "chrome://browser/content/aboutPrivateBrowsing.html",
diff --git a/browser/components/about/components.conf b/browser/components/about/components.conf
--- a/browser/components/about/components.conf
+++ b/browser/components/about/components.conf
@@ -29,6 +29,7 @@ pages = [
     'robots',
     'sessionrestore',
     'tabcrashed',
+    'tabs',
     'unloads',
     'welcome',
     'welcomeback',
diff --git a/browser/components/moz.build b/browser/components/moz.build
--- a/browser/components/moz.build
+++ b/browser/components/moz.build
@@ -54,6 +54,7 @@ DIRS += [
     "sessionstore",
     "shell",
     "syncedtabs",
+    "tabsui",
     "tabunloader",
     "translation",
     "uitour",
diff --git a/browser/components/tabsui/content/tabs.html b/browser/components/tabsui/content/tabs.html
new file mode 100644
--- /dev/null
+++ b/browser/components/tabsui/content/tabs.html
@@ -0,0 +1,26 @@
+<!DOCTYPE html>
+<html><head>
+  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
+  <meta charset="utf-8">
+  <style>
+    #container {
+      display: flex;
+    }
+    #container pre {
+      display: inline-grid;
+      grid-template-columns: repeat(5, 1fr);
+      line-height: 1;
+      margin: 5px;
+      font-size: 24px;
+    }
+    #container pre span {
+      cursor: crosshair;
+    }
+  </style>
+</head>
+<body>
+<div id="container">
+
+</div>
+<script src="chrome://browser/content/tabsui/tabs.js"></script>
+</body>
\ No newline at end of file
diff --git a/browser/components/tabsui/content/tabs.js b/browser/components/tabsui/content/tabs.js
new file mode 100644
--- /dev/null
+++ b/browser/components/tabsui/content/tabs.js
@@ -0,0 +1,33 @@
+const { BrowserWindowTracker } = ChromeUtils.import(
+  "resource:///modules/BrowserWindowTracker.jsm"
+);
+
+function getForWindow(win) {
+  let elForTab = (tab) => {
+    let el = document.createElement("span");
+    el.textContent = tab.pinned ? `ðŸŸª` : tab.getAttribute("pending") ? `ðŸŸ¨` : `ðŸŸ©`;
+    el.addEventListener("click", () => {
+      tab.ownerGlobal.gBrowser.removeTab(tab);
+      render();
+    });
+    return el;
+  }
+  return win.gBrowser.tabs
+    .map(tab => elForTab(tab));
+}
+
+function render() {
+  let container = document.querySelector("#container");
+  container.innerText = "";
+  for (let win of BrowserWindowTracker.orderedWindows) {
+    let tabs = getForWindow(win);
+    console.log(tabs);
+    let tabsContainer = document.createElement("pre");
+    tabsContainer.append(...tabs);
+    container.append(tabsContainer);
+  }
+}
+
+render();
+setInterval(render, 1000);
+
diff --git a/browser/components/tabsui/jar.mn b/browser/components/tabsui/jar.mn
new file mode 100644
--- /dev/null
+++ b/browser/components/tabsui/jar.mn
@@ -0,0 +1,7 @@
+# This Source Code Form is subject to the terms of the Mozilla Public
+# License, v. 2.0. If a copy of the MPL was not distributed with this
+# file, You can obtain one at http://mozilla.org/MPL/2.0/.
+
+browser.jar:
+        content/browser/tabsui/tabs.html          (content/tabs.html)
+        content/browser/tabsui/tabs.js            (content/tabs.js)
diff --git a/browser/components/tabsui/moz.build b/browser/components/tabsui/moz.build
new file mode 100644
--- /dev/null
+++ b/browser/components/tabsui/moz.build
@@ -0,0 +1,11 @@
+# -*- Mode: python; indent-tabs-mode: nil; tab-width: 40 -*-
+# vim: set filetype=python:
+# This Source Code Form is subject to the terms of the Mozilla Public
+# License, v. 2.0. If a copy of the MPL was not distributed with this
+# file, You can obtain one at http://mozilla.org/MPL/2.0/.
+
+with Files("*"):
+    BUG_COMPONENT = ("Firefox", "General")
+
+JAR_MANIFESTS += ["jar.mn"]
+
