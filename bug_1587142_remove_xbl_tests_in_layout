# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Date 1572031001 25200
#      Fri Oct 25 12:16:41 2019 -0700
# Node ID b3b46ed60e4dafbca4020a40aa6a4f5fed6469fc
# Parent  2e1945e590ff9eb0907c6ee475efc31bdef5b207
Bug 1587142 - Remove XBL tests in layout/

Differential Revision: https://phabricator.services.mozilla.com/D50651

diff --git a/layout/base/crashtests/1423216.html b/layout/base/crashtests/1423216.html
deleted file mode 100644
--- a/layout/base/crashtests/1423216.html
+++ /dev/null
@@ -1,18 +0,0 @@
-<style>
-* {
-  -moz-binding: url(l)
-}
-</style>
-<script>
-o1 = document.createElement('span')
-o2 = document.createElement('span')
-document.documentElement.appendChild(o2)
-o2.appendChild(document.createElement('colgroup'))
-o3 = document.createComment('')
-o2.attachShadow({ mode: "open" }).append(o3)
-window.onload = () => {
-  o4 = document.createRange()
-  o4.setStartBefore(o3)
-  o4.insertNode(o1)
-}
-</script>
diff --git a/layout/base/crashtests/288790-1-inner.xhtml b/layout/base/crashtests/288790-1-inner.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/288790-1-inner.xhtml
+++ /dev/null
@@ -1,47 +0,0 @@
-<?xml version="1.0"?>
-<html xmlns="http://www.w3.org/1999/xhtml">
-<title>Testcase bug 288790 - Crash [@ GetNearestContainingBlock] with this xbl testcase</title>
-<head>
-<style>
-#z {position: relative;}
-#z span{position: absolute;}
-</style>
-
-<bindings xmlns="http://www.mozilla.org/xbl" xmlns:html="http://www.w3.org/1999/xhtml">
-  <binding id="m"></binding>
-  <binding id="ma" extends="#m">
-    <content>
-        <html:div><children/></html:div>
-    </content>
-  </binding>
-</bindings>
-
-</head>
-<body>
-<div id="z"><span></span></div>
-
-
-<script>
-function doe(){
-document.getElementById('z').setAttribute('style','-moz-binding:url(#ma)');
-setTimeout(doe2,0);
-}
-
-function doe2(){
-document.getElementsByTagName('span')[0].setAttribute('style','-moz-binding:url(#m)');
-}
-</script>
-<button id="button" onclick="doe()">Click me</button><br/>
-Clicking on the above button two times, should not crash Mozilla.
-<script>
-function clickbutton()
-{
-  var ev = document.createEvent('MouseEvents');
-  ev.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
-  var button = document.getElementById('button');
-  button.dispatchEvent(ev);
-  button.dispatchEvent(ev);
-}
-clickbutton();
-</script>
-</body></html>
diff --git a/layout/base/crashtests/288790-1.html b/layout/base/crashtests/288790-1.html
deleted file mode 100644
--- a/layout/base/crashtests/288790-1.html
+++ /dev/null
@@ -1,9 +0,0 @@
-<html class="reftest-wait">
-<head>
-<script>
-setTimeout('document.documentElement.className = ""', 500);
-</script>
-<body>
-<iframe src="288790-1-inner.xhtml"></iframe>
-</body>
-</html>
diff --git a/layout/base/crashtests/350128-1.xhtml b/layout/base/crashtests/350128-1.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/350128-1.xhtml
+++ /dev/null
@@ -1,21 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="lub4">
-    <content>
-      <html:span style="color: green;">
-        <children/>
-      </html:span>
-    </content>
-  </binding>
-</bindings>
-
-
-</head>
-
-<body onload="document.getElementById('gogo');">
-  <span style="-moz-binding: url('#lub4')"><div/><em id="gogo">I</em></span>
-</body>
-
-</html>
diff --git a/layout/base/crashtests/374193-1.xhtml b/layout/base/crashtests/374193-1.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/374193-1.xhtml
+++ /dev/null
@@ -1,7 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml"
-  ><mtd xmlns="http://www.w3.org/1998/Math/MathML"
-  ><th xmlns="http://www.w3.org/1999/xhtml"
-  /><mtable xmlns="http://www.w3.org/1998/Math/MathML"
-  ><th xmlns="http://www.w3.org/1999/xhtml" style="-moz-binding: url(374193-1xbl.xml);" id="mw_th20"></th></mtable></mtd><style>
-mtable::after { content:"anonymous text"; }
-</style></html>
diff --git a/layout/base/crashtests/374193-1xbl.xml b/layout/base/crashtests/374193-1xbl.xml
deleted file mode 100644
--- a/layout/base/crashtests/374193-1xbl.xml
+++ /dev/null
@@ -1,10 +0,0 @@
-<bindings xmlns="http://www.mozilla.org/xbl">
-<binding id="a">
-<implementation>
-<constructor>
-  this.style.position='fixed';
-</constructor>
-</implementation>
-<content><children/></content>
-</binding>
-</bindings>
diff --git a/layout/base/crashtests/379105-1.xhtml b/layout/base/crashtests/379105-1.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/379105-1.xhtml
+++ /dev/null
@@ -1,48 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-<head>
-<bindings xmlns="http://www.mozilla.org/xbl">
-
-<binding id="x"><content>
-  <zzz><children/></zzz>
-</content></binding>
-
-<binding id="empty"><content>
-</content></binding>
-
-</bindings>
-
-<script>
-<![CDATA[
-
-var xbltarget;
-
-function boom1()
-{
-  xbltarget = document.getElementById("xbltarget");
-  xbltarget.style.MozBinding = "url('#x')";
-  setTimeout(boom2, 0);
-}
-
-function boom2()
-{
-  var nodes = SpecialPowers.unwrap(SpecialPowers.wrap(document).getAnonymousNodes(xbltarget));
-  if (!nodes) {
-    setTimeout(boom2, 10);
-    return;
-  }
-  var anox = nodes[0];
-  var frame = document.createElementNS("http://www.w3.org/1999/xhtml", "frame")
-  frame.src = "data:text/html,<html><body>Hi!</body></html>";
-  anox.appendChild(frame);
-  xbltarget.style.MozBinding = "url('#empty')";
-  
-  document.documentElement.removeAttribute("class");
-}
-
-]]>
-</script>
-</head>
-<body onload="boom1()">
-<div id="xbltarget"></div>
-</body>
-</html>
diff --git a/layout/base/crashtests/379920-1.svg b/layout/base/crashtests/379920-1.svg
deleted file mode 100644
--- a/layout/base/crashtests/379920-1.svg
+++ /dev/null
@@ -1,7 +0,0 @@
-<svg width='100%' height='100%' xmlns='http://www.w3.org/2000/svg' onload="document.documentElement.style.MozBinding = 'url(#foo)';">
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="foo"><content></content></binding>
-</bindings>
-
-</svg>
diff --git a/layout/base/crashtests/379920-2.svg b/layout/base/crashtests/379920-2.svg
deleted file mode 100644
--- a/layout/base/crashtests/379920-2.svg
+++ /dev/null
@@ -1,7 +0,0 @@
-<svg width='100%' height='100%' xmlns='http://www.w3.org/2000/svg' style="-moz-binding: url(#foo)">
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="foo"><content></content></binding>
-</bindings>
-
-</svg>
diff --git a/layout/base/crashtests/379975.html b/layout/base/crashtests/379975.html
deleted file mode 100644
--- a/layout/base/crashtests/379975.html
+++ /dev/null
@@ -1,15 +0,0 @@
-<!DOCTYPE HTML>
-<!--
-<?xml version="1.0"?>
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="a">
-    <content></content>
-  </binding>
-</bindings>
--->
-<html style="-moz-binding: url(data:text/xml,%3C%3Fxml%20version%3D%221.0%22%3F%3E%0A%3Cbindings%20xmlns%3D%22http%3A//www.mozilla.org/xbl%22%3E%0A%20%20%3Cbinding%20id%3D%22a%22%3E%0A%20%20%20%20%3Ccontent%3E%3C/content%3E%0A%20%20%3C/binding%3E%0A%3C/bindings%3E);">
-  <head>
-    <title>Crash</title>
-    <script type="text/javascript" src="data:text/plain,document.documentElement;"></script>
-  </head>
-</html>
diff --git a/layout/base/crashtests/393326-1-binding.xml b/layout/base/crashtests/393326-1-binding.xml
deleted file mode 100644
--- a/layout/base/crashtests/393326-1-binding.xml
+++ /dev/null
@@ -1,4 +0,0 @@
-<bindings xmlns="http://www.mozilla.org/xbl">
-<binding id="a">
-<content><children/></content>
-</binding></bindings>
\ No newline at end of file
diff --git a/layout/base/crashtests/393326-1.html b/layout/base/crashtests/393326-1.html
deleted file mode 100644
--- a/layout/base/crashtests/393326-1.html
+++ /dev/null
@@ -1,15 +0,0 @@
-<html><head>
-<style>
-div::first-letter {}
-</style>
-</head>
-<body>
-
-<div style="position: fixed; ">
-<q></q>
-</div>
-<span>
-<span style="display: -moz-box; -moz-binding:url(393326-1-binding.xml#a);"></span>
-</span>
-</body></html>
-
diff --git a/layout/base/crashtests/393326-2.html b/layout/base/crashtests/393326-2.html
deleted file mode 100644
--- a/layout/base/crashtests/393326-2.html
+++ /dev/null
@@ -1,15 +0,0 @@
-<html><head>
-<style>
-div::first-letter {}
-</style>
-</head>
-<body>
-
-<div style="position: fixed; ">
-<q></q>
-</div>
-<span>
-<span style="display: -moz-box; -moz-binding:url(data:text/xml;charset=utf-8,%3Cbindings%20xmlns%3D%22http%3A//www.mozilla.org/xbl%22%3E%0A%3Cbinding%20id%3D%22a%22%3E%0A%3Ccontent%3E%3Cchildren/%3E%3C/content%3E%0A%3C/binding%3E%3C/bindings%3E);"></span>
-</span>
-</body></html>
-
diff --git a/layout/base/crashtests/394014-1-iframe.html b/layout/base/crashtests/394014-1-iframe.html
deleted file mode 100644
--- a/layout/base/crashtests/394014-1-iframe.html
+++ /dev/null
@@ -1,21 +0,0 @@
-<html><head></head>
-<body>
-<span id="a" style="display: none;">
-<span id="b">
-<span style="-moz-binding: url(data:text/xml;charset=utf-8,%3Cbindings%20xmlns%3D%22http%3A//www.mozilla.org/xbl%22%3E%0A%3Cbinding%20id%3D%22a%22%3E%0A%3Cimplementation%3E%0A%3Cconstructor%3E%0A%20%20this.style.outline%3D%27%27%3B%0A%3C/constructor%3E%0A%3C/implementation%3E%0A%3C/binding%3E%0A%3C/bindings%3E);"></span>
-</span>
-</span>
-<script>
-for (var i=0;i<document.getElementsByTagName('*').length;i++){
-document.getElementsByTagName('*')[i];
-}
-function doe2() { 
-//alert('t');
-document.getElementById('b').addEventListener('DOMSubtreeModified', function(e) {window.frameElement.remove() }, true);
-document.body.style.display = 'none';
-document.getElementById('a').style.display = '';
-}
-setTimeout(doe2, 20);
-</script>
-</body>
-</html>
\ No newline at end of file
diff --git a/layout/base/crashtests/394014-1-inner.html b/layout/base/crashtests/394014-1-inner.html
deleted file mode 100644
--- a/layout/base/crashtests/394014-1-inner.html
+++ /dev/null
@@ -1,10 +0,0 @@
-<html><head>
-<title>Testcase bug 394014 - Crash [@ NS_ProcessNextEvent_P] with DOMSubtreeModified removing windows, binding and other stuff</title>
-</head>
-<body>
-<iframe src="394014-1-iframe.html"></iframe>
-<script>
-setInterval(function() {window.location.reload()}, 1000);
-</script>
-</body>
-</html>
diff --git a/layout/base/crashtests/394014-1.html b/layout/base/crashtests/394014-1.html
deleted file mode 100644
--- a/layout/base/crashtests/394014-1.html
+++ /dev/null
@@ -1,9 +0,0 @@
-<html class="reftest-wait">
-<head>
-<script>
-setTimeout('document.documentElement.className = ""', 1000);
-</script>
-<body>
-<iframe src="394014-1-inner.html"></iframe>
-</body>
-</html>
diff --git a/layout/base/crashtests/394014-2-binding.xml b/layout/base/crashtests/394014-2-binding.xml
deleted file mode 100644
--- a/layout/base/crashtests/394014-2-binding.xml
+++ /dev/null
@@ -1,6 +0,0 @@
-<bindings xmlns="http://www.mozilla.org/xbl" xmlns:xlink="http://www.w3.org/1999/xlink">
-<binding id="c" inheritstyle="false">
-<content><children/></content>
-<implementation><constructor>
-</constructor></implementation>
-</binding></bindings>
\ No newline at end of file
diff --git a/layout/base/crashtests/394014-2-constructor.xml b/layout/base/crashtests/394014-2-constructor.xml
deleted file mode 100644
--- a/layout/base/crashtests/394014-2-constructor.xml
+++ /dev/null
@@ -1,10 +0,0 @@
-<bindings xmlns="http://www.mozilla.org/xbl">
-<binding id="a">
-<implementation>
-<constructor>
-  window.frameElement.parentNode.removeChild(window.frameElement);
-</constructor>
-</implementation>
-<content><children/></content>
-</binding>
-</bindings>
\ No newline at end of file
diff --git a/layout/base/crashtests/394014-2-constructordestructor.xml b/layout/base/crashtests/394014-2-constructordestructor.xml
deleted file mode 100644
--- a/layout/base/crashtests/394014-2-constructordestructor.xml
+++ /dev/null
@@ -1,12 +0,0 @@
-<bindings xmlns="http://www.mozilla.org/xbl">
-<binding id="a">
-<implementation>
-<destructor>
-  window.frameElement.parentNode.removeChild(window.frameElement);
-</destructor>
-</implementation>
-<content>
-<children/>
-</content>
-</binding>
-</bindings>
\ No newline at end of file
diff --git a/layout/base/crashtests/394014-2-crash.html b/layout/base/crashtests/394014-2-crash.html
deleted file mode 100644
--- a/layout/base/crashtests/394014-2-crash.html
+++ /dev/null
@@ -1,13 +0,0 @@
-<html><head>
-</head><body>
-
-<span style=" -moz-binding: url(394014-2-constructordestructor.xml#a);"></span>
-
-<span style="-moz-binding: url(394014-2-constructor.xml#a);">
-
-<style>style {-moz-binding:url(394014-2-binding.xml#c);</style>
-
-<textarea></textarea>
-</span>
-</body>
-</html>
\ No newline at end of file
diff --git a/layout/base/crashtests/394014-2.html b/layout/base/crashtests/394014-2.html
deleted file mode 100644
--- a/layout/base/crashtests/394014-2.html
+++ /dev/null
@@ -1,7 +0,0 @@
-<html><head>
-<title>Testcase bug 394014 - Crash [@ NS_ProcessNextEvent_P] with DOMSubtreeModified removing windows, binding and other stuff</title>
-</head>
-<body>tt
-<iframe src="394014-2-crash.html"></iframe>
-</body>
-</html>
diff --git a/layout/base/crashtests/399946-1.xhtml b/layout/base/crashtests/399946-1.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/399946-1.xhtml
+++ /dev/null
@@ -1,23 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" xmlns:math="http://www.w3.org/1998/Math/MathML">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="empty">
-    <content></content>
-  </binding>
-</bindings>
-
-<script>
-function boom()
-{
-  document.getElementById("frame").style.MozBinding = "url('#empty')";
-}
-
-window.addEventListener("load", boom, false);
-</script>
-
-</head>
-
-<math:mtd><frameset><frame id="frame"></frame></frameset></math:mtd>
-
-</html>
diff --git a/layout/base/crashtests/404218-1.xhtml b/layout/base/crashtests/404218-1.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/404218-1.xhtml
+++ /dev/null
@@ -1,15 +0,0 @@
-<treeitem xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-<splitter/>
-<splitter>
-  <splitter id="a"/>
-</splitter>
-
-<script xmlns="http://www.w3.org/1999/xhtml">
- document.getElementById('a').setAttribute('a', 'a');
-</script>
-
-<style xmlns="http://www.w3.org/1999/xhtml">
-treeitem, splitter {-moz-binding:url(data:text/xml;charset=utf-8,%3Cbindings%20xmlns%3D%22http%3A//www.mozilla.org/xbl%22%3E%3Cbinding%20id%3D%22a%22%3E%3Ccontent%3E%3Cchildren/%3E%3C/content%3E%3C/binding%3E%3C/bindings%3E);}
-</style>
-
-</treeitem>
\ No newline at end of file
diff --git a/layout/base/crashtests/405184-1.xhtml b/layout/base/crashtests/405184-1.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/405184-1.xhtml
+++ /dev/null
@@ -1,31 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="foo">
-    <content>
-      <div xmlns="http://www.w3.org/1999/xhtml" style="position: fixed;">
-        <children xmlns="http://www.mozilla.org/xbl"/>
-      </div>
-    </content>
-  </binding>
-</bindings>
-
-<script type="text/javascript">
-
-function boom()
-{
-  var div = document.getElementById("div");
-  var caption = document.getElementById("caption");
-
-  div.removeChild(caption);
-  div.style.position = "inherit";
-}
-
-</script></head>
-
-<body onload="boom();">
-<div id="div" style="-moz-binding: url(#foo);"><caption id="caption"></caption></div>
-</body>
-
-</html>
diff --git a/layout/base/crashtests/405186-1.xhtml b/layout/base/crashtests/405186-1.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/405186-1.xhtml
+++ /dev/null
@@ -1,39 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="foo">
-    <content>
-      <div xmlns="http://www.w3.org/1999/xhtml" style="position: fixed;">
-        <children xmlns="http://www.mozilla.org/xbl"/>
-      </div>
-    </content>
-  </binding>
-</bindings>
-
-<script type="text/javascript">
-
-function boom()
-{
-  var table = document.getElementById("table");
-  var tr = document.getElementById("tr");
-  var td = document.getElementById("td");
-  
-  table.style.border = "2px dotted magenta";
-  tr.removeChild(td);
-}
-
-</script>
-</head>
-
-<body onload="boom();">
-
-<table id="table" style="-moz-binding: url(#foo);">
-  <tr id="tr">
-    <td id="td"></td>
-  </tr>
-</table>
-
-</body>
-
-</html>
diff --git a/layout/base/crashtests/429780-1.xhtml b/layout/base/crashtests/429780-1.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/429780-1.xhtml
+++ /dev/null
@@ -1,4 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml"><head>
-<script>window.addEventListener("load", function() { document.getElementById("v").style.MozBinding = "url(#foo)"; }, false);</script>
-<bindings xmlns="http://www.mozilla.org/xbl"><binding id="foo"><content></content></binding></bindings>
-</head>X<span><div id="v"></div></span></html>
diff --git a/layout/base/crashtests/468546-1.xhtml b/layout/base/crashtests/468546-1.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/468546-1.xhtml
+++ /dev/null
@@ -1,25 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-<style type="text/css">
-
-[class='anon'], #v { float: left; }
-[class='anon']:first-line { word-spacing: 30ch; }
-body { width: 30ch; }
-
-</style>
-
-<bindings xmlns="http://www.mozilla.org/xbl"><binding id="foo"><content><div class="anon"><span>A BCDE</span><children xmlns="http://www.mozilla.org/xbl"/></div></content></binding></bindings>
-
-<script type="text/javascript">
-
-function boom()
-{
-  document.body.insertBefore(document.createTextNode("fijkl"), document.body.firstChild);
-}
-
-</script>
-</head>
-
-<body onload="boom();" style="-moz-binding: url(#foo)"><div id="v">&#x202C;</div></body>
-
-</html>
diff --git a/layout/base/crashtests/468645-1.xhtml b/layout/base/crashtests/468645-1.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/468645-1.xhtml
+++ /dev/null
@@ -1,17 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-paged">
-
-<div style="-moz-binding: url(#xbl); display: table-cell;">
-<span style="display: inline-block;">
-<input style="page-break-after: right;"/>
-</span>
-</div>
-
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-<binding id="xbl" inheritstyle="false">
-     <resources>
-      <stylesheet src="data:text/css;charset=utf-8,"/>
-     </resources>
-</binding>
-</bindings>
-</html>
diff --git a/layout/base/crashtests/468645-2.xhtml b/layout/base/crashtests/468645-2.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/468645-2.xhtml
+++ /dev/null
@@ -1,13 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-paged">
-
-<div style="-moz-binding:url(#xbl)"/>
-<input style="page-break-after: left;"/>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-<binding id="xbl" inheritstyle="false">
-     <resources>
-      <stylesheet src="data:text/css;charset=utf-8,"/>
-     </resources>
-</binding>
-</bindings>
-</html>
diff --git a/layout/base/crashtests/471594-1.xhtml b/layout/base/crashtests/471594-1.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/471594-1.xhtml
+++ /dev/null
@@ -1,20 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="x"><content><SPAN>2!<children xmlns="http://www.mozilla.org/xbl"/></SPAN></content></binding>
-  <binding id="y"><content></content></binding>
-</bindings>
-
-<script type="text/javascript">
-
-function boom()
-{
-  document.getElementById("a").style.MozBinding = 'url("#y")';
-}
-
-</script>
-</head>
-
-<body dir="rtl" onload="boom();"><div style="-moz-binding: url(#x);"><span style="unicode-bidi: bidi-override;" id="a"></span></div></body>
-</html>
diff --git a/layout/base/crashtests/497519-1.xhtml b/layout/base/crashtests/497519-1.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/497519-1.xhtml
+++ /dev/null
@@ -1,28 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-
-<xbl:bindings xmlns:xbl="http://www.mozilla.org/xbl">
-<xbl:binding id="foo"><xbl:content><div style="position:relative;"><xbl:children/></div></xbl:content></xbl:binding>
-</xbl:bindings>
-
-<script>
-<![CDATA[
-function test() {
-  document.getElementById("span").innerHTML = "<table><tr><td></td></tr></table>";
-}
-]]>
-</script>
-
-</head>
-
-<body onload="test();">
-
-<div style="-moz-binding: url(#foo)">
-
-  <div style="display:none">text</div>
-  <span id="span">text</span>
-
-</div>
-
-</body>
-</html>
diff --git a/layout/base/crashtests/497519-2.xhtml b/layout/base/crashtests/497519-2.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/497519-2.xhtml
+++ /dev/null
@@ -1,26 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" style="-moz-binding: url(#foo)">
-<head>
-
-<xbl:bindings xmlns:xbl="http://www.mozilla.org/xbl">
-<xbl:binding id="foo"><xbl:content><fieldset><xbl:children/></fieldset></xbl:content></xbl:binding>
-</xbl:bindings>
-
-<script type="text/javascript">
-
-function boom()
-{
-  var dE = document.documentElement;
-  var leg = document.createElementNS("http://www.w3.org/1999/xhtml", "legend");
-  leg.style.cssFloat = "left";
-  dE.appendChild(leg);
-  document.documentElement.offsetHeight;
-  dE.removeChild(leg);
-}
-
-</script>
-
-</head>
-
-<body onload="boom();"></body>
-
-</html>
diff --git a/layout/base/crashtests/497519-3.xhtml b/layout/base/crashtests/497519-3.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/497519-3.xhtml
+++ /dev/null
@@ -1,26 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" style="-moz-binding: url(#foo)">
-<head>
-
-<xbl:bindings xmlns:xbl="http://www.mozilla.org/xbl">
-<xbl:binding id="foo"><xbl:content><fieldset><xbl:children/></fieldset></xbl:content></xbl:binding>
-</xbl:bindings>
-
-<script type="text/javascript">
-
-function boom()
-{
-  var dE = document.documentElement;
-  var leg = document.createElementNS("http://www.w3.org/1999/xhtml", "legend");
-  leg.appendChild(document.createTextNode("legend"));
-  dE.appendChild(leg);
-  document.documentElement.offsetHeight;
-  dE.removeChild(leg);
-}
-
-</script>
-
-</head>
-
-<body onload="boom();"></body>
-
-</html>
diff --git a/layout/base/crashtests/497519-4.xhtml b/layout/base/crashtests/497519-4.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/497519-4.xhtml
+++ /dev/null
@@ -1,26 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" style="-moz-binding: url(#foo)">
-<head>
-
-<xbl:bindings xmlns:xbl="http://www.mozilla.org/xbl">
-<xbl:binding id="foo"><xbl:content><fieldset><xbl:children/></fieldset></xbl:content></xbl:binding>
-</xbl:bindings>
-
-<script type="text/javascript">
-
-function boom()
-{
-  var dE = document.documentElement;
-  var leg = document.createElementNS("http://www.w3.org/1999/xhtml", "legend");
-  leg.style.position = "absolute";
-  dE.appendChild(leg);
-  document.documentElement.offsetHeight;
-  dE.removeChild(leg);
-}
-
-</script>
-
-</head>
-
-<body onload="boom();"></body>
-
-</html>
diff --git a/layout/base/crashtests/536623-1.xhtml b/layout/base/crashtests/536623-1.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/536623-1.xhtml
+++ /dev/null
@@ -1,37 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-
-<bindings
-  xmlns="http://www.mozilla.org/xbl"
-  xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-  xmlns:xbl="http://www.mozilla.org/xbl"
-  xmlns:html="http://www.w3.org/1999/xhtml">
-
-  <binding id="qwe">
-    <content>
-      <xul:label style="-moz-binding: url(#xar)" xbl:inherits="xbl:text=label" flex="1"/>
-    </content>
-  </binding>
-
-  <binding id="xar">
-    <content>
-      <html:table><children/></html:table>
-    </content>
-  </binding>
-
-</bindings>
-
-<script type="text/javascript">
-function boom()
-{
-  document.getElementById("b").setAttribute('label', "1 2 3");
-  document.documentElement.offsetHeight;
-  document.getElementById("b").removeAttribute('label');
-}
-</script>
-</head>
-
-<body onload="boom();">
-<div style="width: 0px;"><box id="b" xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" style="-moz-binding: url(#qwe);"/></div>
-</body>
-</html>
diff --git a/layout/base/crashtests/537059-1.xhtml b/layout/base/crashtests/537059-1.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/537059-1.xhtml
+++ /dev/null
@@ -1,14 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-  <head>
-    <bindings xmlns="http://www.mozilla.org/xbl" xmlns:html="http://www.w3.org/1999/xhtml">
-      <binding id="td"><content><html:div><children/></html:div></content></binding>
-    </bindings>
-    <style type="text/css">
-      div, tbody { position: absolute; }
-      div:first-letter { }
-    </style>
-  </head>
-  <body>
-    <div><table>A<tbody><tr style="-moz-binding: url(#td);"></tr></tbody>B</table></div>
-  </body>
-</html>
diff --git a/layout/base/crashtests/537141-1.xhtml b/layout/base/crashtests/537141-1.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/537141-1.xhtml
+++ /dev/null
@@ -1,6 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-</head>
-<body onload="document.body.appendChild(document.createElementNS('http://www.w3.org/1999/xhtml', 'span'));" style="-moz-binding: url('537141.xml#mo');">
-<g xmlns="http://www.w3.org/2000/svg"/></body>
-</html>
diff --git a/layout/base/crashtests/537141.xml b/layout/base/crashtests/537141.xml
deleted file mode 100644
--- a/layout/base/crashtests/537141.xml
+++ /dev/null
@@ -1,2 +0,0 @@
-<!-- This has to be a separate file to trigger the bug -->
-<bindings xmlns="http://www.mozilla.org/xbl"><binding id="mo"><content><mrow xmlns="http://www.w3.org/1998/Math/MathML"><children xmlns="http://www.mozilla.org/xbl"/></mrow></content></binding></bindings>
diff --git a/layout/base/crashtests/559705.xhtml b/layout/base/crashtests/559705.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/559705.xhtml
+++ /dev/null
@@ -1,14 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-  <bindings xmlns="http://www.mozilla.org/xbl">
-    <binding id="foo">
-      <content>
-        <iframe xmlns="http://www.w3.org/1999/xhtml" src="javascript:void 0"><children xmlns="http://www.mozilla.org/xbl"/></iframe>
-      </content>
-    </binding>
-  </bindings>
-</head>
-<body>
-  <span style="-moz-binding: url(#foo)"></span>
-</body>
-</html>
diff --git a/layout/base/crashtests/560441-1.xhtml b/layout/base/crashtests/560441-1.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/560441-1.xhtml
+++ /dev/null
@@ -1,12 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-<bindings xmlns="http://www.mozilla.org/xbl"><binding id="foo"><content><frame xmlns="http://www.w3.org/1999/xhtml"><children xmlns="http://www.mozilla.org/xbl"/></frame></content></binding></bindings>
-</head>
-
-<frameset 
-  onload="document.getElementById('y').appendChild(document.createElementNS('http://www.w3.org/1999/xhtml', 'span'));" 
-  style="-moz-binding: url(#foo)"
->
-<frame id="y"></frame>
-</frameset>
-</html>
diff --git a/layout/base/crashtests/567292-1.xhtml b/layout/base/crashtests/567292-1.xhtml
deleted file mode 100644
--- a/layout/base/crashtests/567292-1.xhtml
+++ /dev/null
@@ -1,17 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml"><head>
-
-<bindings xmlns="http://www.mozilla.org/xbl"><binding id="foo"><content><optgroup><span><children xmlns="http://www.mozilla.org/xbl"/></span></optgroup></content></binding></bindings>
-
-<script>
-<![CDATA[
-
-function boom() { document.getElementById("a").appendChild(document.createElementNS("http://www.w3.org/1999/xhtml", "span")); }
-
-window.addEventListener("load", boom);
-
-]]>
-</script></head>
-
-<frameset style="-moz-binding: url(&quot;#foo&quot;);"><frame id="a"></frame></frameset>
-
-</html>
diff --git a/layout/base/crashtests/crashtests.list b/layout/base/crashtests/crashtests.list
--- a/layout/base/crashtests/crashtests.list
+++ b/layout/base/crashtests/crashtests.list
@@ -52,17 +52,16 @@ load 269566-1.html
 load 272647-1.html
 load 275746-1.html
 load 276053-1.html
 load 280708-1.html
 load 280708-2.html
 load 281333-1.html
 load 285212-1.html
 load 286813-1.html
-skip-if(!xbl) load 288790-1.html
 load 306940-1.html
 load 310267-1.xml
 load 310638-1.svg
 load 310638-2.html
 load chrome://reftest/content/crashtests/layout/base/crashtests/311661-1.xul
 load chrome://reftest/content/crashtests/layout/base/crashtests/311661-2.xul
 load 313086-1.xml
 load 317285-1.html
@@ -110,17 +109,16 @@ load 344300-1.html
 load 344300-2.html
 load chrome://reftest/content/crashtests/layout/base/crashtests/344340-1.xul
 load 347898-1.html
 load 348126-1.html
 load 348688-1.html
 load 348708-1.xhtml
 load 348729-1.html
 load 349095-1.xhtml
-skip-if(!xbl) load 350128-1.xhtml
 load 350267-1.html
 load 354133-1.html
 load 354766-1.xhtml
 load 355989-1.xhtml
 load 355993-1.xhtml
 load chrome://reftest/content/crashtests/layout/base/crashtests/356325-1.xul
 load 358729-1.xhtml
 load chrome://reftest/content/crashtests/layout/base/crashtests/360339-1.xul
@@ -142,83 +140,70 @@ load 369176-1.html
 load 369547-1.html
 load 369547-2.html
 load 369945-1.xhtml
 load 371681-1.xhtml
 load 372237-1.html
 load 372475-1.xhtml
 load 372550-1.html
 load 373628-1.html
-skip-if(!xbl) load 374193-1.xhtml
 load 374297-1.html
 load 374297-2.html
 load 378325-1.html
 load 378682.html
-skip-if(!xbl) load 379105-1.xhtml
 load 379419-1.xhtml
 load 379768-1.html
 load 379799-1.html
-skip-if(!xbl) load 379920-1.svg
-skip-if(!xbl) load 379920-2.svg
-skip-if(!xbl) load 379975.html
 load 380096-1.html
 load 382204-1.html # bug 1323680
 load 383129-1.html
 load 384344-1.html
 load 384392-1.xhtml
 load 384392-2.svg
 load 384649-1.xhtml
 load 385354.html
 load 385866-1.xhtml
 load 385880-1.xhtml
 load 386266-1.html
 load 386476.html
 load 387195-1.html
 load 387195-2.xhtml
 load 388715-1.html
 load 390976-1.html
-skip-if(!xbl) load 393326-1.html
-skip-if(!xbl) load 393326-2.html
 load 393661-1.html
 load 393801-1.html
-skip-if(!xbl) load 394014-1.html
-skip-if(!xbl) load 394014-2.html
 load 394150-1.xhtml
 load 397011-1.xhtml
 load 398510-1.xhtml
 load 398733-1.html
 load 398733-2.html
 load 399132-1.xhtml
 load 399219-1.xhtml
 load 399365-1.html
 load 399676-1.xhtml
 load 399687-1.html
 load 399940-1.xhtml
-skip-if(!xbl) load 399946-1.xhtml
 load 399951-1.html
 load 399994-1.html
 load 400445-1.xhtml
 load 400904-1.xhtml
 load chrome://reftest/content/crashtests/layout/base/crashtests/401589-1.xul
 load 401734-1.html
 load 401734-2.html
 needs-focus pref(accessibility.browsewithcaret,true) load 403048.html
 load 403175-1.html
 load 403245-1.html
 load 403454.html
 load 403569-1.xhtml
 load 403569-2.xhtml
 load 403569-3.xhtml
-skip-if(!xbl) load 404218-1.xhtml
 load 404491-1.html
 load 404721-1.xhtml
 load 404721-2.xhtml
 load chrome://reftest/content/crashtests/layout/base/crashtests/405049-1.xul
-skip-if(!xbl) load 405184-1.xhtml
-skip-if(!xbl) load 405186-1.xhtml
 load 406675-1.html
 load 408292.html
 load 408299.html
 load 408450-1.xhtml
 load 409461-1.xhtml
 load 409513.html
 load 410967.html
 load 411870-1.html
@@ -236,17 +221,16 @@ load chrome://reftest/content/crashtests
 load 421432.html
 load 422276.html
 asserts(0-1) load 423107-1.xhtml # bug 866955
 load 425981-1.html
 load 428138-1.html
 load 428448-1.html
 load 429088-1.html
 load 429088-2.html
-skip-if(!xbl) load 429780-1.xhtml
 load 429865-1.html
 load 429881.html
 load 430569-1.html
 load 430569-2.html
 load 432752-1.svg
 load 433450-1.html
 load 436982-1.html
 load 437142-1.html
@@ -270,29 +254,25 @@ load 455171-4.html
 load 455623-1.html
 load 457362-1.xhtml
 load 457514.html
 asserts(0-1) load 460389-1.html # bug 780985
 load 462392.html
 load 466763-1.html
 load 467881-1.html
 load 468491-1.html
-skip-if(!xbl) load 468546-1.xhtml
 load 468555-1.xhtml
 load 468563-1.html
 load 468578-1.xhtml
 # These three didn't actually crash without the resizing that the
 # browser does when setting up print preview, but adding them anyway.
-skip-if(!xbl) load 468645-1.xhtml
-skip-if(!xbl) load 468645-2.xhtml
 load 468645-3.xhtml
 load 469861-1.xhtml
 load 469861-2.xhtml
 load 470851-1.xhtml
-skip-if(!xbl) load 471594-1.xhtml
 asserts-if(Android&&!asyncPan,1-2) load 473042.xhtml # bug 1034369 (may also cause a few assertions to be registered on the next test)
 asserts(0-5) load 474075.html # bug 847368
 load 477333-1.xhtml
 load 477731-1.html
 load 479114-1.html
 load 479360-1.xhtml
 load 480686-1.html
 load 481806-1.html
@@ -306,57 +286,47 @@ load 490559-1.html
 load 490747.html
 load chrome://reftest/content/crashtests/layout/base/crashtests/491547-1.xul
 load chrome://reftest/content/crashtests/layout/base/crashtests/491547-2.xul
 load 492014.xhtml
 load 492112-1.xhtml
 load 492163-1.xhtml
 load 495350-1.html
 load 496011-1.xhtml
-skip-if(!xbl) load 497519-1.xhtml
-skip-if(!xbl) load 497519-2.xhtml
-skip-if(!xbl) load 497519-3.xhtml
-skip-if(!xbl) load 497519-4.xhtml
 load 499741-1.xhtml
 load 499841-1.xhtml
 load 499858-1.xhtml
 load 500467-1.html
 load 501878-1.html
 load 503936-1.html
 load 507119.html
 load 522374-1.html
 load 522374-2.html
 load chrome://reftest/content/crashtests/layout/base/crashtests/526378-1.xul
 load 534367-1.xhtml
 load 534368-1.xhtml
 load 534768-1.html
 load 534768-2.html
 load 535721-1.xhtml
 load 535911-1.xhtml
-skip-if(!xbl) load 536623-1.xhtml
 load chrome://reftest/content/crashtests/layout/base/crashtests/536720.xul
-skip-if(!xbl) load 537059-1.xhtml
-skip-if(!xbl) load 537141-1.xhtml
 load 537562-1.xhtml
 load 537624-1.html
 load 537631-1.html
 load chrome://reftest/content/crashtests/layout/base/crashtests/538082-1.xul
 load 538207-1.xhtml
 load 538210-1.html
 load 538267-1.html
 load chrome://reftest/content/crashtests/layout/base/crashtests/540760.xul
 load 540771-1.xhtml
 load 541869-1.xhtml
 load 541869-2.html
 load 543648-1.html
-skip-if(!xbl) load 559705.xhtml
-skip-if(!xbl) load 560441-1.xhtml
 load 560447-1.html
 load 564063-1.html
-skip-if(!xbl) load 567292-1.xhtml
 load 569018-1.html
 pref(layout.css.xul-display-values.content.enabled,true) load 570038-1.html
 load chrome://reftest/content/crashtests/layout/base/crashtests/572003.xul
 load 572582-1.xhtml
 load 576649-1.html
 load 579655.html
 load 580129-1.html
 load 580494-1.html
@@ -509,17 +479,16 @@ load 1404789-2.html
 load 1406562.html
 load 1409147.html
 load 1411138.html
 load 1414100.html
 load 1414303.html
 load 1419762.html
 load 1419802.html
 load 1420533.html
-skip-if(!xbl) load 1423216.html
 load 1425893.html
 load 1425959.html
 load 1428353.html
 load 1428892.html
 load 1429088.html
 load 1429961.html
 load 1429962.html
 load 1435015.html
diff --git a/layout/forms/crashtests/373586-1.xhtml b/layout/forms/crashtests/373586-1.xhtml
deleted file mode 100644
--- a/layout/forms/crashtests/373586-1.xhtml
+++ /dev/null
@@ -1,40 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="foo">
-    <content>
-      <children xmlns="http://www.mozilla.org/xbl" />
-    </content>
-  </binding>
-</bindings>
-
-<script>
-function boom()
-{
-  document.getElementById("div").style.MozBinding = "url('#foo')";
-
-  var opt1 = document.getElementById("opt1");
-  opt1.removeChild(opt1.firstChild);
-
-  document.getElementById("textarea").value += " ";
-  
-  document.documentElement.removeAttribute("class")
-}
-</script>
-
-</head>
-
-<body onload="setTimeout(boom, 30);">
-
-<div id="div">
-  <textarea rows="3" cols="5" id="textarea"></textarea>
-</div>
-
-<select>
-  <option id="opt1">opt1</option>
-</select>
-
-</body>
-</html>
-
diff --git a/layout/forms/crashtests/375299-binding.xml b/layout/forms/crashtests/375299-binding.xml
deleted file mode 100644
--- a/layout/forms/crashtests/375299-binding.xml
+++ /dev/null
@@ -1,4 +0,0 @@
-<bindings xmlns="http://www.mozilla.org/xbl">
-<binding id="a">
-<content><children/></content>
-</binding></bindings>
\ No newline at end of file
diff --git a/layout/forms/crashtests/375299.html b/layout/forms/crashtests/375299.html
deleted file mode 100644
--- a/layout/forms/crashtests/375299.html
+++ /dev/null
@@ -1,17 +0,0 @@
-<html><head>
-<title>Testcase bug - Crash [@ nsFileControlFrame::CreateAnonymousContent] when removing stylesheet with binding and removing file input</title>
-<style>
-body {-moz-binding:url("375299-binding.xml#a"); }
-</style>
-</head><body onload="doe()">
-<input type="file">
-
-<script>
-function doe() {
-var x=document.getElementsByTagName('input')[0];
-x.remove();
-var y=document.getElementsByTagName('style')[0];
-y.remove();
-}
-</script>
-</body></html>
diff --git a/layout/forms/crashtests/crashtests.list b/layout/forms/crashtests/crashtests.list
--- a/layout/forms/crashtests/crashtests.list
+++ b/layout/forms/crashtests/crashtests.list
@@ -15,18 +15,16 @@ load chrome://reftest/content/crashtests
 load 363696-2.html
 load 363696-3.html
 load 366205-1.html
 load 366537-1.xhtml
 load 367587-1.html
 load 370703-1.html
 load 370940-1.html
 load 370967.html
-skip-if(!xbl) load 373586-1.xhtml
-skip-if(!xbl) load 375299.html
 load 378369.html
 load 378413-1.xhtml
 load 380116-1.xhtml
 load 382610-1.html
 load 383887-1.html
 load 386554-1.html
 load 388374-1.xhtml
 load 388374-2.html
diff --git a/layout/generic/crashtests/374090.html b/layout/generic/crashtests/374090.html
deleted file mode 100644
--- a/layout/generic/crashtests/374090.html
+++ /dev/null
@@ -1,11 +0,0 @@
-<html><head><script>
-function doe() {
-window.location.reload();
-}
-setTimeout(doe, 500);
-</script></head><noframes style="overflow: scroll; display: block;"></noframes><body><li></li>
-
-<script>
-document.documentElement.setAttribute('style','-moz-binding: url(binding.xml#randomxbl);');
-</script>
-</body></html>
\ No newline at end of file
diff --git a/layout/generic/crashtests/374420.xhtml b/layout/generic/crashtests/374420.xhtml
deleted file mode 100644
--- a/layout/generic/crashtests/374420.xhtml
+++ /dev/null
@@ -1,34 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" xmlns:mathml="http://www.w3.org/1998/Math/MathML">
-<title>Testcase bug - Crash [@ nsHTMLReflowState::GetNearestContainingBlock] with testcase using generated content, xbl and mathml</title>
-<bindings xmlns="http://www.mozilla.org/xbl"><binding id="a">
-<content><children>
-<div xmlns="http://www.w3.org/1999/xhtml" style="position: absolute;">
-<div style="position: absolute;"/>
-</div>
-</children></content>
-</binding></bindings>
-<style>
-  mtable::after { content:"anonymous text"; }
-  mtable::before { content:"before text"; }
-</style>
-
-<thead style="overflow: scroll;">
-  <mathml:mrow>
-    <mathml:mtable>
-      <tfoot style="-moz-binding: url(#a);" id="a_1">
-        <td style="-moz-binding: url(#a);"/>
-      </tfoot>
-    </mathml:mtable>
-    <td id="a_2"/>
-  </mathml:mrow>
-</thead>
-
-<script xmlns="http://www.w3.org/1999/xhtml">
-  function doe() {
-    document.getElementById('a_1').style.borderCollapse = "";
-    document.documentElement.offsetHeight;
-    document.getElementById('a_2').parentNode.removeChild(document.getElementById('a_2'));  
-  }
-  setTimeout(doe, 400);
-</script>
-</html>
\ No newline at end of file
diff --git a/layout/generic/crashtests/382745-1-binding.xml b/layout/generic/crashtests/382745-1-binding.xml
deleted file mode 100644
--- a/layout/generic/crashtests/382745-1-binding.xml
+++ /dev/null
@@ -1,3 +0,0 @@
-<bindings xmlns="http://www.mozilla.org/xbl">
-<binding id="randomxbl" inheritstyle="false">
-<content><children><style xmlns="http://www.w3.org/1999/xhtml">*::before { content:"before text"; }\</style></children></content></binding></bindings>
\ No newline at end of file
diff --git a/layout/generic/crashtests/382745-1.xhtml b/layout/generic/crashtests/382745-1.xhtml
deleted file mode 100644
--- a/layout/generic/crashtests/382745-1.xhtml
+++ /dev/null
@@ -1,10 +0,0 @@
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-
-<tree/>
-<tree style="-moz-binding:url(382745-1-binding.xml#randomxbl); display: block; position: fixed;">
-  <treecols>
-    <treecol style="-moz-binding:url(382745-1-binding.xml#randomxbl);"/>
-  </treecols>
-</tree>
-
-</window>
diff --git a/layout/generic/crashtests/385885-1.xul b/layout/generic/crashtests/385885-1.xul
deleted file mode 100644
--- a/layout/generic/crashtests/385885-1.xul
+++ /dev/null
@@ -1,19 +0,0 @@
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" onload="boom()">
-        
-<script>
-<![CDATA[
-
-function boom()
-{
-  var de = document.documentElement; 
-  
-  de.style.MozBinding = "url('data:text/xml,<bindings xmlns=%22http://www.mozilla.org/xbl%22><binding id=%22foo%22><content></content></binding></bindings>')";
-
-  document.removeChild(de);
-  document.appendChild(de);
-}
-
-]]>
-</script>
-
-</window>
diff --git a/layout/generic/crashtests/401042-1.xhtml b/layout/generic/crashtests/401042-1.xhtml
deleted file mode 100644
--- a/layout/generic/crashtests/401042-1.xhtml
+++ /dev/null
@@ -1,17 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-<bindings xmlns="http://www.mozilla.org/xbl">
-<binding id="a">
-<content><span xmlns="http://www.w3.org/1999/xhtml">
-<children xmlns="http://www.mozilla.org/xbl"/>
-</span></content>
-</binding>
-</bindings>
-
-<style>pre::first-letter {float: left; }
-</style>
-</head>
-<body>
-<pre style="-moz-binding: url(#a);">//</pre>
-</body>
-</html>
\ No newline at end of file
diff --git a/layout/generic/crashtests/417109-1.xhtml b/layout/generic/crashtests/417109-1.xhtml
deleted file mode 100644
--- a/layout/generic/crashtests/417109-1.xhtml
+++ /dev/null
@@ -1,28 +0,0 @@
-ï»¿<html xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="foo">
-    <content><html:span> &#x200F;&#x0643;&#xCA84;<children/></html:span></content>
-  </binding>
-  <binding id="empty">
-    <content></content>
-  </binding>
-</bindings>
-
-
-<script type="text/javascript">
-<![CDATA[
-
-function boom()
-{
-  document.getElementById("b").style.MozBinding = "url('#empty')";
-}
-
-]]>
-</script>
-</head>
-
-<body onload="boom();"><table style="-moz-binding: url(#foo)"><td id="b"/></table></body>
-
-</html>
diff --git a/layout/generic/crashtests/420785-1.xhtml b/layout/generic/crashtests/420785-1.xhtml
deleted file mode 100644
--- a/layout/generic/crashtests/420785-1.xhtml
+++ /dev/null
@@ -1,26 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl" xmlns:html="http://www.w3.org/1999/xhtml">
-  <binding id="foo">
-    <content><html:span>a b<children xmlns="http://www.mozilla.org/xbl"/></html:span></content>
-  </binding>
-</bindings>
-
-<script type="text/javascript">
-
-function boom()
-{
-  var cap = document.getElementById("cap"); 
-  var lsep = document.createTextNode("\u2028"); // U+2028 LINE SEPARATOR
-  cap.insertBefore(lsep, cap.firstChild);
-}
-
-</script>
-
-</head>
-
-<body onload="boom();"><caption id="cap" style="-moz-binding: url('#foo');"> </caption></body>
-
-</html>
diff --git a/layout/generic/crashtests/429458.xhtml b/layout/generic/crashtests/429458.xhtml
deleted file mode 100644
--- a/layout/generic/crashtests/429458.xhtml
+++ /dev/null
@@ -1,27 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml">
-
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="foo">
-    <content><html:span><children xmlns="http://www.mozilla.org/xbl"/></html:span></content>
-  </binding>
-</bindings>
-
-<script type="text/javascript">
-
-function boom()
-{
-  var s = document.getAnonymousNodes(document.body)[0];
-  s.appendChild(document.createTextNode("apples and oranges"));
-  document.body.offsetHeight;
-  document.body.appendChild(document.createTextNode("\n\n"));
-}
-
-</script>
-
-</head>
-
-<body onload="boom();" style="-moz-binding: url('#foo'); width: 1px; word-spacing: 1px;"></body>
-
-</html>
diff --git a/layout/generic/crashtests/463785.xhtml b/layout/generic/crashtests/463785.xhtml
deleted file mode 100644
--- a/layout/generic/crashtests/463785.xhtml
+++ /dev/null
@@ -1,40 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml" class="reftest-wait">
-
-<bindings xmlns="http://www.mozilla.org/xbl" xmlns:xlink="http://www.w3.org/1999/xlink">
-<binding id="xbl">
-<content>
-<div xmlns="http://www.w3.org/1999/xhtml" style="border: 100px solid red;">
-<div  style="position: fixed;"/>
-</div>
-</content>
-</binding>
-</bindings>
-
-<div style="position: absolute; column-count: 2;">
-<table style="border: 100px solid green;" id="c">
-<tr id="b" style="-moz-binding:url(#xbl)">
-<td style="position: absolute;">
-m
-  <span id="a">
-    <div style="border: 100px solid black;">
-       <div style="position: fixed;"/>
-    </div>
-  </span>
-
-</td>
-</tr>
-</table>
-</div>
-
-<script>
-var doc = document;
-function doe() {
-  var newNode = document.createElementNS("http://www.w3.org/1999/xhtml", 'div');
-  newNode.innerHTML = '<div xmlns="http://www.w3.org/1999/xhtml" style="border: 100px solid black;"><div  style="position: fixed;"/></div>';
-  document.getElementById('c').insertBefore(newNode, doc.getElementById('b'));
-  document.getElementById('b').removeAttribute('style');
-  document.documentElement.removeAttribute("class");
-}
-setTimeout(doe, 100);
-</script>
-</html>
diff --git a/layout/generic/crashtests/499885-1.xhtml b/layout/generic/crashtests/499885-1.xhtml
deleted file mode 100644
--- a/layout/generic/crashtests/499885-1.xhtml
+++ /dev/null
@@ -1,6 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-<bindings xmlns="http://www.mozilla.org/xbl"><binding id="emptybinding"><content></content></binding></bindings>
-</head>
-<body style="column-width: 1px;"><select/><li/><select style="height: 1777px; padding: 8796093022208pt; display: inherit; -moz-binding: url(#emptybinding);"/></body>
-</html>
diff --git a/layout/generic/crashtests/crashtests.list b/layout/generic/crashtests/crashtests.list
--- a/layout/generic/crashtests/crashtests.list
+++ b/layout/generic/crashtests/crashtests.list
@@ -92,46 +92,42 @@ load 370794-1.html
 load 370866-1.xhtml
 load 370884-1.xhtml
 load 371348-1.xhtml
 load 371561-1.html
 load 371566-1.xhtml
 load 372376-1.xhtml
 load 373859-1.html
 load 373868-1.xhtml
-skip-if(!xbl) load 374090.html
-skip-if(!xbl) load 374420.xhtml
 load 375462-1.html
 load 375831.html
 load 376419.html
 load 377522.html
 load 379217-1.xhtml
 load 379217-2.xhtml
 load 379917-1.xhtml
 load 380012-1.html
 load 381152-1.html
 load 381786-1.html
 load 382129-1.xhtml
 load 382131-1.html
 load 382199-1.html
 load 382208-1.xhtml
 load 382262-1.html
 load 382396-1.xhtml
-skip-if(!xbl) load 382745-1.xhtml # Bug 758695
 load 383089-1.html
 load 385265-1.xhtml
 load 385295-1.xhtml
 load 385344-1.html
 load 385344-2.html
 load 385414-1.html
 load 385414-2.html
 load 385426-1.html
 load 385526.html
 load 385681.html
-skip-if(!xbl) load chrome://reftest/content/crashtests/layout/generic/crashtests/385885-1.xul
 load 386799-1.html
 load 386807-1.html
 load 386812-1.html
 load 386827-1.html
 load 387058-1.html
 load 387058-2.html
 load 387088-1.html
 load 387209-1.html
@@ -185,17 +181,16 @@ load 399412-1.html
 load 399843-1.html
 load 400078-1.html
 load 400190.html
 load 400223-1.html
 load 400232-1.html
 load 400244-1.html
 load 400768-1.xhtml
 load 400768-2.xhtml
-skip-if(!xbl) load 401042-1.xhtml
 load 401042-2.html
 load 402380-1.html
 load 402380-2.html
 load 402872-1.html
 load 402872-2.html
 load 403004.html
 load 403143-1.html
 load 403576-1.html
@@ -241,39 +236,36 @@ load 413712-1.xhtml # bug 1323680
 load 414061-1.html
 load chrome://reftest/content/crashtests/layout/generic/crashtests/414180-1.xul
 load 414719-1.html
 load 415685-1.html
 load 415818.xhtml
 load 416165.html
 load 416264-1.html
 load 416476-1.html
-skip-if(!xbl) load 417109-1.xhtml
 load 417848-1.xhtml
 load 417902-1.html
 load 417902-2.html
 load 418532-1.html
 load 418932-1.html
 load 419352.html
 load 420000-1.html
 load 420718.html
-skip-if(!xbl) load 420785-1.xhtml
 load 421404-1.html
 load 421671.html
 load 422283-1.html
 load 422301-1.html
 load 423055-1.html
 load 423098.html
 load 423264-1.html
 load 424629.html
 load 425253-1.html
 load 426040-1.html
 load 426272-1.html
 load 428263-1.html
-skip-if(!xbl) load 429458.xhtml
 load 429960-1.html
 load 429960-2.html
 load 429969-1.html
 load 429981-1.html
 load 430332-1.html
 load 430344-1.html
 load 430352-1.html
 load 430744-1.html
@@ -318,17 +310,16 @@ load 457380-1.html
 asserts(1) asserts-if(Android,0-1) load 459968.html # bug 1067022
 load 460910-1.xml
 load 461294-1.html
 load 462968.xhtml
 load 463350-1.html
 load 463350-2.html
 load 463350-3.html
 load 463741-1.html
-skip-if(!xbl) load 463785.xhtml
 load 465651-1.html
 load 467137-1.html
 load 467213-1.html
 load 467487-1.html
 load 467493-1.html
 load 467493-2.html
 load 467875-1.xhtml
 load 467914-1.html
@@ -365,17 +356,16 @@ load 494283-1.xhtml
 load 494283-2.html
 load 494332-1.html
 load 495875-1.html
 load 495875-2.html
 load 496742.html
 load 499138.html
 load 499857-1.html
 load 499862-1.html
-skip-if(!xbl) asserts(0-3) load 499885-1.xhtml # Bug 1220265
 load 501535-1.html
 load 503961-1.xhtml
 load 503961-2.html
 load 505912-1.html
 load 507566.html
 load 508154-1.xhtml
 load 508168-1.html
 load chrome://reftest/content/crashtests/layout/generic/crashtests/508816-1.xul
diff --git a/layout/inspector/tests/mochitest.ini b/layout/inspector/tests/mochitest.ini
--- a/layout/inspector/tests/mochitest.ini
+++ b/layout/inspector/tests/mochitest.ini
@@ -3,24 +3,20 @@ support-files =
   bug1202095.css
   bug1202095-2.css
   bug856317.css
   file_bug522601.html
 
 [test_bug462787.html]
 [test_bug462789.html]
 [test_bug522601-shadow.xhtml]
-[test_bug522601.xhtml]
-skip-if = !xbl
 [test_bug536379.html]
 [test_bug536379-2.html]
 [test_bug557726.html]
 [test_bug609549-shadow.xhtml]
-[test_bug609549.xhtml]
-skip-if = !xbl
 [test_bug856317.html]
 [test_bug877690.html]
 [test_bug1006595.html]
 [test_color_to_rgba.html]
 [test_css_property_is_shorthand.html]
 [test_getCSSStyleRules.html]
 support-files =
   file_getCSSStyleRules-default.html
diff --git a/layout/inspector/tests/test_bug522601.xhtml b/layout/inspector/tests/test_bug522601.xhtml
deleted file mode 100644
--- a/layout/inspector/tests/test_bug522601.xhtml
+++ /dev/null
@@ -1,244 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<!--
-https://bugzilla.mozilla.org/show_bug.cgi?id=522601
--->
-<head>
-  <title>Test for Bug 522601</title>
-  <script src="/tests/SimpleTest/SimpleTest.js"></script>
-  <link rel="stylesheet" type="text/css" href="/tests/SimpleTest/test.css"/>
-
-  <bindings xmlns="http://www.mozilla.org/xbl">
-    <binding id="testBinding">
-      <content><div><children/></div><children includes="span"/></content>
-    </binding>
-  </bindings>
-</head>
-<body>
-<a target="_blank" href="https://bugzilla.mozilla.org/show_bug.cgi?id=522601">Mozilla Bug 522601</a>
-<p id="display" style="-moz-binding: url(#testBinding)">
-  <span id="s">This is some text</span>
-  More text
-  <b id="b">Even more <i id="i1">Italic</i>text<i id="i2">And more italic</i></b></p>
-<div id="content" style="display: none">
-  
-</div>
-<div id="subdoc">
-  <iframe id="frame1" src="file_bug522601.html">frame text</iframe>
-</div>
-<pre id="test">
-<script type="application/javascript">
-<![CDATA[
-
-/** Test for Bug 522601 **/
-SimpleTest.waitForExplicitFinish();
-
-function testFunc(walker, func, expectedNode, str) {
-  var oldCurrent = SpecialPowers.unwrap(walker.currentNode);
-  var newNode = SpecialPowers.unwrap(walker[func]());
-  is(newNode, expectedNode, "Unexpected node after " + str);
-  is(SpecialPowers.unwrap(walker.currentNode), newNode ? newNode : oldCurrent,
-     "Unexpected current node after " + str);
-}
-
-addLoadEvent(function() {
- var walkerSubDocument =
-    SpecialPowers.Cc["@mozilla.org/inspector/deep-tree-walker;1"]
-              .createInstance(SpecialPowers.Ci.inIDeepTreeWalker);
-  walkerSubDocument.showAnonymousContent = false;
-  walkerSubDocument.showSubDocuments = true;
-  walkerSubDocument.init($("frame1"), NodeFilter.SHOW_ALL);
-
-  is(SpecialPowers.unwrap(walkerSubDocument.currentNode), $("frame1"), "Unexpected sub-doc root");
-  testFunc(walkerSubDocument, "firstChild", $("frame1").contentDocument.doctype,
-           "step to sub documents doctype");
-  testFunc(walkerSubDocument, "nextSibling", $("frame1").contentDocument.documentElement,
-           "step to sub documents documentElement");
-
-  walkerSubDocument =
-    SpecialPowers.Cc["@mozilla.org/inspector/deep-tree-walker;1"]
-              .createInstance(SpecialPowers.Ci.inIDeepTreeWalker);
-  walkerSubDocument.showAnonymousContent = false;
-  walkerSubDocument.showSubDocuments = true;
-  walkerSubDocument.showDocumentsAsNodes = true;
-  walkerSubDocument.init($("frame1"), NodeFilter.SHOW_ALL);
-
-  is(SpecialPowers.unwrap(walkerSubDocument.currentNode), $("frame1"), "Unexpected sub-doc root");
-  testFunc(walkerSubDocument, "firstChild", $("frame1").contentDocument,
-           "step to sub document");
-  testFunc(walkerSubDocument, "firstChild", $("frame1").contentDocument.doctype,
-           "step to sub documents doctype");
-  testFunc(walkerSubDocument, "nextSibling", $("frame1").contentDocument.documentElement,
-           "step to sub documents documentElement");
-
-  walkerSubDocument.currentNode = $("frame1").contentDocument;
-  is(SpecialPowers.unwrap(walkerSubDocument.currentNode), $("frame1").contentDocument,
-     "setting currentNode to sub document");
-  testFunc(walkerSubDocument, "nextSibling", null,
-           "nextSibling for sub document is null");
-
-  var walkerFrameChild =
-    SpecialPowers.Cc["@mozilla.org/inspector/deep-tree-walker;1"]
-              .createInstance(SpecialPowers.Ci.inIDeepTreeWalker);
-  walkerFrameChild.showAnonymousContent = false;
-  walkerFrameChild.showSubDocuments = false;
-  walkerFrameChild.init($("frame1"), NodeFilter.SHOW_ALL);
-
-  is(SpecialPowers.unwrap(walkerFrameChild.currentNode), $("frame1"), "Unexpected sub-doc root");
-  testFunc(walkerFrameChild, "firstChild", $("frame1").firstChild,
-           "step to frames child");
-
-  var walkerNonAnon =
-    SpecialPowers.Cc["@mozilla.org/inspector/deep-tree-walker;1"]
-              .createInstance(SpecialPowers.Ci.inIDeepTreeWalker);
-  walkerNonAnon.init($("display"), NodeFilter.SHOW_ALL);
-  walkerNonAnon.showAnonymousContent = false;
-
-  is(SpecialPowers.unwrap(walkerNonAnon.currentNode), $("display"), "Unexpected non-anon root");
-  testFunc(walkerNonAnon, "nextNode", $("s").previousSibling,
-           "step to some text");
-  testFunc(walkerNonAnon, "nextNode", $("s"), "step to span");
-  testFunc(walkerNonAnon, "nextNode", $("s").firstChild, "step to span text");
-  testFunc(walkerNonAnon, "nextNode", $("s").nextSibling, "step to more text");
-  testFunc(walkerNonAnon, "nextNode", $("b"), "step to bold");
-  testFunc(walkerNonAnon, "nextNode", $("b").firstChild, "step to bold text");
-  testFunc(walkerNonAnon, "nextNode", $("i1"), "step to first italic");
-  testFunc(walkerNonAnon, "nextNode", $("i1").firstChild,
-           "step to first italic text");
-  testFunc(walkerNonAnon, "nextNode", $("i1").nextSibling,
-           "step to more bold text");
-  testFunc(walkerNonAnon, "nextNode", $("i2"), "step to second italic");
-  testFunc(walkerNonAnon, "nextNode", $("i2").firstChild,
-           "step to second italic text");
-  testFunc(walkerNonAnon, "nextNode", null, "step past end");
-  testFunc(walkerNonAnon, "parentNode", $("i2"), "step up to second italic");
-  testFunc(walkerNonAnon, "parentNode", $("b"), "step up to bold");
-  testFunc(walkerNonAnon, "nextNode", $("b").firstChild, "step to bold text again");
-  testFunc(walkerNonAnon, "parentNode", $("b"), "step up to bold again");
-  testFunc(walkerNonAnon, "parentNode", $("display"), "step up to display");
-  testFunc(walkerNonAnon, "parentNode", null, "step up past root");
-  testFunc(walkerNonAnon, "firstChild", $("s").previousSibling,
-           "step firstChild to display first child");
-  testFunc(walkerNonAnon, "nextSibling", $("s"),
-           "step nextSibling to span");
-  testFunc(walkerNonAnon, "nextSibling", $("s").nextSibling,
-           "step nextSibling to more text");
-  testFunc(walkerNonAnon, "nextSibling", $("b"), "step nextSibling to bold");
-  testFunc(walkerNonAnon, "nextSibling", null, "step nextSibling past end");
-  testFunc(walkerNonAnon, "previousSibling", $("s").nextSibling,
-           "step previousSibling to more text");
-  testFunc(walkerNonAnon, "previousSibling", $("s"),
-           "step previousSibling to span");
-  testFunc(walkerNonAnon, "previousSibling", $("s").previousSibling,
-           "step previousSibling to display first child");
-  testFunc(walkerNonAnon, "previousSibling", null,
-           "step previousSibling past end");
-
-  // Move the walker over to the end
-  while (walkerNonAnon.nextNode()) { /* do nothing */ }
-  is(SpecialPowers.unwrap(walkerNonAnon.currentNode), $("i2").firstChild, "unexpected last node");
-  testFunc(walkerNonAnon, "previousNode", $("i2"), "step back to second italic");
-  testFunc(walkerNonAnon, "previousNode", $("i1").nextSibling,
-           "step back to more bold text");
-  testFunc(walkerNonAnon, "previousNode", $("i1").firstChild,
-           "step back to first italic text");
-  testFunc(walkerNonAnon, "previousNode", $("i1"), "step back to first italic");
-  testFunc(walkerNonAnon, "previousNode", $("b").firstChild,
-           "step back to bold text");
-  testFunc(walkerNonAnon, "previousNode", $("b"), "step back to bold");
-  testFunc(walkerNonAnon, "previousNode", $("s").nextSibling, "step back to more text");
-  testFunc(walkerNonAnon, "previousNode", $("s").firstChild, "step back to span text");
-  testFunc(walkerNonAnon, "previousNode", $("s"), "step back to span");
-  testFunc(walkerNonAnon, "previousNode", $("s").previousSibling,
-           "step back to some text");
-  testFunc(walkerNonAnon, "previousNode", $("display"),
-           "step back to root");
-  testFunc(walkerNonAnon, "previousNode", null,
-           "step back past root");
-
-  walkerNonAnon.currentNode =  $("s");
-  is(SpecialPowers.unwrap(walkerNonAnon.currentNode), SpecialPowers.unwrap($("s")), 
-     "Setting currentNode to span");
-
-  var anonDiv = SpecialPowers.unwrap(SpecialPowers.wrap(document).getAnonymousNodes($("display")))[0];
-
-  try {
-    walkerNonAnon.currentNode = anonDiv;
-    ok(false, "Setting current node to a node that is otherwise unreachable," +
-              " with the current visibility settings should throw");
-  } catch(e) {
-    ok(e.toString().indexOf("NS_ERROR_ILLEGAL_VALUE") > -1, "Setting current node to an anon node should throw" +
-       " NS_ERROR_ILLEGAL_VALUE if showAnonymousContent is set to false");
-    is(SpecialPowers.unwrap(walkerNonAnon.currentNode), SpecialPowers.unwrap($("s")), 
-       "An unsuccessfull set currentNode should leave behind the old state");
-    testFunc(walkerNonAnon, "nextSibling", $("s").nextSibling, "nextSibling after set currentNode");
-  }
-
-  var walkerAnon =
-    SpecialPowers.Cc["@mozilla.org/inspector/deep-tree-walker;1"]
-              .createInstance(SpecialPowers.Ci.inIDeepTreeWalker);
-  walkerAnon.showAnonymousContent = true;
-  walkerAnon.init($("display"), NodeFilter.SHOW_ALL);
-
-  is(SpecialPowers.unwrap(walkerAnon.currentNode), $("display"), "Unexpected anon root");
-  testFunc(walkerAnon, "nextNode", anonDiv,
-           "step to anonymous div");
-  testFunc(walkerAnon, "nextNode", $("s").previousSibling,
-           "step to some text (anon)");
-  testFunc(walkerAnon, "nextNode", $("s").nextSibling, "step to more text (anon)");
-  testFunc(walkerAnon, "nextNode", $("b"), "step to bold (anon)");
-  testFunc(walkerAnon, "nextNode", $("b").firstChild, "step to bold text (anon)");
-  testFunc(walkerAnon, "nextNode", $("i1"), "step to first italic (anon)");
-  testFunc(walkerAnon, "nextNode", $("i1").firstChild,
-           "step to first italic text (anon)");
-  testFunc(walkerAnon, "nextNode", $("i1").nextSibling,
-           "step to more bold text (anon)");
-  testFunc(walkerAnon, "nextNode", $("i2"), "step to second italic (anon)");
-  testFunc(walkerAnon, "nextNode", $("i2").firstChild,
-           "step to second italic text (anon)");
-  testFunc(walkerAnon, "nextNode", $("s"), "step to span (anon)");
-  testFunc(walkerAnon, "nextNode", $("s").firstChild, "step to span text (anon)");
-  testFunc(walkerAnon, "nextNode", null, "step past end (anon)");
-  testFunc(walkerAnon, "parentNode", $("s"), "step up to span (anon)");
-  testFunc(walkerAnon, "parentNode", $("display"), "step up to display (anon)");
-  testFunc(walkerAnon, "nextNode", anonDiv, "step to anonymous div again");
-  testFunc(walkerAnon, "parentNode", $("display"),
-           "step up to display again (anon)");
-  testFunc(walkerAnon, "parentNode", null, "step up past root (anon)");
-  testFunc(walkerAnon, "firstChild", anonDiv,
-           "step firstChild to display first child (anon)");
-  testFunc(walkerAnon, "nextSibling", $("s"),
-           "step nextSibling to span (anon)");
-  testFunc(walkerAnon, "nextSibling", null, "step nextSibling past end (anon)");
-  testFunc(walkerAnon, "previousSibling", anonDiv,
-           "step previousSibling to anonymous div");
-  testFunc(walkerAnon, "previousSibling", null, "step previousSibling past end (anon)");
-
-  // Move the walker over to the end
-  while (walkerAnon.nextNode()) { /* do nothing */ }
-  testFunc(walkerAnon, "previousNode", $("s"), "step back to span (anon)");
-  testFunc(walkerAnon, "previousNode", $("i2").firstChild,
-           "step back to second italic text (anon)");
-  testFunc(walkerAnon, "previousNode", $("i2"), "step back to second italic (anon)");
-  testFunc(walkerAnon, "previousNode", $("i1").nextSibling,
-           "step back to more bold text (anon)");
-  testFunc(walkerAnon, "previousNode", $("i1").firstChild,
-           "step back to first italic text (anon)");
-  testFunc(walkerAnon, "previousNode", $("i1"), "step back to first italic (anon)");
-  testFunc(walkerAnon, "previousNode", $("b").firstChild, "step back to bold text (anon)");
-  testFunc(walkerAnon, "previousNode", $("b"), "step back to bold (anon)");
-  testFunc(walkerAnon, "previousNode", $("s").nextSibling, "step back to more text (anon)");
-  testFunc(walkerAnon, "previousNode", $("s").previousSibling,
-           "step back to some text (anon)");
-  testFunc(walkerAnon, "previousNode", anonDiv,
-           "step back to anonymous div");
-  testFunc(walkerAnon, "previousNode", $("display"), "step back to root (anon)");
-  testFunc(walkerAnon, "previousNode", null, "step back past root (anon)");
-
-  SimpleTest.finish();
-});
-
-]]>
-</script>
-</pre>
-</body>
-</html>
diff --git a/layout/inspector/tests/test_bug609549.xhtml b/layout/inspector/tests/test_bug609549.xhtml
deleted file mode 100644
--- a/layout/inspector/tests/test_bug609549.xhtml
+++ /dev/null
@@ -1,68 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<!--
-https://bugzilla.mozilla.org/show_bug.cgi?id=609549
--->
-<head>
-  <title>Test for Bug 609549</title>
-  <script src="/tests/SimpleTest/SimpleTest.js"></script>
-  <link rel="stylesheet" type="text/css" href="/tests/SimpleTest/test.css"/>
-
-  <bindings xmlns="http://www.mozilla.org/xbl">
-    <binding id="testBinding">
-      <!-- No linebreaks since this is html and whitespace is preserved. -->
-      <content><div anonid="box-A">x</div><div anonid="box-B"><children includes="span"/></div><div anonid="box-C">x</div><children/></content>
-    </binding>
-  </bindings>
-</head>
-
-<body>
-<a target="_blank" href="https://bugzilla.mozilla.org/show_bug.cgi?id=609549">Mozilla Bug 609549</a>
-<div id="bound" style="-moz-binding: url(#testBinding);"><p id="p">lorem ipsum dolor sit amet</p><span id="sandwiched">sandwiched</span></div>
-
-<div id="content" style="display: none">
-  
-</div>
-<pre id="test">
-<script type="application/javascript">
-<![CDATA[
-
-/** Test for Bug 609549 **/
-SimpleTest.waitForExplicitFinish();
-
-const InspectorUtils = SpecialPowers.InspectorUtils;
-
-addLoadEvent(function() {
-  ok("getChildrenForNode" in InspectorUtils, "InspectorUtils has no getChildrenForNode");
-  var withoutAnons =
-    SpecialPowers.unwrap(InspectorUtils.getChildrenForNode($("bound"), false));
-
-  is(withoutAnons.length, $("bound").childNodes.length,
-     "withoutAnons should be the same length as childNodes");
-  is(withoutAnons[0], $("p"), "didn't get paragraph - without anons");
-  is(withoutAnons[1], $("sandwiched"),
-     "didn't get sandwiched span - without anons");
-
-  var withAnons = InspectorUtils.getChildrenForNode($("bound"), true);
-
-  is(withAnons.length, 4, "bad withAnons.length");
-  is(withAnons[0].getAttribute("anonid"), "box-A",
-     "didn't get anonymous box-A");
-  is(withAnons[1].getAttribute("anonid"), "box-B",
-     "didn't get anonymous box-B");
-  is(withAnons[2].getAttribute("anonid"), "box-C",
-     "didn't get anonymous box-C");
-  is(withAnons[3].id, "p", "didn't get paragraph - with anons");
-
-  var bKids = InspectorUtils.getChildrenForNode(withAnons[1], true);
-  is(bKids.length, 1, "bKids.length is bad");
-  is(SpecialPowers.unwrap(bKids[0]), $("sandwiched"),
-     "didn't get sandwiched span inserted into box-B");
-
-  SimpleTest.finish();
-});
-
-]]>
-</script>
-</pre>
-</body>
-</html>
diff --git a/layout/mathml/crashtests/477740-1.xhtml b/layout/mathml/crashtests/477740-1.xhtml
deleted file mode 100644
--- a/layout/mathml/crashtests/477740-1.xhtml
+++ /dev/null
@@ -1,25 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xbl="http://www.mozilla.org/xbl" xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" xmlns:math="http://www.w3.org/1998/Math/MathML">
-<head>
-
-<xbl:bindings><xbl:binding id="res"><xbl:content><xul:resizer><xbl:children/></xul:resizer></xbl:content></xbl:binding></xbl:bindings>
-
-<script type="text/javascript">
-
-function boom()
-{
-  var x = document.getElementById("x");
-
-  var r = document.createRange();
-  r.setEnd(x, 1);
-  r.extractContents();
-
-  x.appendChild(document.createElement('span'));
-}
-
-</script>
-</head>
-
-<body onload="boom();">
-<xul:rows id="x" style="-moz-binding: url(#res);"><math:ms/></xul:rows>
-</body>
-</html>
diff --git a/layout/mathml/crashtests/crashtests.list b/layout/mathml/crashtests/crashtests.list
--- a/layout/mathml/crashtests/crashtests.list
+++ b/layout/mathml/crashtests/crashtests.list
@@ -46,17 +46,16 @@ load 412237-1.xml
 load 413063-1.xhtml
 load 416907-1.xhtml
 load 420420-1.xhtml
 load 431072-1.xhtml
 load 443089-1.xhtml
 load 463763-1.xhtml
 load 463763-2.xhtml
 load 476547-1.xhtml
-skip-if(!xbl) load 477740-1.xhtml
 load 541620-1.xhtml
 load 557474-1.html
 load 654928-1.html
 load 655451-1.xhtml
 load 713606-1.html
 load 716349-1.html
 load 767251.xhtml
 load 848725-1.html
diff --git a/layout/reftests/bugs/232990-1b.xhtml b/layout/reftests/bugs/232990-1b.xhtml
deleted file mode 100644
--- a/layout/reftests/bugs/232990-1b.xhtml
+++ /dev/null
@@ -1,63 +0,0 @@
-<?xml version="1.0"?>
-<html xmlns="http://www.w3.org/1999/xhtml">
-  <head>
-    <title>display test</title>
-    <bindings xmlns="http://www.mozilla.org/xbl"
-              xmlns:pp="prettyprint"
-              xmlns:html="http://www.w3.org/1999/xhtml">
-
-      <binding id="expander">
-        <content><pp:float>-</pp:float><children/></content>
-      </binding>
-    </bindings>
-
-    <style type="text/css">
-<![CDATA[
-@namespace pp url("prettyprint");
-pp|expander-box,
-pp|pre-content {
-  display: block;
-}
-
-pp|expander-box[collapsed] > pp|float,
-pp|expander-box[collapsed] > pp|pre-content {
-  display: inline;
-  float: none;
-}
-
-pp|expander-box[xbl] {
-  -moz-binding: url(#expander);
-}
-
-pp|float {
-  float: left;
-}
-    ]]></style>
-    <script>
-<![CDATA[
-var target;
-function onLoad() {
-var res = document.evaluate("descendant::pp:expander-box",
-                    document.documentElement,
-                    function(aPref){return "prettyprint";},
-                    0, null);
-target = res.iterateNext();
-toggle();
-}
-
-function toggle() {
-  target.setAttribute("collapsed", "collapsed");
-}
-    ]]></script>
-  </head>
-
-  <body onload="onLoad()">
-    <div>
-<pp:content xmlns:pp="prettyprint">
-  <pp:expander-box xbl="yes">
-    <pp:pre-content>pre</pp:pre-content>
-  </pp:expander-box>
-</pp:content>
-    </div>
-  </body>
-</html>
diff --git a/layout/reftests/bugs/309914-1-ref.xul b/layout/reftests/bugs/309914-1-ref.xul
deleted file mode 100644
--- a/layout/reftests/bugs/309914-1-ref.xul
+++ /dev/null
@@ -1,11 +0,0 @@
-<?xml version="1.0"?>
-<?xml-stylesheet href="chrome://global/skin/global.css" type="text/css"?>
-
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-<hbox>
-  <label value="anon label"/>
-  <button label="1"/>
-  <button label="0"/>
-</hbox>
-
-</window>
diff --git a/layout/reftests/bugs/309914-1.xul b/layout/reftests/bugs/309914-1.xul
deleted file mode 100644
--- a/layout/reftests/bugs/309914-1.xul
+++ /dev/null
@@ -1,45 +0,0 @@
-<?xml version="1.0"?>
-<?xml-stylesheet href="chrome://global/skin/global.css" type="text/css"?>
-
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-	class="reftest-wait">
-
-<hbox style="display: none">
-  <bindings id="testBindings" xmlns="http://www.mozilla.org/xbl"
-	    xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-
-    <binding id="testBinding" >
-      <content>
-	<xul:label value="anon label"/>
-	<children/>
-      </content>
-    </binding>
-  </bindings>
-</hbox>
-<script>
-<![CDATA[
-var cont;
-
-window.onload = function() {
-  const XUL_NS = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
-  cont = document.getElementById("container");
-
-  for(var i=0; i<2; i++) {
-    var item = document.createElementNS(XUL_NS, "button");
-    cont.appendChild(item);
-    item.label = i;
-  }
-
-  document.documentElement.getBoundingClientRect();
-
-  var item = cont.firstChild;
-  //alert(item.label);
-  cont.insertBefore(item.nextSibling, item);
-  document.documentElement.removeAttribute("class");
-}
-]]>
-</script>
-
-<hbox id="container" style="-moz-binding: url('#testBinding');"/>
-
-</window>
diff --git a/layout/reftests/bugs/334829-1a.xhtml b/layout/reftests/bugs/334829-1a.xhtml
deleted file mode 100644
--- a/layout/reftests/bugs/334829-1a.xhtml
+++ /dev/null
@@ -1,33 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-  <bindings xmlns="http://www.mozilla.org/xbl">
-    <binding id="test">
-      <content>
-        <span><children/></span>
-      </content>
-    </binding>
-  </bindings>
-  <script type="application/x-javascript">
-    function runTest() {
-      var div = document.getElementById("testDiv");
-
-      // First we have to make sure that we've looked up the primary frame for
-      // the textnode.  Appending a space should do the trick.
-      div.firstChild.data += " ";
-
-      // Now flush our reflow
-      document.body.offsetWidth;
-
-      var node = document.createElementNS("http://www.w3.org/1999/xhtml",
-                                          "span");
-      div.appendChild(node);
-      node.appendChild(document.createTextNode("This text should appear"));
-    }
-  </script>
-</head>
-
-<body onload="runTest()">
-<div id="testDiv" style="width: 0; -moz-binding: url(#test)">This is text in a div</div>
-
-</body>
-</html>
diff --git a/layout/reftests/bugs/334829-1b.xhtml b/layout/reftests/bugs/334829-1b.xhtml
deleted file mode 100644
--- a/layout/reftests/bugs/334829-1b.xhtml
+++ /dev/null
@@ -1,34 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-  <bindings xmlns="http://www.mozilla.org/xbl">
-    <binding id="test">
-      <content>
-        <span><children/></span>
-      </content>
-    </binding>
-  </bindings>
-  <script type="application/x-javascript">
-    function runTest() {
-      var div = document.getElementById("testDiv");
-
-      // First we have to make sure that we've looked up the primary frame for
-      // the previous child span.  Appending text to it should do the trick.
-      div.firstChild.
-          appendChild(document.createTextNode("This is text in a div "));
-
-      // Now flush out reflow
-      document.body.offsetWidth;
-
-      var node = document.createElementNS("http://www.w3.org/1999/xhtml",
-                                          "span");
-      div.appendChild(node);
-      node.appendChild(document.createTextNode("This text should appear"));
-    }
-  </script>
-</head>
-
-<body onload="runTest()">
-<div id="testDiv" style="width: 0; -moz-binding: url(#test)"><span></span></div>
-
-</body>
-</html>
diff --git a/layout/reftests/bugs/366207-1-ref.xul b/layout/reftests/bugs/366207-1-ref.xul
deleted file mode 100644
--- a/layout/reftests/bugs/366207-1-ref.xul
+++ /dev/null
@@ -1,7 +0,0 @@
-<?xml version="1.0"?>
-
-<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-<label>After</label>
-</window>
-
diff --git a/layout/reftests/bugs/366207-1.xul b/layout/reftests/bugs/366207-1.xul
deleted file mode 100644
--- a/layout/reftests/bugs/366207-1.xul
+++ /dev/null
@@ -1,54 +0,0 @@
-<?xml version="1.0"?>
-
-<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
-
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-        onload="loaded()"
-	class="reftest-wait">
-        
-<hbox style="display: none">
-<bindings xmlns="http://www.mozilla.org/xbl"
-          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-  <binding id="foo">
-    <content>
-      <xul:hbox
-         xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-       <xul:label>After</xul:label>
-     </xul:hbox>
-     <xul:hbox style="display:none">
-       <children/>
-     </xul:hbox>
-    </content>
-    <implementation>
-      <constructor>
-        var win = XPCNativeWrapper.unwrap(window);
-        win.setTimeout(function() {
-          win.document.documentElement.clientHeight;
-          win.setTimeout(win.finish, 0);
-        }, 0);
-      </constructor>
-    </implementation>
-  </binding>
-</bindings>
-</hbox>
-
-<script>
-function loaded()
-{
-  setTimeout(function() {
-    document.documentElement.clientHeight;
-    setTimeout(boom, 0);
-  }, 0);
-}
-function boom()
-{
-  document.documentElement.style.MozBinding = "url('#foo')"; 
-}
-function finish()
-{
-  document.documentElement.removeAttribute("class");
-}
-</script>
-<label>Before</label>
-</window>
-
diff --git a/layout/reftests/bugs/372323-1-ref.xhtml b/layout/reftests/bugs/372323-1-ref.xhtml
deleted file mode 100644
--- a/layout/reftests/bugs/372323-1-ref.xhtml
+++ /dev/null
@@ -1,15 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-  <head>
-    <style>
-      div { color: green; }
-    </style>
-  </head>
-  <body>
-    <div>
-      <span>test</span>
-    </div>
-    <div>
-      <span>test</span>
-    </div>
-  </body>
-</html>
diff --git a/layout/reftests/bugs/372323-1.xhtml b/layout/reftests/bugs/372323-1.xhtml
deleted file mode 100644
--- a/layout/reftests/bugs/372323-1.xhtml
+++ /dev/null
@@ -1,32 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-  <head>
-    <style>
-      div { color: green; }
-    </style>
-  </head>
-  <body onload="runTest()">
-    <div id="test1" style="-moz-binding: url(372323-1xbl.xml#test);"/>
-    <div id="test2" style="-moz-binding: url(372323-1xbl.xml#test);">
-      <!-- Make the script load, so the binding loads first -->
-      <script src="data:text/javascript,document.body.offsetWidth;"/>
-      <!-- The whitespace here is important... or this comment will do
-           the trick too -->
-      <span>test</span>
-    </div>
-    <script>
-      function runTest() {
-        var n = document.getElementById("test1");
-        n.appendChild(makeSpan());
-
-        document.documentElement.className = "";
-      }
-
-      function makeSpan() {
-        var s = document.createElementNS("http://www.w3.org/1999/xhtml",
-                                         "span");
-        s.appendChild(document.createTextNode("test"));
-        return s;
-      }      
-    </script>
-  </body>
-</html>
diff --git a/layout/reftests/bugs/372323-1xbl.xml b/layout/reftests/bugs/372323-1xbl.xml
deleted file mode 100644
--- a/layout/reftests/bugs/372323-1xbl.xml
+++ /dev/null
@@ -1,11 +0,0 @@
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="test">
-    <content>
-      <children includes="span"/>
-      <html:div xmlns:html="http://www.w3.org/1999/xhtml" style="color: red">
-        <children/>
-      </html:div>
-    </content>
-  </binding>
-
-</bindings>
diff --git a/layout/reftests/bugs/374719-1-css.css b/layout/reftests/bugs/374719-1-css.css
deleted file mode 100644
--- a/layout/reftests/bugs/374719-1-css.css
+++ /dev/null
@@ -1,57 +0,0 @@
-gridlikebox {
-  margin: 2px 4px;
-  background-color: -moz-Field;
-  color: -moz-FieldText;
-  -moz-binding: url('374719-1-xbl.xml#gridlike');
-  -moz-user-focus: normal;
-  -moz-appearance: listbox;
-}
-
-gridlikehead {
-  -moz-binding: url("374719-1-xbl.xml#gridlikehead");
-}
-
-gridlikebox > scrollbox > box {
-  display: -moz-grid;
-}
-
-gridlikecols, gridlikehead, gridlikerows, gridlikeboxbody {
-  display: -moz-grid-group;
-}
-
-gridlikecol, gridlikeitem, gridlikeheaditem {
-  display: -moz-grid-line;
-}
-
-gridlikehead {
-  -moz-box-orient: vertical;
-}
-
-gridlikerows {
-  -moz-box-orient: vertical;
-  -moz-box-flex: 1;
-}
-
-gridlikeboxbody {
-  -moz-box-orient: vertical;
-  -moz-box-flex: 1;
-}
-
-gridlikecol {
-  -moz-box-orient: vertical;
-  min-width: 16px;
-}
-
-gridlikeheader {
-  -moz-box-ordinal-group: 2147483646;
-  -moz-appearance: treeheadercell;
-  -moz-box-align: center;
-  border: 2px solid;
-  -moz-border-top-colors: ThreeDHighlight ThreeDLightShadow;
-  -moz-border-right-colors: ThreeDDarkShadow ThreeDShadow;
-  -moz-border-bottom-colors: ThreeDDarkShadow ThreeDShadow;
-  -moz-border-left-colors: ThreeDHighlight ThreeDLightShadow;
-  background-color: -moz-Dialog;
-  color: -moz-DialogText;
-  padding: 0 4px;
-}
diff --git a/layout/reftests/bugs/374719-1-ref.xul b/layout/reftests/bugs/374719-1-ref.xul
deleted file mode 100644
--- a/layout/reftests/bugs/374719-1-ref.xul
+++ /dev/null
@@ -1,41 +0,0 @@
-<?xml version="1.0"?>
-
-<?xml-stylesheet href="chrome://global/skin/global.css"
-                 type="text/css"?>
-<?xml-stylesheet href="374719-1-css.css"
-                 type="text/css"?>
-
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-  <gridlikebox flex="1">
-    <gridlikecols>
-      <gridlikecol flex="1"/>
-      <gridlikecol flex="1"/>
-    </gridlikecols>
-
-    <gridlikehead>
-      <gridlikeheader label="Col1"/>
-      <gridlikeheader label="Col2"/>
-    </gridlikehead>
-
-    <gridlikeitem value="hello1">
-      <gridlikecell><label value="Hello"/></gridlikecell>
-      <gridlikecell><label value="Hello"/></gridlikecell>
-    </gridlikeitem>
-    <gridlikeitem value="aValue">
-      <gridlikecell><label value="aLabel1"/></gridlikecell>
-      <gridlikecell><label value="aLabel2"/></gridlikecell>
-    </gridlikeitem>
-    <gridlikeitem value="hello2">
-      <gridlikecell><label value="Hello2"/></gridlikecell>
-      <gridlikecell><label value="Hello2.1"/></gridlikecell>
-    </gridlikeitem>
-    <gridlikeitem value="hello3">
-      <gridlikecell><label value="Hello592"/></gridlikecell>
-      <gridlikecell><label value="Hello592.1"/></gridlikecell>
-    </gridlikeitem>
-    <gridlikeitem value="hello4">
-      <gridlikecell><label value="Hello4"/></gridlikecell>
-      <gridlikecell><label value="Hello4--"/></gridlikecell>
-    </gridlikeitem>
-  </gridlikebox>
-</window>
diff --git a/layout/reftests/bugs/374719-1-xbl.xml b/layout/reftests/bugs/374719-1-xbl.xml
deleted file mode 100644
--- a/layout/reftests/bugs/374719-1-xbl.xml
+++ /dev/null
@@ -1,34 +0,0 @@
-<?xml version="1.0"?>
-
-<bindings xmlns="http://www.mozilla.org/xbl"
-          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-          xmlns:xbl="http://www.mozilla.org/xbl"
-          xmlns:html="http://www.w3.org/1999/xhtml">
-
-  <binding id="gridlike">
-    <content>
-      <xul:scrollbox allowevents="true" orient="vertical" anonid="main-box"
-                     flex="1" style="overflow: auto;">
-        <children includes="gridlikecols">
-          <xul:gridlikecols>
-            <xul:gridlikecol flex="1"/>
-          </xul:gridlikecols>
-        </children>
-        <xul:gridlikerows>
-          <children includes="gridlikehead"/>
-          <xul:gridlikeboxbody xbl:inherits="rows,size,minheight">
-            <children includes="gridlikeitem"/>
-          </xul:gridlikeboxbody>
-        </xul:gridlikerows>
-      </xul:scrollbox>
-    </content>
-  </binding>
-
-  <binding id="gridlikehead">
-    <content>
-      <xul:gridlikeheaditem>
-        <children includes="gridlikeheader"/>
-      </xul:gridlikeheaditem>
-    </content>
-  </binding>
-</bindings>
diff --git a/layout/reftests/bugs/374719-1.xul b/layout/reftests/bugs/374719-1.xul
deleted file mode 100644
--- a/layout/reftests/bugs/374719-1.xul
+++ /dev/null
@@ -1,74 +0,0 @@
-<?xml version="1.0"?>
-
-<?xml-stylesheet href="chrome://global/skin/global.css"
-                 type="text/css"?>
-<?xml-stylesheet href="374719-1-css.css"
-                 type="text/css"?>
-
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-	onload="test2()">
-
-  <script>
-    function test2()
-    {
-      var r = document.getElementById('rbox');
-
-      const XULNS =
-        "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
-
-      var item = document.createElementNS(XULNS, "gridlikeitem");
-      item.setAttribute("value", "aValue");
-
-      var cell1 = document.createElementNS(XULNS, "gridlikecell");
-      var label1 = document.createElementNS(XULNS, "label");
-      label1.setAttribute("value", "aLabel1");
-      label1.setAttribute("flex", "1");
-      label1.setAttribute("crop", "end");
-      cell1.appendChild(label1);
-      item.appendChild(cell1);
-
-      var cell2 = document.createElementNS(XULNS, "gridlikecell");
-      var label2 = document.createElementNS(XULNS, "label");
-      label2.setAttribute("value", "aLabel2");
-      label2.setAttribute("flex", "1");
-      label2.setAttribute("crop", "end");
-      cell2.appendChild(label2);
-      item.appendChild(cell2);
-
-      var before = document.getElementById("inx");
-      if (!before)
-        r.appendChild(item);
-      else
-        r.insertBefore(item, before);
-    }
-  </script>
-
-  <gridlikebox flex="1" id="rbox">
-    <gridlikecols>
-      <gridlikecol flex="1"/>
-      <gridlikecol flex="1"/>
-    </gridlikecols>
-
-    <gridlikehead>
-      <gridlikeheader label="Col1"/>
-      <gridlikeheader label="Col2"/>
-    </gridlikehead>
-
-    <gridlikeitem value="hello1">
-      <gridlikecell><label value="Hello"/></gridlikecell>
-      <gridlikecell><label value="Hello"/></gridlikecell>
-    </gridlikeitem>
-    <gridlikeitem value="hello2" id="inx">
-      <gridlikecell><label value="Hello2"/></gridlikecell>
-      <gridlikecell><label value="Hello2.1"/></gridlikecell>
-    </gridlikeitem>
-    <gridlikeitem value="hello3">
-      <gridlikecell><label value="Hello592"/></gridlikecell>
-      <gridlikecell><label value="Hello592.1"/></gridlikecell>
-    </gridlikeitem>
-    <gridlikeitem value="hello4">
-      <gridlikecell><label value="Hello4"/></gridlikecell>
-      <gridlikecell><label value="Hello4--"/></gridlikecell>
-    </gridlikeitem>
-  </gridlikebox>
-</window>
diff --git a/layout/reftests/bugs/386310-1b.html b/layout/reftests/bugs/386310-1b.html
deleted file mode 100644
--- a/layout/reftests/bugs/386310-1b.html
+++ /dev/null
@@ -1,9 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <script src="386310-script.js"></script>
-  </head>
-  <body>
-    <div id="test" style="-moz-binding: url(386310-binding.xml#prepend);">first second third [fourth]</div>
-  </body>
-</html>
diff --git a/layout/reftests/bugs/386310-1c.html b/layout/reftests/bugs/386310-1c.html
deleted file mode 100644
--- a/layout/reftests/bugs/386310-1c.html
+++ /dev/null
@@ -1,9 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <script src="386310-script.js"></script>
-  </head>
-  <body>
-    <div id="test" style="-moz-binding: url(386310-binding.xml#append);">first second third [fourth]</div>
-  </body>
-</html>
diff --git a/layout/reftests/bugs/386310-1d.html b/layout/reftests/bugs/386310-1d.html
deleted file mode 100644
--- a/layout/reftests/bugs/386310-1d.html
+++ /dev/null
@@ -1,9 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <script src="386310-script.js"></script>
-  </head>
-  <body>
-    <div id="test" style="-moz-binding: url(386310-binding.xml#prepend-with-comment-fix);">first second third [fourth]</div>
-  </body>
-</html>
diff --git a/layout/reftests/bugs/386310-binding.xml b/layout/reftests/bugs/386310-binding.xml
deleted file mode 100644
--- a/layout/reftests/bugs/386310-binding.xml
+++ /dev/null
@@ -1,27 +0,0 @@
-<?xml version="1.0"?>
-<bindings xmlns="http://www.mozilla.org/xbl"
-          xmlns:html="http://www.w3.org/1999/xhtml">
-
-  <binding id="prepend">
-    <content>
-      <span/>
-      <children/>
-    </content>
-  </binding>
-
-  <binding id="append">
-    <content>
-      <children/>
-      <span/>
-    </content>
-  </binding>
-
-  <binding id="prepend-with-comment-fix" extends="#prepend">
-    <implementation>
-      <constructor>
-	var span = document.createComment("xbl generated comment to prevent bug #36");
-	this.insertBefore(span, this.firstChild);
-      </constructor>
-    </implementation>
-  </binding>
-</bindings>
diff --git a/layout/reftests/bugs/394676-1-ref.xhtml b/layout/reftests/bugs/394676-1-ref.xhtml
deleted file mode 100644
--- a/layout/reftests/bugs/394676-1-ref.xhtml
+++ /dev/null
@@ -1,6 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<body>
-<span id="test">constructor onload </span>
-</body>
-</html>
-
diff --git a/layout/reftests/bugs/394676-1.xhtml b/layout/reftests/bugs/394676-1.xhtml
deleted file mode 100644
--- a/layout/reftests/bugs/394676-1.xhtml
+++ /dev/null
@@ -1,40 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-<head>
-  <bindings xmlns="http://www.mozilla.org/xbl">
-    <binding id="xbltest">
-      <implementation>
-        <constructor>
-          <![CDATA[
-            var win = XPCNativeWrapper.unwrap(window);
-            win.str += "constructor "
-            win.testFinished();
-          ]]>
-        </constructor>
-      </implementation>
-    </binding>
-  </bindings>
-</head>
-<body>
-<span id="test" style="-moz-binding: url(#xbltest)"></span>
-<script class="testbody" type="text/javascript">
-<![CDATA[
-  var testsToFinish = 2;
-  var str = "";
-  
-  function testFinished() {
-    --testsToFinish;
-    if (!testsToFinish) {
-      document.getElementById("test").textContent = str;
-      document.documentElement.className = '';
-    }
-  }
-
-  window.onload = function() {
-    str += "onload ";
-    testFinished();
-  }
-]]>
-</script>
-</body>
-</html>
-
diff --git a/layout/reftests/bugs/395331-1-ref.xml b/layout/reftests/bugs/395331-1-ref.xml
deleted file mode 100644
--- a/layout/reftests/bugs/395331-1-ref.xml
+++ /dev/null
@@ -1,6 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml"
-      xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-<body>
-Kitty
-</body>
-</html> 
diff --git a/layout/reftests/bugs/395331-1.xml b/layout/reftests/bugs/395331-1.xml
deleted file mode 100644
--- a/layout/reftests/bugs/395331-1.xml
+++ /dev/null
@@ -1,19 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml"
-      xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-<head>
-<style>
-.base { -moz-binding: url("395331-xbl.xml#base"); }
-.inner { -moz-binding: url("395331-xbl.xml#inner"); }
-</style>
-<script>
-function boom()
-{
-  var x = document.getElementById("x");
-  x.removeChild(x.firstChild);
-}
-</script>
-</head>
-<body onload="boom();">
-<xul:box class="base" id="x" style="height:2em;">Hello</xul:box>Kitty
-</body>
-</html> 
diff --git a/layout/reftests/bugs/395331-xbl.xml b/layout/reftests/bugs/395331-xbl.xml
deleted file mode 100644
--- a/layout/reftests/bugs/395331-xbl.xml
+++ /dev/null
@@ -1,30 +0,0 @@
-<?xml version="1.0"?>
-
-<!DOCTYPE bindings>
-
-<bindings id="testBindings"
-   xmlns="http://www.mozilla.org/xbl"
-   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-   xmlns:xbl="http://www.mozilla.org/xbl">
-
-  <binding id="base">
-    <content>
-      <xul:box flex="1">
-        <xul:box class="inner" flex="1">
-          <children/>
-        </xul:box>
-      </xul:box>
-    </content>
-  </binding>
-
-  <binding id="inner">
-    <content>
-      <xul:box flex="1">
-        <xul:box flex="1">
-          <children/>
-        </xul:box>
-      </xul:box>
-    </content>
-  </binding>
-
-</bindings>
diff --git a/layout/reftests/bugs/396286-1.html b/layout/reftests/bugs/396286-1.html
deleted file mode 100644
--- a/layout/reftests/bugs/396286-1.html
+++ /dev/null
@@ -1,12 +0,0 @@
-<html><head>
-<style id="script">#a::first-line {}</style>
-</head>
-<body>
-<span id="a" style="-moz-binding: url(396286-1xbl.xml#a);">
-  <br>
-  <span style="-moz-binding: url(396286-1xbl.xml#b);">
-    <span style="position: absolute;-moz-binding: url(396286-1xbl.xml#a);"></span>
-  </span>
-</span>
-</body>
-</html>
diff --git a/layout/reftests/bugs/396286-1xbl.xml b/layout/reftests/bugs/396286-1xbl.xml
deleted file mode 100644
--- a/layout/reftests/bugs/396286-1xbl.xml
+++ /dev/null
@@ -1,20 +0,0 @@
-<bindings xmlns="http://www.mozilla.org/xbl">
-
-<binding id="a">
-<implementation>
-<constructor>
-  this.style.position='fixed';
-</constructor>
-</implementation>
-<content>
-<children/>
-</content>
-</binding>
-
-<binding id="b">
-<content>
-<children/>
-</content>
-</binding>
-
-</bindings>
diff --git a/layout/reftests/bugs/403962-1-ref.xhtml b/layout/reftests/bugs/403962-1-ref.xhtml
deleted file mode 100644
--- a/layout/reftests/bugs/403962-1-ref.xhtml
+++ /dev/null
@@ -1,17 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-  <head>
-    <style>
-      div { color: green; }
-    </style>
-  </head>
-  <body>
-    <div>
-      <!-- Need the non-breaking spaces to avoid some reftest badness due to
-           the 't' extending outside its nominal metrics -->
-      <span>&#xA0;test</span>
-    </div>
-    <div>
-      <span>&#xA0;test</span>
-    </div>
-  </body>
-</html>
diff --git a/layout/reftests/bugs/403962-1.xhtml b/layout/reftests/bugs/403962-1.xhtml
deleted file mode 100644
--- a/layout/reftests/bugs/403962-1.xhtml
+++ /dev/null
@@ -1,36 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-  <head>
-    <style>
-      div { color: green; }
-
-      #test1, #test2 {
-        -moz-binding: url(403962-1xbl.xml#test);
-      }
-    </style>
-  </head>
-  <body onload="runTest()">
-    <div id="test1"/>
-    <div id="test2">
-      <!-- Make the script load, so the binding loads first -->
-      <script src="data:text/javascript,document.body.offsetWidth;"/>
-      <!-- The whitespace here is important... or this comment will do
-           the trick too -->
-      <span>&#xA0;test</span>
-    </div>
-    <script>
-      function runTest() {
-        var n = document.getElementById("test1");
-        n.appendChild(makeSpan());
-
-        document.documentElement.className = "";
-      }
-
-      function makeSpan() {
-        var s = document.createElementNS("http://www.w3.org/1999/xhtml",
-                                         "span");
-        s.appendChild(document.createTextNode("&#xA0;test"));
-        return s;
-      }      
-    </script>
-  </body>
-</html>
diff --git a/layout/reftests/bugs/403962-1xbl.xml b/layout/reftests/bugs/403962-1xbl.xml
deleted file mode 100644
--- a/layout/reftests/bugs/403962-1xbl.xml
+++ /dev/null
@@ -1,22 +0,0 @@
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="test">
-    <content>
-      <html:div xmlns:html="http://www.w3.org/1999/xhtml"
-                style="color: red; -moz-binding: url(403962-1xbl.xml#test-base)">
-        <children/>
-      </html:div>
-    </content>
-  </binding>
-
-  <binding id="test-base">
-    <content>
-      <html:div xmlns:html="http://www.w3.org/1999/xhtml" style="color: green">
-        <children includes="span"/>
-      </html:div>
-      <html:div xmlns:html="http://www.w3.org/1999/xhtml" style="color: red">
-        <children/>
-      </html:div>
-
-    </content>
-  </binding>
-</bindings>
diff --git a/layout/reftests/bugs/405186-1.xhtml b/layout/reftests/bugs/405186-1.xhtml
deleted file mode 100644
--- a/layout/reftests/bugs/405186-1.xhtml
+++ /dev/null
@@ -1,37 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="foo">
-    <content>
-      <div xmlns="http://www.w3.org/1999/xhtml" style="position: fixed;">
-        <children xmlns="http://www.mozilla.org/xbl"/>
-      </div>
-    </content>
-  </binding>
-</bindings>
-
-<script type="text/javascript">
-
-function boom()
-{
-  var tr = document.getElementById("tr");
-  var td = document.getElementById("td");
-  
-  tr.removeChild(td);
-}
-
-</script>
-</head>
-
-<body onload="boom();">
-
-<table id="table" style="-moz-binding: url(#foo);">
-  <tr id="tr">
-    <td id="td">Text</td>
-  </tr>
-</table>
-
-</body>
-
-</html>
diff --git a/layout/reftests/bugs/420790-1-ref.xhtml b/layout/reftests/bugs/420790-1-ref.xhtml
deleted file mode 100644
--- a/layout/reftests/bugs/420790-1-ref.xhtml
+++ /dev/null
@@ -1,7 +0,0 @@
-ï»¿<html xmlns="http://www.w3.org/1999/xhtml">
-
-<head></head>
-
-<body><caption id="cap">ABC DEF</caption></body>
-
-</html>
diff --git a/layout/reftests/bugs/420790-1.xhtml b/layout/reftests/bugs/420790-1.xhtml
deleted file mode 100644
--- a/layout/reftests/bugs/420790-1.xhtml
+++ /dev/null
@@ -1,26 +0,0 @@
-ï»¿<html xmlns="http://www.w3.org/1999/xhtml">
-
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl" xmlns:html="http://www.w3.org/1999/xhtml">
-  <binding id="foo">
-    <content><html:span>ABC DEF<children xmlns="http://www.mozilla.org/xbl"/></html:span></content>
-  </binding>
-</bindings>
-
-<script type="text/javascript">
-
-function boom()
-{
-  var cap = document.getElementById("cap");
-  var space = document.createTextNode(" ");
-  cap.insertBefore(space, cap.firstChild);
-}
-
-</script>
-
-</head>
-
-<body onload="boom();">&#x202D;<caption id="cap" style="-moz-binding: url('#foo');"><span style="display: none;"/></caption></body>
-
-</html>
diff --git a/layout/reftests/bugs/468546-1-ref.xhtml b/layout/reftests/bugs/468546-1-ref.xhtml
deleted file mode 100644
--- a/layout/reftests/bugs/468546-1-ref.xhtml
+++ /dev/null
@@ -1,12 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-<style type="text/css">
-[class='anon'] { float: left; }
-[class='anon']:first-line { word-spacing: 30ch; }
-body { width: 30ch; }
-</style>
-</head>
-
-<body><div class="anon"><span>A B</span>jk</div></body>
-
-</html>
diff --git a/layout/reftests/bugs/468546-1.xhtml b/layout/reftests/bugs/468546-1.xhtml
deleted file mode 100644
--- a/layout/reftests/bugs/468546-1.xhtml
+++ /dev/null
@@ -1,25 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-<style type="text/css">
-
-[class='anon'], #v { float: left; }
-[class='anon']:first-line { word-spacing: 30ch; }
-body { width: 30ch; }
-
-</style>
-
-<bindings xmlns="http://www.mozilla.org/xbl"><binding id="foo"><content><div class="anon"><span>A B</span><children xmlns="http://www.mozilla.org/xbl"/></div></content></binding></bindings>
-
-<script type="text/javascript">
-
-function boom()
-{
-  document.body.insertBefore(document.createTextNode("jk"), document.body.firstChild);
-}
-
-</script>
-</head>
-
-<body onload="boom();" style="-moz-binding: url(#foo)"><div id="v"></div></body>
-
-</html>
diff --git a/layout/reftests/bugs/471594-1-ref.html b/layout/reftests/bugs/471594-1-ref.html
deleted file mode 100644
--- a/layout/reftests/bugs/471594-1-ref.html
+++ /dev/null
@@ -1,5 +0,0 @@
-<!DOCTYPE HTML>
-<html>
-<body style="white-space:pre;">a
-bs</body>
-</html>
diff --git a/layout/reftests/bugs/471594-1.xhtml b/layout/reftests/bugs/471594-1.xhtml
deleted file mode 100644
--- a/layout/reftests/bugs/471594-1.xhtml
+++ /dev/null
@@ -1,26 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="x"><content><span>a
-b<children xmlns="http://www.mozilla.org/xbl"/></span></content></binding>
-</bindings>
-<style>
-  div#d {
-    white-space: pre;
-    -moz-binding: url(#x);
-  }
-  span#s {
-    display: inline-block;
-  }
-</style>
-<script>
-function boom()
-{
-  document.getElementById("s").style.display = "inline";
-}
-</script>
-</head>
-<body onload="boom();">
-  <div id="d"><span id="s">s</span></div>
-</body>
-</html>
diff --git a/layout/reftests/bugs/472020-1-ref.xul b/layout/reftests/bugs/472020-1-ref.xul
deleted file mode 100644
--- a/layout/reftests/bugs/472020-1-ref.xul
+++ /dev/null
@@ -1,22 +0,0 @@
-<?xml version="1.0"?>
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-
-<style xmlns="http://www.w3.org/1999/xhtml"><![CDATA[
-  outer {
-    -moz-binding: url(472020-xbl.xml#outer);
-    border: 2px solid yellow;
-  }
-  inner {
-    -moz-binding: url(472020-xbl.xml#inner);
-  }
-  box {
-    width: 50px;
-    border: 2px solid green;
-  }
-]]></style>
-
-  <outer>
-    <box/>
-    <box/>
-  </outer>
-</window>
diff --git a/layout/reftests/bugs/472020-1a.xul b/layout/reftests/bugs/472020-1a.xul
deleted file mode 100644
--- a/layout/reftests/bugs/472020-1a.xul
+++ /dev/null
@@ -1,22 +0,0 @@
-<?xml version="1.0"?>
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-	onload="document.getElementById('o').appendChild(document.createXULElement('box'));">
-
-<style xmlns="http://www.w3.org/1999/xhtml"><![CDATA[
-  outer {
-    -moz-binding: url(472020-xbl.xml#outer);
-    border: 2px solid yellow;
-  }
-  inner {
-    -moz-binding: url(472020-xbl.xml#inner);
-  }
-  box {
-    width: 50px;
-    border: 2px solid green;
-  }
-]]></style>
-
-  <outer id="o">
-    <box/>
-  </outer>
-</window>
diff --git a/layout/reftests/bugs/472020-1b.xul b/layout/reftests/bugs/472020-1b.xul
deleted file mode 100644
--- a/layout/reftests/bugs/472020-1b.xul
+++ /dev/null
@@ -1,22 +0,0 @@
-<?xml version="1.0"?>
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-	onload="var p = document.getElementById('o'); p.insertBefore(document.createXULElement('box'), p.firstChild);">
-
-<style xmlns="http://www.w3.org/1999/xhtml"><![CDATA[
-  outer {
-    -moz-binding: url(472020-xbl.xml#outer);
-    border: 2px solid yellow;
-  }
-  inner {
-    -moz-binding: url(472020-xbl.xml#inner);
-  }
-  box {
-    width: 50px;
-    border: 2px solid green;
-  }
-]]></style>
-
-  <outer id="o">
-    <box/>
-  </outer>
-</window>
diff --git a/layout/reftests/bugs/472020-2-ref.xul b/layout/reftests/bugs/472020-2-ref.xul
deleted file mode 100644
--- a/layout/reftests/bugs/472020-2-ref.xul
+++ /dev/null
@@ -1,21 +0,0 @@
-<?xml version="1.0"?>
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-
-<style xmlns="http://www.w3.org/1999/xhtml"><![CDATA[
-  outer {
-    -moz-binding: url(472020-xbl.xml#outer);
-    border: 2px solid yellow;
-  }
-  inner {
-    -moz-binding: url(472020-xbl.xml#inner);
-  }
-  box {
-    width: 50px;
-    border: 2px solid green;
-  }
-]]></style>
-
-  <outer>
-    <box/>
-  </outer>
-</window>
diff --git a/layout/reftests/bugs/472020-2.xul b/layout/reftests/bugs/472020-2.xul
deleted file mode 100644
--- a/layout/reftests/bugs/472020-2.xul
+++ /dev/null
@@ -1,21 +0,0 @@
-<?xml version="1.0"?>
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-	onload="document.getElementById('o').appendChild(document.createXULElement('box'));">
-
-<style xmlns="http://www.w3.org/1999/xhtml"><![CDATA[
-  outer {
-    -moz-binding: url(472020-xbl.xml#outer);
-    border: 2px solid yellow;
-  }
-  inner {
-    -moz-binding: url(472020-xbl.xml#inner);
-  }
-  box {
-    width: 50px;
-    border: 2px solid green;
-  }
-]]></style>
-
-  <outer id="o">
-  </outer>
-</window>
diff --git a/layout/reftests/bugs/472020-xbl.xml b/layout/reftests/bugs/472020-xbl.xml
deleted file mode 100644
--- a/layout/reftests/bugs/472020-xbl.xml
+++ /dev/null
@@ -1,21 +0,0 @@
-<?xml version="1.0"?>
-<bindings xmlns="http://www.mozilla.org/xbl"
-          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-
-  <binding id="outer">
-    <content>
-      <xul:inner>
-	<xul:label value="Before"/>
-        <children/>
-        <xul:label value="After"/>
-      </xul:inner>
-    </content>
-  </binding>
-
-  <binding id="inner">
-    <content>
-      <children/>
-    </content>
-  </binding>
-
-</bindings>
diff --git a/layout/reftests/bugs/482592-1a.xhtml b/layout/reftests/bugs/482592-1a.xhtml
deleted file mode 100644
--- a/layout/reftests/bugs/482592-1a.xhtml
+++ /dev/null
@@ -1,27 +0,0 @@
-<!DOCTYPE html>
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-  <head>
-    <bindings xmlns="http://www.mozilla.org/xbl">
-      <binding id="a">
-        <content>
-          <html:span xmlns:html="http://www.w3.org/1999/xhtml"
-                     id="hasAfter"><children/></html:span>
-        </content>
-      </binding>
-    </bindings>
-    <style>
-      #hasAfter::after { content: "y"; }
-      #l { display: none; } 
-    </style>
-    <script>
-      function doTest() {
-        var l = document.getElementById("l");
-        l.parentNode.insertBefore(document.createTextNode("x"), l);
-        document.documentElement.removeAttribute("class");
-      }
-    </script>
-  </head>
-  <body onload="doTest()">
-    <div style="-moz-binding: url(#a); font-size: 300%;"><span id="l"></span></div>
-  </body>
-</html>
diff --git a/layout/reftests/bugs/482592-1b.xhtml b/layout/reftests/bugs/482592-1b.xhtml
deleted file mode 100644
--- a/layout/reftests/bugs/482592-1b.xhtml
+++ /dev/null
@@ -1,26 +0,0 @@
-<!DOCTYPE html>
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-  <head>
-    <bindings xmlns="http://www.mozilla.org/xbl">
-      <binding id="a">
-        <content>
-          <html:span xmlns:html="http://www.w3.org/1999/xhtml"
-                     id="hasBefore"><children/></html:span>
-        </content>
-      </binding>
-    </bindings>
-    <style>
-      #hasBefore::before { content: "x"; }
-    </style>
-    <script>
-      function doTest() {
-        var l = document.getElementById("l");
-        l.parentNode.insertBefore(document.createTextNode("y"), l);
-        document.documentElement.removeAttribute("class");
-      }
-    </script>
-  </head>
-  <body onload="doTest()">
-    <div style="-moz-binding: url(#a); font-size: 300%;"><span id="l"></span></div>
-  </body>
-</html>
diff --git a/layout/reftests/bugs/495354-1-ref.xhtml b/layout/reftests/bugs/495354-1-ref.xhtml
deleted file mode 100644
--- a/layout/reftests/bugs/495354-1-ref.xhtml
+++ /dev/null
@@ -1,5 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<body>
-<span><caption xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">9</caption></span>
-</body>
-</html>
diff --git a/layout/reftests/bugs/495354-1a.xhtml b/layout/reftests/bugs/495354-1a.xhtml
deleted file mode 100644
--- a/layout/reftests/bugs/495354-1a.xhtml
+++ /dev/null
@@ -1,8 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-<bindings xmlns="http://www.mozilla.org/xbl"><binding id="x"><content><caption xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"><children xmlns="http://www.mozilla.org/xbl"/></caption></content></binding></bindings>
-</head>
-<body onload="document.getElementById('y').innerHTML = '9';">
-<span id="y" style="-moz-binding: url(#x)"><div>123</div></span>
-</body>
-</html>
diff --git a/layout/reftests/bugs/495354-1b.xhtml b/layout/reftests/bugs/495354-1b.xhtml
deleted file mode 100644
--- a/layout/reftests/bugs/495354-1b.xhtml
+++ /dev/null
@@ -1,8 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-<bindings xmlns="http://www.mozilla.org/xbl"><binding id="x"><content><caption xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"><children xmlns="http://www.mozilla.org/xbl"/></caption></content></binding></bindings>
-</head>
-<body onload="document.getElementById('y').innerHTML = '9';">
-<span id="y" style="-moz-binding: url(#x)"><div style="border: 5px solid green">123</div></span>
-</body>
-</html>
diff --git a/layout/reftests/bugs/508816-1-ref.xul b/layout/reftests/bugs/508816-1-ref.xul
deleted file mode 100644
--- a/layout/reftests/bugs/508816-1-ref.xul
+++ /dev/null
@@ -1,40 +0,0 @@
-<?xml version="1.0"?>
-<!DOCTYPE window>
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" title="RTL overflow test" width="640px" height="480px" style="direction: rtl" onload="load()" class="reftest-wait">
-
-<style type="text/css" xmlns="http://www.w3.org/1999/xhtml"><![CDATA[
-button {
-  margin: 0;
-}
-]]></style>
-
-<hbox style="max-width: 200px; border: 1px solid red;">
-<scrollbox align="start" pack="start" orient="horizontal" flex="1">
-  <button id="sb1" label="test1"/><button label="test2"/><button label="test3"/><button label="test4"/><button label="test5"/>
-</scrollbox>
-</hbox>
-
-<hbox style="max-width: 200px; border: 1px solid blue">
-<arrowscrollbox align="start" pack="start" orient="horizontal" flex="1">
-  <button id="asb1" label="test1"/><button label="test2"/><button label="test3"/><button label="test4"/><button label="test5"/>
-</arrowscrollbox>
-</hbox>
-
-<hbox style="max-width: 200px; border: 1px solid black">
-<hbox align="end" pack="end" flex="1">
-  <button label="test1"/><button label="test2"/><button label="test3"/><button label="test4"/><button label="test5"/>
-</hbox>
-</hbox>
-
-<script type="text/javascript">
-  <![CDATA[
-    function load() {
-      document.getElementById("sb1").scrollIntoView({ behavior: "instant" });
-      document.getElementById("asb1").scrollIntoView({ behavior: "instant" });
-
-      document.documentElement.removeAttribute("class");
-    }
-  ]]>
-</script>
-
-</window>
diff --git a/layout/reftests/bugs/508816-1.xul b/layout/reftests/bugs/508816-1.xul
deleted file mode 100644
--- a/layout/reftests/bugs/508816-1.xul
+++ /dev/null
@@ -1,29 +0,0 @@
-<?xml version="1.0"?>
-<!DOCTYPE window>
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" title="RTL overflow test" width="640px" height="480px" style="direction: rtl">
-
-<style type="text/css" xmlns="http://www.w3.org/1999/xhtml"><![CDATA[
-button {
-  margin: 0;
-}
-]]></style>
-
-<hbox style="max-width: 200px; border: 1px solid red;">
-<scrollbox align="start" pack="start" orient="horizontal" flex="1">
-  <button label="test1"/><button label="test2"/><button label="test3"/><button label="test4"/><button label="test5"/>
-</scrollbox>
-</hbox>
-
-<hbox style="max-width: 200px; border: 1px solid blue">
-<arrowscrollbox align="start" pack="start" orient="horizontal" flex="1">
-  <button label="test1"/><button label="test2"/><button label="test3"/><button label="test4"/><button label="test5"/>
-</arrowscrollbox>
-</hbox>
-
-<hbox style="max-width: 200px; border: 1px solid black">
-<hbox align="end" pack="end" flex="1">
-  <button label="test1"/><button label="test2"/><button label="test3"/><button label="test4"/><button label="test5"/>
-</hbox>
-</hbox>
-
-</window>
diff --git a/layout/reftests/bugs/reftest.list b/layout/reftests/bugs/reftest.list
--- a/layout/reftests/bugs/reftest.list
+++ b/layout/reftests/bugs/reftest.list
@@ -221,17 +221,16 @@ fuzzy-if(skiaContent,0-1,0-5) == 212563-
 == 218473-1.html 218473-1-ref.html
 fuzzy-if(skiaContent,0-1,0-4) fuzzy-if(webrender&&isDebugBuild,0-1,0-8) == 220165-1.svg 220165-1-ref.svg
 == 223809-1.html 223809-1-ref.html
 == 228856-1.html 228856-1-ref.html
 == 228856-2.html 228856-2-ref.html
 == 229591-1.html 229591-1-ref.html
 # == 231823-1.html 231823-1-ref.html
 == 232990-1a.xhtml 232990-1-ref.xhtml
-skip-if(!xbl) == 232990-1b.xhtml 232990-1-ref.xhtml
 == 233094-1.html 233094-1-ref.html
 == 233094-2a.html 233094-2-ref.html
 == 233094-2b.html 233094-2-ref.html
 == 233094-2c.html 233094-2-ref.html
 == 234686-1.html 234686-ref.html
 == 234686-2.html 234686-ref.html
 == 234686-3.html 234686-ref.html
 == 234686-4.html 234686-ref.html
@@ -347,17 +346,16 @@ fails-if(Android) != 301726-2.html 30172
 == 307076-1.html 307076-1-ref.html
 == 307102-1.html 307102-1-ref.html
 == 307102-2.html 307102-2-ref.html
 == 307102-3.html 307102-3-ref.html
 == 307102-4.html 307102-4-ref.html
 == 308406-1.html 308406-1-ref.html
 == 308406-2.html 308406-2-ref.html
 == 309550-1.html 309550-1-ref.html
-skip-if(!xbl) == chrome://reftest/content/bugs/309914-1.xul chrome://reftest/content/bugs/309914-1-ref.xul
 == 311366-unknown-inline-1.html 311366-unknown-inline-1-ref.html
 == 311366-unknown-block-1.html 311366-unknown-block-1-ref.html
 == 311366-unknown-block-3.html 311366-unknown-block-3-ref.html
 == 311366-unknown-block-2.html 311366-unknown-block-2-ref.html
 == 311366-unknown-inline-2.html 311366-unknown-inline-2-ref.html
 == 311822-1.html 311822-1-ref-a.html
 == 311822-1.html 311822-1-ref-b.html
 == 315620-1a.html 315620-1-ref.html
@@ -449,18 +447,16 @@ random == 328829-1.xhtml 328829-1-ref.xh
 == 332360-ltr.html 332360-ltr-ref.html
 == 332360-width.html 332360-ref.html
 == 332360-width-ltr.html 332360-ltr-ref.html
 == 332557-1.html 332557-1-ref.html
 == 332975-1.html 332975-1-ref.html
 == 333970-1.html 333970-1-ref.html
 == 334829-1a-shadow.xhtml 334829-1-ref.xhtml
 == 334829-1b-shadow.xhtml 334829-1-ref.xhtml
-skip-if(!xbl) == 334829-1a.xhtml 334829-1-ref.xhtml
-skip-if(!xbl) == 334829-1b.xhtml 334829-1-ref.xhtml
 == 335628-1.html 335628-1-ref.html
 == chrome://reftest/content/bugs/336096-1.xul chrome://reftest/content/bugs/336096-1-ref.xul
 == 336147-1.html 336147-1-ref.html
 == 336153-1.html 336153-1-ref.html
 != 338251-p.html about:blank
 == 338251-p-oh.html 338251-p-oh-ref.html
 != 338251-pre.html about:blank
 == 338251-pre-oh.html 338251-pre-oh-ref.html
@@ -571,17 +567,16 @@ fuzzy-if(skiaContent||Android,0-4,0-11) 
 == 364066-1.html 364066-1-ref.html
 == 364079-1.html 364079-1-ref.html
 == 364318-1.xhtml 364318-1-ref.xhtml
 == 364861-1.html 364861-1-ref.html
 == 364862-1.html 364862-1-ref.html
 == chrome://reftest/content/bugs/364968-1.xul 364968-1-ref.html
 == 364989-1.html 364989-1-ref.html
 == 365173-1.html 365173-1-ref.html
-skip-if(!xbl) == chrome://reftest/content/bugs/366207-1.xul chrome://reftest/content/bugs/366207-1-ref.xul
 == chrome://reftest/content/bugs/366616-1.xul chrome://reftest/content/bugs/366616-1-ref.xul
 == 367220-1.html 367220-1-ref.html
 == 367247-s-visible.html 367247-s-hidden.html
 == 367247-s-hidden.html 367247-s-auto.html
 fails-if(Android) != 367247-s-auto.html 367247-s-scroll.html
 != 367247-l-visible.html 367247-l-hidden.html
 fails-if(Android&&!asyncPan) != 367247-l-hidden.html 367247-l-scroll.html
 == 367247-l-scroll.html 367247-l-auto.html
@@ -650,31 +645,29 @@ pref(layout.css.line-height.normal-as-re
 == 371483-1.html about:blank # assertion test
 fails-if(Android&&!asyncPan) == 371561-1.html 371561-1-ref.html
 != 371681-1.xhtml about:blank
 == 371925-1a.html 371925-1-ref.html
 == 371925-1b.html 371925-1-ref.html
 == 372037-1.html 372037-1-ref.html
 == 372062-1.html 372062-1-ref.html
 random-if(/^Windows\x20NT\x206\.1/.test(http.oscpu)) == 372063-1.html 372063-1-ref.html # Bug 1392106
-skip-if(!xbl) == 372323-1.xhtml 372323-1-ref.xhtml
 random-if(/^Windows\x20NT\x206\.1/.test(http.oscpu)) == 372553-1.html 372553-1-ref.html # Bug 1392106
 == 372632-1.html 372632-1-ref.html
 == 372768-1.html 372768-1-ref.html
 fuzzy-if(webrender&&winWidget,83-92,1-2) == 373295-1.html 373295-1-ref.html
 == 373298-1.html 373298-1-ref.html
 random-if(/^Windows\x20NT\x206\.1/.test(http.oscpu)) == 373381-1.html 373381-1-ref.html # Bug 1392106
 fuzzy-if(skiaContent&&!Android,0-2,0-40) == 373381-2.html 373381-2-ref.html
 random-if(d2d) == 373381-3.html 373381-3-ref.html
 == 373381-4.html 373381-4-ref.html
 == 373383-1.html 373383-1-ref.html
 == 373433-1.html 373433-1-ref.html
 == chrome://reftest/content/bugs/374038-1.xul chrome://reftest/content/bugs/374038-1-ref.xul
 == chrome://reftest/content/bugs/374038-2.xul chrome://reftest/content/bugs/374038-2-ref.xul
-random-if(d2d) skip-if(!xbl) == chrome://reftest/content/bugs/374719-1.xul chrome://reftest/content/bugs/374719-1-ref.xul
 fails == 374927-1.html 374927-1-ref.html # Was broken by patch for bug 368600; fails until bug 400776 is fixed
 == 375508-1.html 375508-1-ref.html
 == 375716-1.html 375716-1-ref.html
 == 375827-1.html 375827-1-ref.html
 == 376375-1.html 376375-1-ref.html
 == 376484-1.html 376484-1-ref.html
 == 376532-1.html 376532-1-ref.html
 fails-if(Android) != 376532-2.html 376532-2-ref.html
@@ -744,19 +737,16 @@ fuzzy-if(skiaContent,0-2,0-3) == 385870-
 == 386014-1c.html 386014-1-ref.html
 == 386065-1.html 386065-1-ref.html
 == 386065-2.html about:blank
 == 386147-1.html 386147-1-ref.html
 == 386310-1a.html 386310-1-ref.html
 == 386310-1b-shadow.html 386310-1-ref.html
 == 386310-1c-shadow.html 386310-1-ref.html
 == 386310-1d-shadow.html 386310-1-ref.html
-skip-if(!xbl) == 386310-1b.html 386310-1-ref.html
-skip-if(!xbl) == 386310-1c.html 386310-1-ref.html
-skip-if(!xbl) == 386310-1d.html 386310-1-ref.html
 == 386401-1.html 386401-1-ref.html
 == 386401-2.html 386401-2-ref.html
 == 386401-3.html 386401-3-ref.html
 == 386470-1a.html 386470-1-ref.html
 == 386470-1b.html 386470-1-ref.html
 == 386470-1c.html 386470-1-ref.html
 random-if(/^Windows\x20NT\x206\.1/.test(http.oscpu)) == 386920-1.html 386920-1-ref.html # Bug 1392106
 == 387201-1.html 387201-1-ref.html
@@ -803,27 +793,24 @@ fuzzy-if(skiaContent,0-1,0-600) == 39364
 == 393655-3.html 393655-3-ref.html
 == 393655-4.html 393655-4-ref.html
 == 393655-5.html 393655-5-ref.html
 == 393671-1.html 393671-1-ref.html
 == 393671-2.html 393671-2-ref.html
 == 393671-3.html 393671-3-ref.html
 == 394111-1.html about:blank  # Really an assertion test rather than a rendering test
 == 394534-1.html 394534-1-ref.html
-skip-if(!xbl) == 394676-1.xhtml 394676-1-ref.xhtml
 == 395107-1.html 395107-1-ref.html
 fuzzy-if(Android,0-4,0-2) == 395107-2.html 395107-2-ref.html # bug 1309533 fuzzy after test rebucketed
 fuzzy-if(skiaContent,0-1,0-118) fuzzy-if(geckoview,0-4,0-2) == 395107-3.html 395107-3-ref.html
 == 395107-4.html 395107-4-ref.html
 fuzzy-if(geckoview,0-4,0-1) == 395107-5.html 395107-5-ref.html
 == 395130-1.html 395130-1-ref.html
 == 395130-2.html 395130-2-ref.html
-skip-if(!xbl) == 395331-1.xml 395331-1-ref.xml
 == 395390-1.html 395390-1-ref.html
-skip-if(!xbl) == 396286-1.html about:blank  # crash test
 fuzzy-if(Android,0-5,0-283) == 397428-1.html 397428-1-ref.html
 == 397844-1.xhtml 397844-1-ref.xhtml
 == 398092-1.html 398092-1-ref.html
 == 398101-1.html 398101-1-ref.html
 == 398144-1.html 398144-1-ref.html
 fuzzy-if(skiaContent,0-2,0-21) == 398682-1.html 398682-1-ref.html
 == 398797-1a.html 398797-1-ref.html
 == 398797-1b.html 398797-1-ref.html
@@ -882,17 +869,16 @@ fuzzy-if(webrender,130-131,177-177) skip
 == 403519-2.html 403519-2-ref.html
 == 403656-1.html 403656-1-ref.html
 == 403656-2.html 403656-2-ref.html
 == 403656-3.html 403656-3-ref.html
 == 403656-4.html 403656-4-ref.html
 == 403656-5.html 403656-5-ref.html
 #== 403657-1.html 403657-1-ref.html  # Fails depending on the fonts...
 == 403733-1.html 403733-1-ref.html
-skip-if(!xbl) == 403962-1.xhtml 403962-1-ref.xhtml
 == 404030-1.html 404030-1-ref.html
 != 404030-1-notref.html 404030-1.html
 != 404030-1-notref2.html 404030-1.html
 fuzzy-if(skiaContent,0-2,0-4) == 404123-1.html 404123-1-ref.html
 == 404123-2.html 404123-2-ref.html
 != 404123-3.html 404123-3-ref.html
 # may fail "randomly" on OS X, doesn't seem to be rendering usefully anyhow - bug 602469
 random-if(cocoaWidget) == chrome://reftest/content/bugs/404149-1.xul chrome://reftest/content/bugs/404149-1-ref.xul # HTTP for fonts directory access
@@ -900,17 +886,16 @@ random-if(cocoaWidget) == chrome://refte
 == 404301-1.html 404301-1-ref.html
 == 404309-1a.html 404309-1-ref.html
 == 404309-1b.html 404309-1-ref.html
 # Disabled due to compartments for now.
 #!= data:application/xml,<foo/> data:text/plain, # ensure we pretty-print this XML instead of letting it appear blank (test for bug 404419)
 fuzzy-if(Android,0-8,0-50) == 404553-1.html 404553-1-ref.html  # assertion test, also tests that marquee binding is applied correctly
 == 404666-1.html 404666-1-ref.html
 == 404666-2.html 404666-2-ref.html
-skip-if(!xbl) == 405186-1.xhtml about:blank
 == 405305-1.html 405305-1-ref.html
 == 405380-1.html 405380-1-ref.html
 == 405517-1.xhtml 405517-1-ref.xhtml
 == 405577-1.html 405577-1-ref.html
 == 405584-1.html 405584-1-ref.html
 # == 405952-1.html 405952-1-ref.html
 == 406484-1.html 406484-1-ref.html
 == 406568-1.html 406568-1-ref.html
@@ -991,17 +976,16 @@ fuzzy-if(Android,0-11,0-17) fuzzy-if(web
 == 418766-1a.html 418766-1-ref.html
 == 418766-1b.html 418766-1-ref.html
 == 419060.html 419060-ref.html
 == 419285-1.html 419285-1-ref.html
 == 419531-1.html 419531-1-ref.html
 == 420069-1.html 420069-1-ref.html
 == 420069-2.html 420069-2-ref.html
 == 420351-1.html 420351-1-ref.html
-skip-if(!xbl) == 420790-1.xhtml 420790-1-ref.xhtml
 == 421069.html 421069-ref.html
 == 421069.html 421069-ref2.html
 == 421069-ref.html 421069-ref2.html
 == chrome://reftest/content/bugs/421203-1.xul 421203-1-ref.html
 == chrome://reftest/content/bugs/421203-2.xul 421203-1-ref.html
 == chrome://reftest/content/bugs/421203-3.xul chrome://reftest/content/bugs/321402-3-ref.xul
 == chrome://reftest/content/bugs/421203-4.xul chrome://reftest/content/bugs/321402-4-ref.xul
 == chrome://reftest/content/bugs/421203-5.xul chrome://reftest/content/bugs/321402-5-ref.xul
@@ -1237,22 +1221,17 @@ fuzzy-if(webrender,16-16,3392-4020) == c
 == 466258-1.html 466258-1-ref.html
 == 466395-1.html 466395-1-ref.html
 == 466395-2.html 466395-2-ref.html
 == 467084-1.html 467084-1-ref.html
 == 467084-2.html 467084-2-ref.html
 == 467444-1.html 467444-1-ref.html
 == 467460-1.html 467460-1-ref.html
 == chrome://reftest/content/bugs/468473-1.xul chrome://reftest/content/bugs/468473-1-ref.xul
-skip-if(!xbl) == 468546-1.xhtml 468546-1-ref.xhtml
 == 471356-1.html 471356-1-ref.html
-skip-if(!xbl) == 471594-1.xhtml 471594-1-ref.html
-fuzzy(0-255,0-15) skip-if(!xbl) == chrome://reftest/content/bugs/472020-1a.xul chrome://reftest/content/bugs/472020-1-ref.xul
-fails skip-if(!xbl) == chrome://reftest/content/bugs/472020-1b.xul chrome://reftest/content/bugs/472020-1-ref.xul
-fails skip-if(!xbl) == chrome://reftest/content/bugs/472020-2.xul chrome://reftest/content/bugs/472020-2-ref.xul
 == chrome://reftest/content/bugs/472500-1.xul chrome://reftest/content/bugs/472500-1-ref.xul
 == 472769-1a.html 472769-1-ref.html
 == 472769-1b.html 472769-1-ref.html
 == 472769-2.html 472769-2-ref.html
 == 472769-3.html 472769-3-ref.html
 == chrome://reftest/content/bugs/473847-1.xul chrome://reftest/content/bugs/473847-1-ref.xul
 == 474417-1.html 474417-1-ref.html
 fuzzy-if(skiaContent,0-1,0-5) == 474472-1.html 474472-1-ref.html
@@ -1314,18 +1293,16 @@ fails-if(Android) == 481024-1c.html 4810
 == 481024-1d.html 481024-1-ref.html
 == 481024-1e.html 481024-1-ref.html
 != 481948-1.html 481948-1-ref.html
 != 481948-2.html 481948-2-ref.html
 fails-if(Android||gtkWidget) random-if(winWidget||cocoaWidget) == 481948-3.html 481948-3-ref.html # questionable test, see bug 488364
 == 482398-1.html 482398-1-ref.html
 random-if(d2d) == 482592-1a-shadow.xhtml 482592-1-ref.html # bug 586771
 random-if(d2d) == 482592-1b-shadow.xhtml 482592-1-ref.html # bug 586771
-random-if(d2d) skip-if(!xbl) == 482592-1a.xhtml 482592-1-ref.html # bug 586771
-random-if(d2d) skip-if(!xbl) == 482592-1b.xhtml 482592-1-ref.html # bug 586771
 random-if(winWidget) fuzzy-if(skiaContent,0-1,0-5) == 482659-1a.html 482659-1-ref.html
 fuzzy-if(skiaContent,0-1,0-5) == 482659-1b.html 482659-1-ref.html
 fuzzy-if(skiaContent,0-1,0-5) == 482659-1c.html 482659-1-ref.html
 fuzzy-if(skiaContent,0-1,0-5) == 482659-1d.html 482659-1-ref.html
 == chrome://reftest/content/bugs/483565.xul chrome://reftest/content/bugs/483565-ref.xul
 == 484256-1.html 484256-1-ref.html
 == 484256-2.html 484256-1-ref.html
 == 485012-1.html 485012-1-ref.html
@@ -1356,18 +1333,16 @@ pref(browser.display.focus_ring_width,1)
 pref(browser.display.focus_ring_width,1) == 491180-2.html 491180-2-ref.html
 == chrome://reftest/content/bugs/491323-1.xul chrome://reftest/content/bugs/491323-1-ref.xul
 == chrome://reftest/content/bugs/492239-1.xul chrome://reftest/content/bugs/492239-1-ref.xul
 == 492661-1.html 492661-1-ref.html
 == 493968-1.html 493968-1-ref.html
 == 494667-1.html 494667-1-ref.html
 == 494667-2.html 494667-2-ref.html
 == 495274-1.html 495274-1-ref.html
-skip-if(!xbl) == 495354-1a.xhtml 495354-1-ref.xhtml
-skip-if(!xbl) == 495354-1b.xhtml 495354-1-ref.xhtml
 random-if(/^Windows\x20NT\x206\.1/.test(http.oscpu)) == 495385-1a.html 495385-1-ref.html # Bug 1392106
 random-if(/^Windows\x20NT\x206\.1/.test(http.oscpu)) == 495385-1b.html 495385-1-ref.html # Bug 1392106
 random-if(/^Windows\x20NT\x206\.1/.test(http.oscpu)) == 495385-1c.html 495385-1-ref.html # Bug 1392106
 random-if(/^Windows\x20NT\x206\.1/.test(http.oscpu)) == 495385-1d.html 495385-1-ref.html # Bug 1392106
 random-if(/^Windows\x20NT\x206\.1/.test(http.oscpu)) == 495385-1e.html 495385-1-ref.html # Bug 1392106
 random-if(/^Windows\x20NT\x206\.1/.test(http.oscpu)) == 495385-1f.html 495385-1-ref.html # Bug 1392106
 random-if(/^Windows\x20NT\x206\.1/.test(http.oscpu)) == 495385-2a.html 495385-2-ref.html # Bug 1392106
 random-if(/^Windows\x20NT\x206\.1/.test(http.oscpu)) == 495385-2b.html 495385-2-ref.html # Bug 1392106
@@ -1400,17 +1375,16 @@ needs-focus fails == 503531-1.html 50353
 fuzzy-if(Android,0-5,0-2800) == 506481-1.html 506481-1-ref.html
 == 507187-1.html 507187-1-ref.html
 == 507487-1.html 507487-1-ref.html
 == 507487-2.xhtml 507487-2-ref.xhtml
 == 507762-1.html 507762-1-ref.html
 == 507762-2.html 507762-2-ref.html
 == 507762-3.html 507762-1-ref.html
 == 507762-4.html 507762-2-ref.html
-random skip-if(!xbl) == chrome://reftest/content/bugs/508816-1.xul chrome://reftest/content/bugs/508816-1-ref.xul # Bug 1375012. The skip-if(!xbl) should be removed once this is converted to a CE (bug 1566675).
 pref(layout.css.xul-box-display-values.content.enabled,true) == 508816-2.html 508816-2-ref.html
 skip-if(isDebugBuild) == chrome://reftest/content/bugs/508908-1.xul chrome://reftest/content/bugs/508908-1-ref.xul
 == 508919-1.xhtml 508919-1-ref.xhtml
 == 509155-1.xhtml 509155-1-ref.xhtml
 fuzzy-if(Android,0-5,0-1656) fuzzy-if(skiaContent,0-1,0-1200) == 512410.html 512410-ref.html
 == 512631-1.html 512631-1-ref.html
 == 513153-1a.html 513153-1-ref.html
 == 513153-1b.html 513153-1-ref.html
diff --git a/layout/reftests/css-display/display-contents-xbl-2-ref.xul b/layout/reftests/css-display/display-contents-xbl-2-ref.xul
deleted file mode 100644
--- a/layout/reftests/css-display/display-contents-xbl-2-ref.xul
+++ /dev/null
@@ -1,22 +0,0 @@
-<?xml version="1.0"?>
-<?xml-stylesheet href="chrome://global/skin" type="text/css"?>
-
-<window onload="document.documentElement.removeChild(document.getElementById('b'));"
-        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-        xmlns:html="http://www.w3.org/1999/xhtml"
-        xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-        xmlns:xbl="http://www.mozilla.org/xbl"
->
-
-<bindings xmlns="http://www.mozilla.org/xbl" id="b">
-    <binding id="mylistitem"><content><children><x>GREEN AGAIN</x></children></content></binding>
-
-    <binding id="foo">
-        <content id="c" style="color:red"><xul:mylistitem id="i" style="-moz-binding: url(#mylistitem); color:green; border:1px solid; display:contents" ><xbl:children style="color:red;" /></xul:mylistitem></content>
-    </binding>
-</bindings>
-
-<span id="l" style="-moz-binding: url(#foo); color:red"></span>
-<span></span>
-
-</window>
diff --git a/layout/reftests/css-display/display-contents-xbl-2.xul b/layout/reftests/css-display/display-contents-xbl-2.xul
deleted file mode 100644
--- a/layout/reftests/css-display/display-contents-xbl-2.xul
+++ /dev/null
@@ -1,31 +0,0 @@
-<?xml version="1.0"?>
-<?xml-stylesheet href="chrome://global/skin" type="text/css"?>
-
-<window onload="
-            document.documentElement.removeChild(document.getElementById('b'));
-            setTimeout(function(){
-              l = document.getElementById('l');
-              x = document.getElementById('x');
-              l.removeChild(x);
-              document.documentElement.appendChild(document.createElementNS('http://www.w3.org/1999/xhtml', 'span'));
-            }, 0);
-            
-"
-        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-        xmlns:html="http://www.w3.org/1999/xhtml"
-        xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-        xmlns:xbl="http://www.mozilla.org/xbl"
->
-
-<bindings xmlns="http://www.mozilla.org/xbl" id="b">
-    <binding id="mylistitem"><content><children><x>GREEN AGAIN</x></children></content></binding>
-
-    <binding id="foo">
-        <content id="c" style="color:red"><xul:mylistitem id="i" style="-moz-binding: url(#mylistitem); color:green; border:1px solid; display:contents" ><xbl:children style="color:red;" /></xul:mylistitem></content>
-    </binding>
-</bindings>
-
-<span id="l" style="-moz-binding: url(#foo); color:red"><hbox id="x">GREEN</hbox></span>
-
-
-</window>
diff --git a/layout/reftests/css-display/display-contents-xbl-3-ref.xul b/layout/reftests/css-display/display-contents-xbl-3-ref.xul
deleted file mode 100644
--- a/layout/reftests/css-display/display-contents-xbl-3-ref.xul
+++ /dev/null
@@ -1,22 +0,0 @@
-<?xml version="1.0"?>
-<?xml-stylesheet href="chrome://global/skin" type="text/css"?>
-
-<window onload="document.documentElement.removeChild(document.getElementById('b'));"
-        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-        xmlns:html="http://www.w3.org/1999/xhtml"
-        xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-        xmlns:xbl="http://www.mozilla.org/xbl"
->
-
-<bindings xmlns="http://www.mozilla.org/xbl" id="b">
-    <binding id="mylistitem"><content style="color:red"><children style="color:red;"><html:span id="x" style="border:inherit">X</html:span></children></content></binding>
-
-    <binding id="foo">
-        <content id="c" style="color:red;"><xul:mylistitem id="i" style="-moz-binding: url(#mylistitem); color:green; border:solid; display:contents" ><xbl:children style="color:red;"/></xul:mylistitem></content>
-    </binding>
-</bindings>
-
-<b id="l" style="-moz-binding: url(#foo); color:red; "></b>
-
-
-</window>
diff --git a/layout/reftests/css-display/display-contents-xbl-3.xul b/layout/reftests/css-display/display-contents-xbl-3.xul
deleted file mode 100644
--- a/layout/reftests/css-display/display-contents-xbl-3.xul
+++ /dev/null
@@ -1,31 +0,0 @@
-<?xml version="1.0"?>
-<?xml-stylesheet href="chrome://global/skin" type="text/css"?>
-
-<window onload="
-            document.documentElement.removeChild(document.getElementById('b'));
-            setTimeout(function(){
-              x = document.getElementById('x');
-              c = x.parentNode;
-              c.removeChild(x);
-              c.appendChild(x);
-            }, 0);
-            
-"
-        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-        xmlns:html="http://www.w3.org/1999/xhtml"
-        xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-        xmlns:xbl="http://www.mozilla.org/xbl"
->
-
-<bindings xmlns="http://www.mozilla.org/xbl" id="b">
-    <binding id="mylistitem"><content style="color:red"><children style="color:red;"><html:span id="x" style="border:inherit">X</html:span></children></content></binding>
-
-    <binding id="foo">
-        <content id="c" style="color:red;"><xul:mylistitem id="i" style="-moz-binding: url(#mylistitem); color:green; border:solid; display:contents" ><xbl:children style="color:red;"/></xul:mylistitem></content>
-    </binding>
-</bindings>
-
-<b id="l" style="-moz-binding: url(#foo); color:red; "></b>
-
-
-</window>
diff --git a/layout/reftests/css-display/display-contents-xbl-4-ref.xul b/layout/reftests/css-display/display-contents-xbl-4-ref.xul
deleted file mode 100644
--- a/layout/reftests/css-display/display-contents-xbl-4-ref.xul
+++ /dev/null
@@ -1,22 +0,0 @@
-<?xml version="1.0"?>
-<?xml-stylesheet href="chrome://global/skin" type="text/css"?>
-
-<window onload="document.documentElement.removeChild(document.getElementById('b'));"
-        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-        xmlns:html="http://www.w3.org/1999/xhtml"
-        xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-        xmlns:xbl="http://www.mozilla.org/xbl"
->
-
-<bindings xmlns="http://www.mozilla.org/xbl" id="b">
-    <binding id="mylistitem"><content style="color:red">Y<html:z style="color:blue; font-weight:bold; font-size:48px; display:contents">Z<children><html:span id="x">X</html:span></children></html:z></content></binding>
-
-    <binding id="foo">
-        <content id="c" style="color:red"><xul:mylistitem id="i" style="-moz-binding: url(#mylistitem); color:green; border:solid;" ><xbl:children style="color:red"/></xul:mylistitem></content>
-    </binding>
-</bindings>
-
-<span id="l" style="-moz-binding: url(#foo); color:pink"></span>
-
-
-</window>
diff --git a/layout/reftests/css-display/display-contents-xbl-4.xul b/layout/reftests/css-display/display-contents-xbl-4.xul
deleted file mode 100644
--- a/layout/reftests/css-display/display-contents-xbl-4.xul
+++ /dev/null
@@ -1,31 +0,0 @@
-<?xml version="1.0"?>
-<?xml-stylesheet href="chrome://global/skin" type="text/css"?>
-
-<window onload="
-            document.documentElement.removeChild(document.getElementById('b'));
-            setTimeout(function(){
-              x = document.getElementById('x');
-              c = x.parentNode;
-              c.removeChild(x);
-              c.appendChild(x);
-            }, 0);
-            
-"
-        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-        xmlns:html="http://www.w3.org/1999/xhtml"
-        xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-        xmlns:xbl="http://www.mozilla.org/xbl"
->
-
-<bindings xmlns="http://www.mozilla.org/xbl" id="b">
-    <binding id="mylistitem"><content style="color:red">Y<html:z style="color:blue; font-weight:bold; font-size:48px; display:contents">Z<children><html:span id="x">X</html:span></children></html:z></content></binding>
-
-    <binding id="foo">
-        <content id="c" style="color:red"><xul:mylistitem id="i" style="-moz-binding: url(#mylistitem); color:green; border:solid;" ><xbl:children style="color:red"/></xul:mylistitem></content>
-    </binding>
-</bindings>
-
-<span id="l" style="-moz-binding: url(#foo); color:pink"></span>
-
-
-</window>
diff --git a/layout/reftests/css-display/display-contents-xbl-5.xul b/layout/reftests/css-display/display-contents-xbl-5.xul
deleted file mode 100644
--- a/layout/reftests/css-display/display-contents-xbl-5.xul
+++ /dev/null
@@ -1,31 +0,0 @@
-<?xml version="1.0"?>
-<?xml-stylesheet href="chrome://global/skin" type="text/css"?>
-
-<window onload="
-            document.documentElement.removeChild(document.getElementById('b'));
-            setTimeout(function(){
-              x = document.getElementById('x');
-              c = x.parentNode;
-              c.removeChild(x);
-              c.appendChild(x);
-            }, 0);
-            
-"
-        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-        xmlns:html="http://www.w3.org/1999/xhtml"
-        xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-        xmlns:xbl="http://www.mozilla.org/xbl"
->
-
-<bindings xmlns="http://www.mozilla.org/xbl" id="b">
-    <binding id="mylistitem"><content style="color:red"><html:span style="border:solid;color:green;display:contents"><children style="color:red;"><html:span id="x" style="border:inherit">X</html:span></children></html:span></content></binding>
-
-    <binding id="foo">
-        <content id="c" style="color:red;"><xul:mylistitem id="i" style="-moz-binding: url(#mylistitem); color:red; border:dashed; display:contents" ><xbl:children style="color:red;"/></xul:mylistitem></content>
-    </binding>
-</bindings>
-
-<b id="l" style="-moz-binding: url(#foo); color:red; "></b>
-
-
-</window>
diff --git a/layout/reftests/css-display/display-contents-xbl-6-ref.html b/layout/reftests/css-display/display-contents-xbl-6-ref.html
deleted file mode 100644
--- a/layout/reftests/css-display/display-contents-xbl-6-ref.html
+++ /dev/null
@@ -1,14 +0,0 @@
-<!DOCTYPE html>
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/publicdomain/zero/1.0/
--->
-<html>
-<body>
-<div style="color:green">a <b style="color:blue">I</b> c</div>
-<div style="color:blue"><b>L1</b><span style="color:green">2</span></div>
-<div style="color:blue"><b>M1</b><span style="color:green">2</span></div>
-<span style="color:blue"><b>Q1</b><span style="color:green">2</span></span>
-<span style="color:blue"><b>R1</b><span style="color:green">2</span></span>
-</body>
-</html>
diff --git a/layout/reftests/css-display/display-contents-xbl-6.xhtml b/layout/reftests/css-display/display-contents-xbl-6.xhtml
deleted file mode 100644
--- a/layout/reftests/css-display/display-contents-xbl-6.xhtml
+++ /dev/null
@@ -1,70 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/publicdomain/zero/1.0/
--->
-<head>
-  <title>CSS Test: CSS display:contents in XBL</title>
-  <link rel="author" title="William Chen" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1040291"/>
-  <link rel="author" title="Mats Palmgren" href="https://bugzilla.mozilla.org/show_bug.cgi?id=907396"/>
-  <link rel="help" href="http://dev.w3.org/csswg/css-display"/>
-
-<style>
-.c { display:contents; }
-</style>
-<bindings xmlns="http://www.mozilla.org/xbl"
-          xmlns:xhtml="http://www.w3.org/1999/xhtml">
-  <binding id="a">
-    <content>
-      <style xmlns="http://www.w3.org/1999/xhtml">
-        .a {
-          display: contents;
-          color: blue;
-        }
-      </style>
-      <xhtml:span>a</xhtml:span>
-      <xhtml:span class="a">
-        <children></children>
-      </xhtml:span>
-      <xhtml:span>c</xhtml:span>
-    </content>
-  </binding>
-
-  <binding id="g">
-    <content>
-      <style xmlns="http://www.w3.org/1999/xhtml">
-        .a {
-          display: contents;
-          color: blue;
-        }
-      </style>
-      <xhtml:span class="a"><children includes="b"></children></xhtml:span>
-      <xhtml:span class="a" style="color:green"><children includes="c"></children></xhtml:span>
-    </content>
-  </binding>
-</bindings>
-</head>
-<body>
-<div id="hostI" style="color:green"><b style="display:contents">I</b></div>
-<div id="hostL" style="color:red"><c>2</c><b style="display:contents">L1</b></div>
-<div id="hostM" style="-moz-binding:url(#g); color:red"><c>2</c><b style="display:contents">M1</b></div>
-<div id="hostQ" class="c" style="color:red"><c>2</c><b style="display:contents">Q1</b></div>
-<div id="hostR" class="c" style="-moz-binding:url(#g); color:red"><c>2</c><b style="display:contents">R1</b></div>
-
-<script>
-
-function tweak() {
-  document.body.offsetHeight;
-
-  hostI.style.MozBinding='url(#a)';
-  hostL.style.MozBinding='url(#g)';
-  hostQ.style.MozBinding='url(#g)';
-
-  document.body.offsetHeight;
-  document.documentElement.removeAttribute("class");
-}
-
-window.addEventListener("MozReftestInvalidate", tweak);
-</script>
-</body>
-</html>
diff --git a/layout/reftests/css-display/display-contents-xbl-7-ref.html b/layout/reftests/css-display/display-contents-xbl-7-ref.html
deleted file mode 100644
--- a/layout/reftests/css-display/display-contents-xbl-7-ref.html
+++ /dev/null
@@ -1,13 +0,0 @@
-<!DOCTYPE html>
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/publicdomain/zero/1.0/
--->
-<html>
-<body>
-<div style="color:blue">a <span>b</span> c</div>
-<div style="color:blue">a <b>K</b> c</div>
-<span style="color:blue">a <b>P</b> c</span>
-<span style="color:blue">a <span>b</span> c</span>
-</body>
-</html>
diff --git a/layout/reftests/css-display/display-contents-xbl-7.xhtml b/layout/reftests/css-display/display-contents-xbl-7.xhtml
deleted file mode 100644
--- a/layout/reftests/css-display/display-contents-xbl-7.xhtml
+++ /dev/null
@@ -1,71 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/publicdomain/zero/1.0/
--->
-<head>
-  <title>CSS Test: CSS display:contents in XBL</title>
-  <link rel="author" title="William Chen" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1040291"/>
-  <link rel="author" title="Mats Palmgren" href="https://bugzilla.mozilla.org/show_bug.cgi?id=907396"/>
-  <link rel="help" href="http://dev.w3.org/csswg/css-display"/>
-
-<style>
-.c { display:contents; }
-</style>
-<bindings xmlns="http://www.mozilla.org/xbl"
-          xmlns:xhtml="http://www.w3.org/1999/xhtml">
-  <binding id="b">
-    <content>
-      <style xmlns="http://www.w3.org/1999/xhtml">
-        .b {
-          display: contents;
-          color: blue;
-        }
-	.b::after {
-          content: 'c';
-        }
-      </style>
-      <xhtml:span class="b">
-        a <children></children>
-      </xhtml:span>
-    </content>
-  </binding>
-</bindings>
-</head>
-<body>
-<div id="host2" style="-moz-binding: url(#b);"></div>
-<div id="hostK" style="-moz-binding:url(#b); color:red"><b>K</b></div>
-<div id="hostP" class="c" style="-moz-binding:url(#b); color:red"><b>P</b></div>
-<div id="hostT" style="-moz-binding: url(#b);"></div>
-
-<script>
-
-function tweak() {
-  document.body.offsetHeight;
-
-  function span(s) {
-    var elm = document.createElement("span");
-    elm.textContent = s;
-    return elm;
-  }
-
-  var elm = span("b");
-  elm.style.display = "contents";
-  elm.style.color = "blue";
-  host2.appendChild(elm);
-
-  hostT.className="c";
-
-  var elm = span("b");
-  elm.style.display = "contents";
-  elm.style.color = "blue";
-  hostT.appendChild(elm);
-
-  document.body.offsetHeight;
-  document.documentElement.removeAttribute("class");
-}
-
-window.addEventListener("MozReftestInvalidate", tweak);
-</script>
-</body>
-</html>
diff --git a/layout/reftests/css-display/display-contents-xbl-ref.html b/layout/reftests/css-display/display-contents-xbl-ref.html
deleted file mode 100644
--- a/layout/reftests/css-display/display-contents-xbl-ref.html
+++ /dev/null
@@ -1,50 +0,0 @@
-<!DOCTYPE html>
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/publicdomain/zero/1.0/
--->
-<html>
-<body>
-<div>a <span style="color:blue">b</span> c</div>
-<div>a <span style="color:blue">b</span> cd</div>
-<div>a <span style="color:blue">b</span> c</div>
-<div>a <span style="color:blue">b</span> c</div>
-<div><b>One</b><i>Two</i></div>
-<div><b>One</b><i>Two</i></div>
-<div><b>One</b><i>Two</i></div>
-<div><b>Oneb</b><i>Two</i></div>
-<div><b>Oneb</b><i>Two</i></div>
-<div><b>Oneb</b><i>Two</i></div>
-<div><b>One</b><i>Twoi</i></div>
-<div><b>One</b><i>Twoi</i></div>
-<div><b>One</b><i>Twoi</i></div>
-<div><b>bOne</b><i>Two</i></div>
-<div><b>bOne</b><i>Two</i></div>
-<div><b>bOne</b><i>Two</i></div>
-<div><b>One</b><i>iTwo</i></div>
-<div><b>One</b><i>iTwo</i></div>
-<div><b>One</b><i>iTwo</i></div>
-<div style="color:green">a <b style="color:blue">J</b> c</div>
-<span style="color:green">a <b style="color:blue">O</b> c</span>
-<span>a <span style="color:blue">b</span> c</span>
-<span>a <span style="color:blue">b</span> cd</span>
-<span>a <span style="color:blue">b</span> c</span>
-<span>a <span style="color:blue">b</span> c</span>
-<span><b>One</b><i>Two</i></span>
-<span><b>One</b><i>Two</i></span>
-<span><b>One</b><i>Two</i></span>
-<span><b>Oneb</b><i>Two</i></span>
-<span><b>Oneb</b><i>Two</i></span>
-<span><b>Oneb</b><i>Two</i></span>
-<span><b>One</b><i>Twoi</i></span>
-<span><b>One</b><i>Twoi</i></span>
-<span><b>One</b><i>Twoi</i></span>
-<span><b>bOne</b><i>Two</i></span>
-<span><b>bOne</b><i>Two</i></span>
-<span><b>bOne</b><i>Two</i></span>
-<span><b>One</b><i>iTwo</i></span>
-<span><b>One</b><i>iTwo</i></span>
-<span><b>One</b><i>iTwo</i></span>
-<div><b>a <span style="color:blue">One</span> c</b><i>i</i><i>a <span style="color:blue">Two</span> c</i></div>
-</body>
-</html>
diff --git a/layout/reftests/css-display/display-contents-xbl.xhtml b/layout/reftests/css-display/display-contents-xbl.xhtml
deleted file mode 100644
--- a/layout/reftests/css-display/display-contents-xbl.xhtml
+++ /dev/null
@@ -1,232 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/publicdomain/zero/1.0/
--->
-<head>
-  <title>CSS Test: CSS display:contents in XBL</title>
-  <link rel="author" title="William Chen" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1040291"/>
-  <link rel="author" title="Mats Palmgren" href="https://bugzilla.mozilla.org/show_bug.cgi?id=907396"/>
-  <link rel="help" href="http://dev.w3.org/csswg/css-display"/>
-
-<style>
-.c { display:contents; }
-</style>
-<bindings xmlns="http://www.mozilla.org/xbl"
-          xmlns:xhtml="http://www.w3.org/1999/xhtml">
-  <binding id="a">
-    <content>
-      <style xmlns="http://www.w3.org/1999/xhtml">
-        .a {
-          display: contents;
-          color: blue;
-        }
-      </style>
-      <xhtml:span>a</xhtml:span>
-      <xhtml:span class="a">
-        <children></children>
-      </xhtml:span>
-      <xhtml:span>c</xhtml:span>
-    </content>
-  </binding>
-
-  <binding id="c">
-    <content>
-      <xhtml:span>a</xhtml:span>
-      <xhtml:span style="color:blue"> <children></children> </xhtml:span>
-      <xhtml:span>c</xhtml:span>
-    </content>
-  </binding>
-
-  <binding id="d">
-    <content>
-      <style xmlns="http://www.w3.org/1999/xhtml">
-        .d {
-          display: contents;
-          color: blue;
-        }
-        #d1::after { content: "a"; }
-        #d2::before { content: "c"; }
-      </style>
-      <xhtml:span id="d1"></xhtml:span>
-      <xhtml:span class="d">
-        <children></children>
-      </xhtml:span>
-      <xhtml:span id="d2"></xhtml:span>
-    </content>
-  </binding>
-
-  <binding id="e">
-    <content>
-      <style xmlns="http://www.w3.org/1999/xhtml">
-        .e {
-          display: contents;
-          color: blue;
-        }
-	.e::before {
-          content: 'a';
-          color: black;
-        }
-      </style>
-      <xhtml:span class="e">
-        <children></children> <xhtml:span style="color:black">c</xhtml:span>
-      </xhtml:span>
-    </content>
-  </binding>
-
-  <binding id="f">
-    <content><children includes="b"/><children includes="i"/></content>
-  </binding>
-
-  <binding id="g">
-    <content>
-      <style xmlns="http://www.w3.org/1999/xhtml">
-        .a {
-          display: contents;
-          color: blue;
-        }
-      </style>
-      <xhtml:span class="a"><children includes="b"></children></xhtml:span>
-      <xhtml:span class="a" style="color:green"><children includes="c"></children></xhtml:span>
-    </content>
-  </binding>
-</bindings>
-</head>
-<body>
-<div id="host1" style="-moz-binding: url(#a);"></div>
-<div id="host3" style="-moz-binding: url(#c); display: contents;"></div>d
-<div id="host4" style="-moz-binding: url(#d);"></div>
-<div id="host5" style="-moz-binding: url(#e);"></div>
-<div            style="-moz-binding: url(#f)"><i>Two</i><b>One</b></div>
-<div            style="-moz-binding: url(#f)"><i style="display: contents;">Two</i><b>One</b></div>
-<div            style="-moz-binding: url(#f)"><i>Two</i><b style="display: contents;">One</b></div>
-<div id="host6" style="-moz-binding: url(#f)"><i>Two</i><b>One</b></div>
-<div id="host7" style="-moz-binding: url(#f)"><i style="display: contents;">Two</i><b>One</b></div>
-<div id="host8" style="-moz-binding: url(#f)"><i>Two</i><b style="display: contents;">One</b></div>
-<div id="host9" style="-moz-binding: url(#f)"><i>Two</i><b>One</b></div>
-<div id="hostA" style="-moz-binding: url(#f)"><i style="display: contents;">Two</i><b>One</b></div>
-<div id="hostB" style="-moz-binding: url(#f)"><i>Two</i><b style="display: contents;">One</b></div>
-<div id="hostC" style="-moz-binding: url(#f)"><i>Two</i><b>One</b></div>
-<div id="hostD" style="-moz-binding: url(#f)"><i style="display: contents;">Two</i><b>One</b></div>
-<div id="hostE" style="-moz-binding: url(#f)"><i>Two</i><b style="display: contents;">One</b></div>
-<div id="hostF" style="-moz-binding: url(#f)"><i>Two</i><b>One</b></div>
-<div id="hostG" style="-moz-binding: url(#f)"><i style="display: contents;">Two</i><b>One</b></div>
-<div id="hostH" style="-moz-binding: url(#f)"><i>Two</i><b style="display: contents;">One</b></div>
-<div id="hostJ" style="-moz-binding:url(#a); color:green"><b>J</b></div>
-<div id="hostO" class="c" style="-moz-binding:url(#a); color:green"><b>O</b></div>
-<div id="hostS" style="-moz-binding: url(#a);"></div>
-<div id="hostU" style="-moz-binding: url(#c); display: contents;"></div>d
-<div id="hostV" style="-moz-binding: url(#d);"></div>
-<div id="hostW" style="-moz-binding: url(#e);"></div>
-<div class="c"  style="-moz-binding: url(#f)"><i>Two</i><b>One</b></div>
-<div class="c"  style="-moz-binding: url(#f)"><i style="display: contents;">Two</i><b>One</b></div>
-<div class="c"  style="-moz-binding: url(#f)"><i>Two</i><b style="display: contents;">One</b></div>
-<div id="hostX" style="-moz-binding: url(#f)"><i>Two</i><b>One</b></div>
-<div id="hostY" style="-moz-binding: url(#f)"><i style="display: contents;">Two</i><b>One</b></div>
-<div id="hostZ" style="-moz-binding: url(#f)"><i>Two</i><b style="display: contents;">One</b></div>
-<div id="hosta" style="-moz-binding: url(#f)"><i>Two</i><b>One</b></div>
-<div id="hostb" style="-moz-binding: url(#f)"><i style="display: contents;">Two</i><b>One</b></div>
-<div id="hostc" style="-moz-binding: url(#f)"><i>Two</i><b style="display: contents;">One</b></div>
-<div id="hostd" style="-moz-binding: url(#f)"><i>Two</i><b>One</b></div>
-<div id="hoste" style="-moz-binding: url(#f)"><i style="display: contents;">Two</i><b>One</b></div>
-<div id="hostf" style="-moz-binding: url(#f)"><i>Two</i><b style="display: contents;">One</b></div>
-<div id="hostg" style="-moz-binding: url(#f)"><i>Two</i><b>One</b></div>
-<div id="hosth" style="-moz-binding: url(#f)"><i style="display: contents;">Two</i><b>One</b></div>
-<div id="hosti" style="-moz-binding: url(#f)"><i>Two</i><b style="display: contents;">One</b></div>
-<div id="hostj" style="-moz-binding: url(#f)"><i>Two</i><b style="display: contents;">One</b></div>
-
-<script>
-
-function tweak() {
-  document.body.offsetHeight;
-
-  function span(s) {
-    var elm = document.createElement("span");
-    elm.textContent = s;
-    return elm;
-  }
-  function elem(tag) {
-    var elm = document.createElement(tag);
-    elm.textContent = tag;
-    return elm;
-  }
-
-  // Span should be distributed to the xbl:children insertion point between 'a' and 'c'.
-  host1.appendChild(span("b"));
-
-  host3.appendChild(span("b"));
-  host4.appendChild(span("b"));
-  host5.appendChild(span("b"));
-
-  host6.appendChild(elem("b"));
-  host7.appendChild(elem("b"));
-  host8.appendChild(elem("b"));
-
-  host9.appendChild(elem("i"));
-  hostA.appendChild(elem("i"));
-  hostB.appendChild(elem("i"));
-
-  hostC.insertBefore(elem("b"), hostC.firstChild);
-  hostD.insertBefore(elem("b"), hostD.firstChild);
-  hostE.insertBefore(elem("b"), hostE.firstChild);
-
-  hostF.insertBefore(elem("i"), hostF.firstChild);
-  hostG.insertBefore(elem("i"), hostG.firstChild);
-  hostH.insertBefore(elem("i"), hostH.firstChild);
-
-  document.body.offsetHeight;
-  hostO.style.MozBinding='url(#a)';
-
-  hostS.className="c";
-  hostU.className="c";
-  hostV.className="c";
-  hostW.className="c";
-  hostX.className="c";
-  hostY.className="c";
-  hostZ.className="c";
-  hosta.className="c";
-  hostb.className="c";
-  hostc.className="c";
-  hostd.className="c";
-  hoste.className="c";
-  hostf.className="c";
-  hostg.className="c";
-  hosth.className="c";
-  hosti.className="c";
-
-  hostS.appendChild(span("b"));
-
-  hostU.appendChild(span("b"));
-  hostV.appendChild(span("b"));
-  hostW.appendChild(span("b"));
-
-  hostX.appendChild(elem("b"));
-  hostY.appendChild(elem("b"));
-  hostZ.appendChild(elem("b"));
-
-  hosta.appendChild(elem("i"));
-  hostb.appendChild(elem("i"));
-  hostc.appendChild(elem("i"));
-
-  hostd.insertBefore(elem("b"), hostd.firstChild);
-  hoste.insertBefore(elem("b"), hoste.firstChild);
-  hostf.insertBefore(elem("b"), hostf.firstChild);
-
-  hostg.insertBefore(elem("i"), hostg.firstChild);
-  hosth.insertBefore(elem("i"), hosth.firstChild);
-  hosti.insertBefore(elem("i"), hosti.firstChild);
-
-  document.body.offsetHeight;
-  hostj.children[0].style.MozBinding='url(#a)';
-  hostj.children[1].style.MozBinding='url(#a)';
-  document.body.offsetHeight;
-  hostj.insertBefore(elem("i"), hostj.firstChild);
-
-  document.body.offsetHeight;
-  document.documentElement.removeAttribute("class");
-}
-
-window.addEventListener("MozReftestInvalidate", tweak);
-</script>
-</body>
-</html>
diff --git a/layout/reftests/css-display/reftest.list b/layout/reftests/css-display/reftest.list
--- a/layout/reftests/css-display/reftest.list
+++ b/layout/reftests/css-display/reftest.list
@@ -11,23 +11,16 @@ fuzzy-if(Android,0-8,0-604) == display-c
 == display-contents-style-inheritance-1-stylechange.html display-contents-style-inheritance-1-ref.html
 fuzzy-if(winWidget,0-12,0-100) == display-contents-style-inheritance-1-dom-mutations.html display-contents-style-inheritance-1-ref.html
 == display-contents-tables.xhtml display-contents-tables-ref.xhtml
 == display-contents-tables-2.xhtml display-contents-tables-ref.xhtml
 == display-contents-tables-3.xhtml display-contents-tables-3-ref.xhtml
 == display-contents-visibility-hidden.html display-contents-visibility-hidden-ref.html
 == display-contents-visibility-hidden-2.html display-contents-visibility-hidden-ref.html
 == display-contents-495385-2d.html display-contents-495385-2d-ref.html
-fuzzy-if(Android,0-7,0-3935) random-if(/^Windows\x20NT\x206\.1/.test(http.oscpu)) skip-if(!xbl) == display-contents-xbl.xhtml display-contents-xbl-ref.html # bug 1392106
-skip-if(!xbl) == chrome://reftest/content/css-display/display-contents-xbl-2.xul chrome://reftest/content/css-display/display-contents-xbl-2-ref.xul
-skip-if(!xbl) == chrome://reftest/content/css-display/display-contents-xbl-3.xul chrome://reftest/content/css-display/display-contents-xbl-3-ref.xul
-skip == chrome://reftest/content/css-display/display-contents-xbl-4.xul chrome://reftest/content/css-display/display-contents-xbl-4-ref.xul # fails (not just asserts) due to bug 1089223
 asserts(0-1) fuzzy-if(Android,0-8,0-3216) == display-contents-fieldset.html display-contents-fieldset-ref.html # bug 1089223
-skip-if(!xbl) == chrome://reftest/content/css-display/display-contents-xbl-5.xul chrome://reftest/content/css-display/display-contents-xbl-3-ref.xul
-skip-if(!xbl) == display-contents-xbl-6.xhtml display-contents-xbl-6-ref.html
-skip-if(!xbl) == display-contents-xbl-7.xhtml display-contents-xbl-7-ref.html
 == display-contents-list-item-child.html display-contents-list-item-child-ref.html
 == display-contents-dyn-insert-text.html display-contents-dyn-insert-text-ref.html
 == display-contents-writing-mode-1.html display-contents-writing-mode-1-ref.html
 == display-contents-writing-mode-2.html display-contents-writing-mode-2-ref.html
 needs-focus == display-contents-state-change.html display-contents-state-change-ref.html
 == display-flow-root-001.html display-flow-root-001-ref.html
 == display-contents-suppression-dynamic.html display-contents-suppression-dynamic-ref.html
diff --git a/layout/reftests/css-selectors/reftest.list b/layout/reftests/css-selectors/reftest.list
--- a/layout/reftests/css-selectors/reftest.list
+++ b/layout/reftests/css-selectors/reftest.list
@@ -1,8 +1,6 @@
 == state-dependent-in-any.html state-dependent-in-any-ref.html
 == attr-case-insensitive-1.html attr-case-insensitive-1-ref.html
 == sibling-combinators-on-anon-content-1-shadow.xhtml sibling-combinators-on-anon-content-ref.xhtml
 skip == sibling-combinators-on-anon-content-2-shadow.xhtml sibling-combinators-on-anon-content-ref.xhtml # Enable in bug 1587216.
-skip-if(!xbl) == sibling-combinators-on-anon-content-1.xhtml sibling-combinators-on-anon-content-ref.xhtml
-skip-if(!xbl) == sibling-combinators-on-anon-content-2.xhtml sibling-combinators-on-anon-content-ref.xhtml
 == nth-child-1.html nth-child-ref.html
 == nth-child-2.html nth-child-ref.html
diff --git a/layout/reftests/css-selectors/sibling-combinators-on-anon-content-1.xhtml b/layout/reftests/css-selectors/sibling-combinators-on-anon-content-1.xhtml
deleted file mode 100644
--- a/layout/reftests/css-selectors/sibling-combinators-on-anon-content-1.xhtml
+++ /dev/null
@@ -1,22 +0,0 @@
-<!DOCTYPE html>
-<html xmlns="http://www.w3.org/1999/xhtml">
-  <head>
-    <bindings xmlns="http://www.mozilla.org/xbl"
-              xmlns:html="http://www.w3.org/1999/xhtml">
-      <binding id="x">
-        <content>
-          <html:span class="a"></html:span>
-          <html:span class="b">This should be green</html:span>
-          <children/>
-        </content>
-      </binding>
-    </bindings>
-    <style>
-      #foo { -moz-binding: url("#x"); }
-      .a + .b { color: green; }
-    </style>
-  </head>
-  <body>
-    <span id="foo"></span>
-  </body>
-</html>
diff --git a/layout/reftests/css-selectors/sibling-combinators-on-anon-content-2.xhtml b/layout/reftests/css-selectors/sibling-combinators-on-anon-content-2.xhtml
deleted file mode 100644
--- a/layout/reftests/css-selectors/sibling-combinators-on-anon-content-2.xhtml
+++ /dev/null
@@ -1,38 +0,0 @@
-<!DOCTYPE html>
-<html xmlns="http://www.w3.org/1999/xhtml" reftest-wait="">
-  <head>
-    <bindings xmlns="http://www.mozilla.org/xbl"
-              xmlns:html="http://www.w3.org/1999/xhtml">
-      <binding id="x">
-        <content>
-          <html:span class="a">Some text</html:span>
-          <html:span class="b">This should be green</html:span>
-          <children/>
-        </content>
-        <implementation>
-          <method name="nixText">
-            <body>
-              document.getAnonymousNodes(this)[0].textContent = "";
-            </body>
-          </method>
-        </implementation>
-      </binding>
-    </bindings>
-    <style>
-      #foo { -moz-binding: url("#x"); }
-      .a:empty + .b { color: green; }
-    </style>
-  </head>
-  <body>
-    <span id="foo"></span>
-    <script>
-      window.onload = function() {
-        var el = document.getElementById("foo");
-        // Flush its layout
-        el.offsetWidth;
-        el.nixText();
-        document.documentElement.className = "";
-      }
-    </script>
-  </body>
-</html>
diff --git a/layout/reftests/dom/multipleinsertionpoints-appendmultiple.xhtml b/layout/reftests/dom/multipleinsertionpoints-appendmultiple.xhtml
deleted file mode 100644
--- a/layout/reftests/dom/multipleinsertionpoints-appendmultiple.xhtml
+++ /dev/null
@@ -1,44 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl"
-          xmlns:xhtml="http://www.w3.org/1999/xhtml">
-  <binding id="a">
-    <content>
-      <xhtml:div>
-        <children includes="span"/>
-      </xhtml:div>
-      <xhtml:div>
-        <children/>
-      </xhtml:div>
-    </content>
-  </binding>  
-</bindings>
-
-<script>
-function boom()
-{
-  document.body.offsetHeight;
-
-  var parent = document.getElementById("parent");
-
-  var newelt = document.createElement("span");
-  newelt.appendChild(document.createTextNode(2));
-  parent.appendChild(newelt);
-
-  newelt = document.createElement("div");
-  newelt.appendChild(document.createTextNode(5));
-  parent.appendChild(newelt);
-
-  document.body.offsetHeight;
-  document.documentElement.className = "";
-}
-</script>
-
-</head>
-<body onload="boom();">
-<div id="parent" style="-moz-binding: url(#a);">
-  <div>3</div><span>1</span><div>4</div>
-</div>
-</body>
-</html>
diff --git a/layout/reftests/dom/multipleinsertionpoints-appendsingle-1.xhtml b/layout/reftests/dom/multipleinsertionpoints-appendsingle-1.xhtml
deleted file mode 100644
--- a/layout/reftests/dom/multipleinsertionpoints-appendsingle-1.xhtml
+++ /dev/null
@@ -1,40 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl"
-          xmlns:xhtml="http://www.w3.org/1999/xhtml">
-  <binding id="a">
-    <content>
-      <xhtml:div>
-        <children includes="span"/>
-      </xhtml:div>
-      <xhtml:div>
-        <children/>
-      </xhtml:div>
-    </content>
-  </binding>  
-</bindings>
-
-<script>
-function boom()
-{
-  document.body.offsetHeight;
-
-  var parent = document.getElementById("parent");
-
-  var newelt = document.createElement("div");
-  newelt.appendChild(document.createTextNode(5));
-  parent.appendChild(newelt);
-
-  document.body.offsetHeight;
-  document.documentElement.className = "";
-}
-</script>
-
-</head>
-<body onload="boom();">
-<div id="parent" style="-moz-binding: url(#a);">
-  <div>3</div><span>1</span><div>4</div><span>2</span>
-</div>
-</body>
-</html>
diff --git a/layout/reftests/dom/multipleinsertionpoints-appendsingle-2.xhtml b/layout/reftests/dom/multipleinsertionpoints-appendsingle-2.xhtml
deleted file mode 100644
--- a/layout/reftests/dom/multipleinsertionpoints-appendsingle-2.xhtml
+++ /dev/null
@@ -1,40 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl"
-          xmlns:xhtml="http://www.w3.org/1999/xhtml">
-  <binding id="a">
-    <content>
-      <xhtml:div>
-        <children includes="span"/>
-      </xhtml:div>
-      <xhtml:div>
-        <children/>
-      </xhtml:div>
-    </content>
-  </binding>  
-</bindings>
-
-<script>
-function boom()
-{
-  document.body.offsetHeight;
-
-  var parent = document.getElementById("parent");
-
-  var newelt = document.createElement("span");
-  newelt.appendChild(document.createTextNode(2));
-  parent.appendChild(newelt);
-
-  document.body.offsetHeight;
-  document.documentElement.className = "";
-}
-</script>
-
-</head>
-<body onload="boom();">
-<div id="parent" style="-moz-binding: url(#a);">
-  <div>3</div><span>1</span><div>4</div><div>5</div>
-</div>
-</body>
-</html>
diff --git a/layout/reftests/dom/multipleinsertionpoints-insertmultiple.xhtml b/layout/reftests/dom/multipleinsertionpoints-insertmultiple.xhtml
deleted file mode 100644
--- a/layout/reftests/dom/multipleinsertionpoints-insertmultiple.xhtml
+++ /dev/null
@@ -1,49 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl"
-          xmlns:xhtml="http://www.w3.org/1999/xhtml">
-  <binding id="a">
-    <content>
-      <xhtml:div>
-        <children includes="span"/>
-      </xhtml:div>
-      <xhtml:div>
-        <children/>
-      </xhtml:div>
-    </content>
-  </binding>  
-</bindings>
-
-<script>
-function boom()
-{
-  document.body.offsetHeight;
-
-  var lastdiv = document.getElementById("last");
-  var parent = lastdiv.parentNode;
-
-  var newelt = document.createElement("span");
-  newelt.appendChild(document.createTextNode(1));
-  parent.insertBefore(newelt, lastdiv);
-
-  newelt = document.createElement("div");
-  newelt.appendChild(document.createTextNode(4));
-  parent.insertBefore(newelt, lastdiv);
-
-  newelt = document.createElement("span");
-  newelt.appendChild(document.createTextNode(2));
-  parent.insertBefore(newelt, lastdiv);
-
-  document.body.offsetHeight;
-  document.documentElement.className = "";
-}
-</script>
-
-</head>
-<body onload="boom();">
-<div style="-moz-binding: url(#a);">
-  <div>3</div><div id="last">5</div>
-</div>
-</body>
-</html>
diff --git a/layout/reftests/dom/multipleinsertionpoints-insertsingle-1.xhtml b/layout/reftests/dom/multipleinsertionpoints-insertsingle-1.xhtml
deleted file mode 100644
--- a/layout/reftests/dom/multipleinsertionpoints-insertsingle-1.xhtml
+++ /dev/null
@@ -1,41 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl"
-          xmlns:xhtml="http://www.w3.org/1999/xhtml">
-  <binding id="a">
-    <content>
-      <xhtml:div>
-        <children includes="span"/>
-      </xhtml:div>
-      <xhtml:div>
-        <children/>
-      </xhtml:div>
-    </content>
-  </binding>  
-</bindings>
-
-<script>
-function boom()
-{
-  document.body.offsetHeight;
-
-  var lastdiv = document.getElementById("last");
-  var parent = lastdiv.parentNode;
-
-  var newelt = document.createElement("span");
-  newelt.appendChild(document.createTextNode(2));
-  parent.insertBefore(newelt, lastdiv);
-
-  document.body.offsetHeight;
-  document.documentElement.className = "";
-}
-</script>
-
-</head>
-<body onload="boom();">
-<div style="-moz-binding: url(#a);">
-  <div>3</div><span>1</span><div>4</div><div id="last">5</div>
-</div>
-</body>
-</html>
diff --git a/layout/reftests/dom/multipleinsertionpoints-insertsingle-2.xhtml b/layout/reftests/dom/multipleinsertionpoints-insertsingle-2.xhtml
deleted file mode 100644
--- a/layout/reftests/dom/multipleinsertionpoints-insertsingle-2.xhtml
+++ /dev/null
@@ -1,41 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl"
-          xmlns:xhtml="http://www.w3.org/1999/xhtml">
-  <binding id="a">
-    <content>
-      <xhtml:div>
-        <children includes="span"/>
-      </xhtml:div>
-      <xhtml:div>
-        <children/>
-      </xhtml:div>
-    </content>
-  </binding>  
-</bindings>
-
-<script>
-function boom()
-{
-  document.body.offsetHeight;
-
-  var afterelt = document.getElementById("after");
-  var parent = afterelt.parentNode;
-
-  var newelt = document.createElement("div");
-  newelt.appendChild(document.createTextNode(4));
-  parent.insertBefore(newelt, afterelt);
-
-  document.body.offsetHeight;
-  document.documentElement.className = "";
-}
-</script>
-
-</head>
-<body onload="boom();">
-<div style="-moz-binding: url(#a);">
-  <div>3</div><span>1</span><span id="after">2</span><div>5</div>
-</div>
-</body>
-</html>
diff --git a/layout/reftests/dom/multipleinsertionpoints-ref2.xhtml b/layout/reftests/dom/multipleinsertionpoints-ref2.xhtml
deleted file mode 100644
--- a/layout/reftests/dom/multipleinsertionpoints-ref2.xhtml
+++ /dev/null
@@ -1,25 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl"
-          xmlns:xhtml="http://www.w3.org/1999/xhtml">
-  <binding id="a">
-    <content>
-      <xhtml:div>
-        <children includes="span"/>
-      </xhtml:div>
-      <xhtml:div>
-        <children/>
-      </xhtml:div>
-    </content>
-  </binding>  
-</bindings>
-
-</head>
-
-<body>
-<div style="-moz-binding: url(#a);">
-  <div>3</div><span>1</span><div>4</div><span>2</span><div>5</div>
-</div>
-</body>
-</html>
diff --git a/layout/reftests/dom/reftest.list b/layout/reftests/dom/reftest.list
--- a/layout/reftests/dom/reftest.list
+++ b/layout/reftests/dom/reftest.list
@@ -27,35 +27,25 @@
 == insertmultiplemultiple-1.html insertmultiplemultiple-ref.html
 # a range insert and an append
 == insertmultiplemultiple-2.html insertmultiplemultiple-ref.html
 # multiple range inserts and an append
 == insertmultiplemultiple-2.html insertmultiplemultiple-ref.html
 
 # testing bindings that have multiple insertion points
 == multipleinsertionpoints-ref2-shadow.xhtml multipleinsertionpoints-ref.xhtml
-skip-if(!xbl) == multipleinsertionpoints-ref2.xhtml multipleinsertionpoints-ref.xhtml
 # append a single element
 == multipleinsertionpoints-appendsingle-1-shadow.xhtml multipleinsertionpoints-ref.xhtml
 == multipleinsertionpoints-appendsingle-2-shadow.xhtml multipleinsertionpoints-ref.xhtml
-skip-if(!xbl) == multipleinsertionpoints-appendsingle-1.xhtml multipleinsertionpoints-ref.xhtml
-skip-if(!xbl) == multipleinsertionpoints-appendsingle-2.xhtml multipleinsertionpoints-ref.xhtml
 # append several elements
 == multipleinsertionpoints-appendmultiple-shadow.xhtml multipleinsertionpoints-ref.xhtml
-skip-if(!xbl) == multipleinsertionpoints-appendmultiple.xhtml multipleinsertionpoints-ref.xhtml
 # insert a single element
 == multipleinsertionpoints-insertsingle-1-shadow.xhtml multipleinsertionpoints-ref.xhtml
 == multipleinsertionpoints-insertsingle-2-shadow.xhtml multipleinsertionpoints-ref.xhtml
-skip-if(!xbl) == multipleinsertionpoints-insertsingle-1.xhtml multipleinsertionpoints-ref.xhtml
-skip-if(!xbl) == multipleinsertionpoints-insertsingle-2.xhtml multipleinsertionpoints-ref.xhtml
 # insert several elements
 == multipleinsertionpoints-insertmultiple-shadow.xhtml multipleinsertionpoints-ref.xhtml
-skip-if(!xbl) == multipleinsertionpoints-insertmultiple.xhtml multipleinsertionpoints-ref.xhtml
 
 # test appending some nodes whose frame construction should be done lazily
 # followed by appending a node that might not be done lazily
 == multipleappendwithxul.xhtml multipleappendwithxul-ref.xhtml
 == multipleappendwithinput.xhtml multipleappendwithinput-ref.xhtml
 == multipleappendwitheditable.xhtml multipleappendwitheditable-ref.xhtml
 
-skip-if(!xbl) == xbl-children-2.xhtml about:blank
-skip-if(!xbl) == xbl-children-3.xhtml xbl-children-3-ref.html
-skip-if(!xbl) == xbl-children-4.xhtml about:blank
diff --git a/layout/reftests/dom/xbl-children-1-ref.xhtml b/layout/reftests/dom/xbl-children-1-ref.xhtml
deleted file mode 100644
--- a/layout/reftests/dom/xbl-children-1-ref.xhtml
+++ /dev/null
@@ -1,16 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-  <head>
-    <style>
-      #result {
-        color: green;
-        text-decoration: underline;
-        text-transform: lowercase;
-        background: yellow;
-      }
-    </style>
-  </head>
-  <body>
-    <div id="result">text</div>
-  </body>
-</html>
-
diff --git a/layout/reftests/dom/xbl-children-2.xhtml b/layout/reftests/dom/xbl-children-2.xhtml
deleted file mode 100644
--- a/layout/reftests/dom/xbl-children-2.xhtml
+++ /dev/null
@@ -1,31 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml"
-      xmlns:xbl="http://www.mozilla.org/xbl">
-<head>
-  <style>
-    .forced { display: block; }
-    .forced ~ p { display: none; }
-  </style>
-</head>
-<body>
-  <xbl:children>
-    FAIL
-  </xbl:children>
-
-  <xbl:children class="forced">
-    FAIL
-  </xbl:children>
-
-  <xbl:children />
-
-  <p>FAIL</p>
-
-  <script>
-    var third = document.body.children[2];
-    third.appendChild(document.createTextNode("FAIL"));
-
-    var fourth = document.createElementNS("http://www.mozilla.org/xbl", "children");
-    fourth.appendChild(document.createTextNode("FAIL"));
-    document.body.appendChild(fourth);
-  </script>
-</body>
-</html>
diff --git a/layout/reftests/dom/xbl-children-3-ref.html b/layout/reftests/dom/xbl-children-3-ref.html
deleted file mode 100644
--- a/layout/reftests/dom/xbl-children-3-ref.html
+++ /dev/null
@@ -1,20 +0,0 @@
-<!DOCTYPE html>
-<html>
-  <head>
-    <meta charset="UTF-8">
-  </head>
-  <body>
-    <div style="border: dashed green">
-      <span style="color: green">should be green in a green border</span>
-    </div>
-    <div style="border: dashed green">
-      <span style="color: green">should be green in a green border</span>
-    </div>
-    <div><div>Should be uncolored with no border</div></div>
-    <div>true, true</div>
-    <div><span>In a span</span><div>Should be uncolored with no border</div></div>
-    <div>PASS</div>
-    <div><span style="color: green">PASS</span></div>
-    <div>PASS</div>
-  </body>
-</html>
diff --git a/layout/reftests/dom/xbl-children-3.xhtml b/layout/reftests/dom/xbl-children-3.xhtml
deleted file mode 100644
--- a/layout/reftests/dom/xbl-children-3.xhtml
+++ /dev/null
@@ -1,61 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml"
-      xmlns:html="http://www.w3.org/1999/xhtml"
-      xmlns:xbl="http://www.mozilla.org/xbl"
-      xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-      class="reftest-wait">
-<head>
-  <xbl:bindings xmlns="http://www.mozilla.org/xbl">
-    <binding id="base">
-      <content>
-        <html:div style="border: solid red">
-          <children />
-        </html:div>
-      </content>
-      <implementation>
-        <property name="foo" onget="return 42" />
-      </implementation>
-    </binding>
-    <binding id="derived" extends="#base">
-      <content>
-        <html:div style="border: dashed green">
-          <children includes="span" />
-        </html:div>
-      </content>
-    </binding>
-    <binding id="nochildren">
-      <content>
-        PASS
-      </content>
-    </binding>
-  </xbl:bindings>
-</head>
-<body>
-  <!-- Control case: our (only) child matches the children element. -->
-  <div id="first" style="-moz-binding: url(#derived)"><span style="color: green">should be green in a green border</span></div>
-  <!-- Make sure we ignore xul:template and xul:observes elements! -->
-  <div style="-moz-binding: url(#derived)"><xul:template /><xul:observes /><span style="color: green">should be green in a green border</span></div>
-  <!-- Case where our (only) child doesn't match any children elements. -->
-  <div id="second" style="-moz-binding: url(#derived)"><div>Should be uncolored with no border</div></div>
-  <!-- But make sure the binding was still applied! -->
-  <div id="output" />
-  <script>
-    var $ = document.getElementById.bind(document);
-    // Note: Done in an onload handler because binding instantiation is
-    // asynchronous.
-    onload = function() {
-      $('output').textContent =
-        ($('first').foo === 42) + ", " + ($('first').foo === $('second').foo);
-      document.documentElement.removeAttribute('class');
-    }
-  </script>
-  <!-- Case where one of our children matches but the other one doesn't. -->
-  <div id="third" style="-moz-binding: url(#derived)"><span>In a span</span><div>Should be uncolored with no border</div></div>
-
-  <!-- Control case with no <children> in the binding. -->
-  <div style="-moz-binding: url(#nochildren)" />
-  <!-- Case where we have a child but no <children> in the binding. -->
-  <div style="-moz-binding: url(#nochildren)"><span style="color: green">PASS</span></div>
-  <!-- But we must ignore xul:template and xul:observes elements! -->
-  <div style="-moz-binding: url(#nochildren)"><xul:template /><xul:observes /></div>
-</body>
-</html>
diff --git a/layout/reftests/dom/xbl-children-4.xhtml b/layout/reftests/dom/xbl-children-4.xhtml
deleted file mode 100644
--- a/layout/reftests/dom/xbl-children-4.xhtml
+++ /dev/null
@@ -1,29 +0,0 @@
-<!DOCTYPE html>
-<html xmlns="http://www.w3.org/1999/xhtml"
-      xmlns:xbl="http://www.mozilla.org/xbl"
-      class="reftest-wait">
-<head>
-  <meta charset="UTF-8" />
-  <style>
-    children { display:block; }
-  </style>
-</head>
-<body>
-    <xbl:children />
-    <script>
-        onload = function() {
-            /* First, schedule a pending restyle of the whole tree. */
-            var newSheet = document.createElementNS("http://www.w3.org/1999/xhtml", "style");
-            newSheet.appendChild(document.createTextNode("#nosuchelement { }"));
-            document.head.appendChild(newSheet);
-
-            /* Now, append a frame to our children element, causing the pending restyle to descend into it. */
-            var children = document.getElementsByTagName("xbl:children")[0];
-            var span = document.createElementNS("http://www.w3.org/1999/xhtml", "span");
-            span.appendChild(document.createTextNode("FAIL"));
-            children.appendChild(span);
-            document.documentElement.removeAttribute("class");
-        }
-    </script>
-</body>
-</html>
diff --git a/layout/reftests/forms/textarea/reftest.list b/layout/reftests/forms/textarea/reftest.list
--- a/layout/reftests/forms/textarea/reftest.list
+++ b/layout/reftests/forms/textarea/reftest.list
@@ -7,11 +7,10 @@ skip-if(Android) skip-if(winWidget) fuzz
 skip-if(Android) != ltr.html rtl.html
 skip-if(Android) != ltr-scrollbar.html rtl-scrollbar.html
 skip-if(Android) != in-ltr-doc-scrollbar.html in-rtl-doc-scrollbar.html
 skip-if(Android) != ltr.html no-resize.html
 skip-if(Android) != rtl.html no-resize.html # bug 834724
 fuzzy-if(skiaContent,0-1,0-1) == rtl.html rtl-dynamic-attr.html
 fuzzy-if(skiaContent,0-1,0-1) == rtl.html rtl-dynamic-style.html
 == rtl.html in-dynamic-rtl-doc.html
-fuzzy-if(skiaContent,0-1,0-3) skip-if(!xbl) == setvalue-framereconstruction-1.html setvalue-framereconstruction-ref.html
 fuzzy-if(asyncPan&&!layersGPUAccelerated,0-102,0-4168) random-if(/^Windows\x20NT\x206\.1/.test(http.oscpu)) == padding-scrollbar-placement.html padding-scrollbar-placement-ref.html # Bug 1392106
 == various-cols.html various-cols-ref.html
diff --git a/layout/reftests/forms/textarea/setvalue-framereconstruction-1.html b/layout/reftests/forms/textarea/setvalue-framereconstruction-1.html
deleted file mode 100644
--- a/layout/reftests/forms/textarea/setvalue-framereconstruction-1.html
+++ /dev/null
@@ -1,50 +0,0 @@
-<!--
-
-This test is mostly a copy of layout/forms/crashtests/373586-1.xhtml,
-and it makes sure that the value setter works correctly when setting
-the value causes the frame to be reconstructed.
-
--->
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="foo">
-    <content>
-      <children xmlns="http://www.mozilla.org/xbl" />
-    </content>
-  </binding>
-</bindings>
-
-<script>
-function boom()
-{
-  document.getElementById("div").style.MozBinding = "url('#foo')";
-
-  var opt1 = document.getElementById("opt1");
-  opt1.firstChild.remove();
-
-  document.getElementById("textarea").value += " y";
-
-  document.getElementById("div").style.MozBinding = "";
-  document.documentElement.removeAttribute("class")
-}
-
-window.addEventListener("MozReftestInvalidate", boom);
-</script>
-
-</head>
-
-<body>
-
-<div id="div">
-  <textarea rows="3" cols="5" id="textarea">x</textarea>
-</div>
-
-<select style="-moz-appearance:none">
-  <option id="opt1">opt1</option>
-</select>
-
-</body>
-</html>
-
diff --git a/layout/reftests/forms/textarea/setvalue-framereconstruction-ref.html b/layout/reftests/forms/textarea/setvalue-framereconstruction-ref.html
deleted file mode 100644
--- a/layout/reftests/forms/textarea/setvalue-framereconstruction-ref.html
+++ /dev/null
@@ -1,17 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-</head>
-
-<body>
-
-<div id="div">
-  <textarea rows="3" cols="5" id="textarea">x y</textarea>
-</div>
-
-<select style="-moz-appearance:none">
-  <option id="opt1"></option>
-</select>
-
-</body>
-</html>
-
diff --git a/layout/reftests/ib-split/insert-into-split-inline-5.html b/layout/reftests/ib-split/insert-into-split-inline-5.html
deleted file mode 100644
--- a/layout/reftests/ib-split/insert-into-split-inline-5.html
+++ /dev/null
@@ -1,28 +0,0 @@
-<!DOCTYPE html>
-<html>
- <head>
-  <script>
-   function doit() {
-     var newNode = document.createElement("span");
-     newNode.appendChild(document.createTextNode("Nine"));
-     document.getElementById("target").appendChild(newNode);
-   }
-  </script>
-  <style>
-   body > span { border: 3px solid blue }
-  </style>
- </head>
- <body onload='doit()'>
-  <span id="target"
-        style="-moz-binding: url(insert-into-split-inline-force-ContentInserted.xml#test);"
-  ><span>One</span
-  ><span>Two</span
-  ><span>Three</span
-  ><div>Four</div
-  ><div>Five</div
-  ><span>Six</span
-  ><div>Seven</div
-  ><div>Eight</div
- ></span>
- </body>
-</html>
diff --git a/layout/reftests/ib-split/reftest.list b/layout/reftests/ib-split/reftest.list
--- a/layout/reftests/ib-split/reftest.list
+++ b/layout/reftests/ib-split/reftest.list
@@ -21,17 +21,16 @@
 == insert-into-split-inline-2h.html insert-into-split-inline-2-ref.html
 == insert-into-split-inline-2i.html insert-into-split-inline-2-ref.html
 == insert-into-split-inline-2-ref.html insert-into-split-inline-2-noib-ref.html
 == insert-into-split-inline-3.html insert-into-split-inline-3-ref.html
 == insert-into-split-inline-3-ref.html insert-into-split-inline-3-noib-ref.html
 == insert-into-split-inline-4.html insert-into-split-inline-4-ref.html
 == insert-into-split-inline-4-ref.html insert-into-split-inline-4-noib-ref.html
 == insert-into-split-inline-5-shadow.html insert-into-split-inline-5-ref.html
-skip-if(!xbl) == insert-into-split-inline-5.html insert-into-split-inline-5-ref.html
 == insert-into-split-inline-5-ref.html insert-into-split-inline-5-noib-ref.html
 == insert-into-split-inline-6.html insert-into-split-inline-6-ref.html
 == insert-into-split-inline-6-ref.html insert-into-split-inline-6-noib-ref.html
 == insert-into-split-inline-7.html insert-into-split-inline-7-ref.html
 == insert-into-split-inline-7-ref.html insert-into-split-inline-7-noib-ref.html
 == insert-into-split-inline-8a.html insert-into-split-inline-8-ref.html
 == insert-into-split-inline-8b.html insert-into-split-inline-8-ref.html
 == insert-into-split-inline-8c.html insert-into-split-inline-8-ref.html
diff --git a/layout/reftests/image-element/referenced-from-binding-01-ref.html b/layout/reftests/image-element/referenced-from-binding-01-ref.html
deleted file mode 100644
--- a/layout/reftests/image-element/referenced-from-binding-01-ref.html
+++ /dev/null
@@ -1,11 +0,0 @@
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/licenses/publicdomain/
--->
-<!-- From https://bugzilla.mozilla.org/show_bug.cgi?id=587585 -->
-<!DOCTYPE html>
-<title>Test -moz-element reference with external binding</title>
-
-<body style="margin:0">
-  <div style="width: 100px; height: 100px; background: lime;"></div>
-</body>
diff --git a/layout/reftests/image-element/referenced-from-binding-01.html b/layout/reftests/image-element/referenced-from-binding-01.html
deleted file mode 100644
--- a/layout/reftests/image-element/referenced-from-binding-01.html
+++ /dev/null
@@ -1,22 +0,0 @@
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/licenses/publicdomain/
--->
-<!-- From https://bugzilla.mozilla.org/show_bug.cgi?id=587585 -->
-<!DOCTYPE html>
-<title>Test -moz-element reference with external binding</title>
-<style>
-.paintClient {
-  background: -moz-element(#image-element);
-  width: 100px;
-  height: 100px;
-}
-</style>
-
-<body style="margin:0">
-  <div style="-moz-binding: url(referenced-from-binding-01.xbl#insertPaintClient);"></div>
-  <div style="height: 0; overflow: hidden;">
-    <div id="image-element"
-         style="width: 20px; height: 20px; background: lime;"></div>
-  </div>
-</body>
diff --git a/layout/reftests/image-element/referenced-from-binding-01.xbl b/layout/reftests/image-element/referenced-from-binding-01.xbl
deleted file mode 100644
--- a/layout/reftests/image-element/referenced-from-binding-01.xbl
+++ /dev/null
@@ -1,11 +0,0 @@
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/licenses/publicdomain/
--->
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="insertPaintClient">
-    <content>
-      <div xmlns="http://www.w3.org/1999/xhtml" class="paintClient"></div>
-    </content>
-  </binding>
-</bindings>
diff --git a/layout/reftests/image-element/reftest.list b/layout/reftests/image-element/reftest.list
--- a/layout/reftests/image-element/reftest.list
+++ b/layout/reftests/image-element/reftest.list
@@ -39,16 +39,15 @@ fuzzy(0-1,0-9674) random-if(!cocoaWidget
 fuzzy(0-1,0-9674) random-if(!cocoaWidget) fuzzy-if(webrender&&cocoaWidget,1-1,44200-444200) == gradient-html-06b.html gradient-html-06c.html
 == gradient-html-06c.html gradient-html-06d.html
 == gradient-html-06d.html gradient-html-06e.html
 random-if(!cocoaWidget) fuzzy-if(cocoaWidget,0-2,0-42305) == gradient-html-07a.html gradient-html-07b.html
 fuzzy(0-1,0-16900) == gradient-html-07c.html gradient-html-07d.html
 HTTP == invalidate-1.html invalidate-1-ref.html
 == pattern-html-01.html pattern-html-01-ref.svg
 == pattern-html-02.html pattern-html-02-ref.svg
-skip-if(!xbl) == referenced-from-binding-01.html referenced-from-binding-01-ref.html
 != broken-icon.html no-src.html
 != broken-icon.html empty-src.html
 == empty-src.html no-src.html
 == broken-icon.html invalid-src.html
 fails == invalid-src.html invalid-src-2.html # bug 1506804
 
 fuzzy-if(skiaContent,0-1,0-30000) == mask-image-element.html mask-image-element-ref.html
diff --git a/layout/reftests/svg/moz-only/reftest.list b/layout/reftests/svg/moz-only/reftest.list
--- a/layout/reftests/svg/moz-only/reftest.list
+++ b/layout/reftests/svg/moz-only/reftest.list
@@ -1,21 +1,7 @@
-# XBL tests
-skip-if(!xbl) == xbl-basic-01.svg                             pass.svg
-skip-if(!xbl) == xbl-basic-02.svg                             pass.svg
-skip-if(!xbl) == xbl-grad-ref--grad-in-binding-01.svg         pass.svg
-fails skip-if(!xbl) == xbl-grad-ref--grad-in-binding-02.svg   pass.svg
-skip-if(!xbl) == xbl-grad-ref--grad-in-bound-01.svg           pass.svg
-fails skip-if(!xbl) == xbl-grad-ref--grad-in-bound-02.svg     pass-black.svg
-fails skip-if(!xbl) == xbl-grad-ref--grad-in-resources-01.svg pass.svg
-fails skip-if(!xbl) == xbl-grad-ref--grad-in-resources-02.svg pass.svg
-skip-if(!xbl) == xbl-grad-ref--grad-in-binding-03.svg         pass.svg
-skip-if(!xbl) == xbl-grad-ref--grad-in-bound-03.svg           pass.svg
-fails skip-if(!xbl) == xbl-grad-ref--grad-in-binding-04.svg   pass.svg
-skip-if(!xbl) == xbl-grad-ref--grad-in-bound-04.svg           pass.svg
-
 # Tests for zooming with the full page zoom UI
 random-if(d2d) == feImage-zoom-01a.svg          feImage-zoom-01-ref.svg
 random-if(d2d) == feImage-zoom-01b.svg          feImage-zoom-01-ref.svg
 == foreignObject-zoom-01.svg                    pass.svg
 == zoom-invalidation-01.svg                     pass.svg
 == replaced-element-zoom-01.html                pass.svg
 fuzzy-if(winWidget,0-12,0-7) == zoomed-svg-with-viewBox-01.svg   zoomed-svg-with-viewBox-01-ref.svg
diff --git a/layout/reftests/svg/moz-only/xbl-basic-01.svg b/layout/reftests/svg/moz-only/xbl-basic-01.svg
deleted file mode 100644
--- a/layout/reftests/svg/moz-only/xbl-basic-01.svg
+++ /dev/null
@@ -1,23 +0,0 @@
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/publicdomain/zero/1.0/
--->
-<svg xmlns="http://www.w3.org/2000/svg" style="-moz-binding: url(#lime);">
-
-  <!-- From https://bugzilla.mozilla.org/show_bug.cgi?id=389670 -->
-
-  <title>Test XBL bindings inline in an SVG file can be used in the SVG</title>
-
-  <bindings xmlns="http://www.mozilla.org/xbl">
-    <binding id="lime">
-      <content>
-        <children/>
-        <rect xmlns="http://www.w3.org/2000/svg"
-              width="100%" height="100%" fill="lime"/>
-      </content>
-    </binding>
-  </bindings>
-
-  <rect width="100%" height="100%" fill="red"/>
-
-</svg>
diff --git a/layout/reftests/svg/moz-only/xbl-basic-02.svg b/layout/reftests/svg/moz-only/xbl-basic-02.svg
deleted file mode 100644
--- a/layout/reftests/svg/moz-only/xbl-basic-02.svg
+++ /dev/null
@@ -1,14 +0,0 @@
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/publicdomain/zero/1.0/
--->
-<svg xmlns="http://www.w3.org/2000/svg"
-     style="-moz-binding: url(xbl-basic-02.xbl#lime);">
-
-  <!-- From https://bugzilla.mozilla.org/show_bug.cgi?id=389670 -->
-
-  <title>Test XBL bindings in an external file can be used by SVG</title>
-
-  <rect width="100%" height="100%" fill="red"/>
-
-</svg>
diff --git a/layout/reftests/svg/moz-only/xbl-basic-02.xbl b/layout/reftests/svg/moz-only/xbl-basic-02.xbl
deleted file mode 100644
--- a/layout/reftests/svg/moz-only/xbl-basic-02.xbl
+++ /dev/null
@@ -1,9 +0,0 @@
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="lime">
-    <content>
-      <children/>
-      <rect xmlns="http://www.w3.org/2000/svg"
-            width="100%" height="100%" fill="lime"/>
-    </content>
-  </binding>
-</bindings>
diff --git a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-binding-01.svg b/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-binding-01.svg
deleted file mode 100644
--- a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-binding-01.svg
+++ /dev/null
@@ -1,29 +0,0 @@
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/publicdomain/zero/1.0/
--->
-<svg xmlns="http://www.w3.org/2000/svg">
-
-  <!-- From https://bugzilla.mozilla.org/show_bug.cgi?id=389670 -->
-
-  <title>Test gradient reference in binding for gradient in &lt;binding&gt;</title>
-
-  <bindings xmlns="http://www.mozilla.org/xbl">
-    <binding id="lime">
-      <content>
-        <children/>
-        <g xmlns="http://www.w3.org/2000/svg">
-          <linearGradient id="grad" gradientUnits="userSpaceOnUse">
-            <stop stop-color="lime"/>
-          </linearGradient>
-          <rect width="100%" height="100%" fill="url(#grad)"/>
-        </g>
-      </content>
-    </binding>
-  </bindings>
-
-  <rect width="100%" height="100%" fill="red"/>
-
-  <g style="-moz-binding: url(#lime);"/>
-
-</svg>
diff --git a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-binding-02.svg b/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-binding-02.svg
deleted file mode 100644
--- a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-binding-02.svg
+++ /dev/null
@@ -1,14 +0,0 @@
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/publicdomain/zero/1.0/
--->
-<svg xmlns="http://www.w3.org/2000/svg"
-     style="-moz-binding: url(xbl-grad-ref--grad-in-binding-02.xbl#lime);">
-
-  <!-- From https://bugzilla.mozilla.org/show_bug.cgi?id=389670 -->
-
-  <title>Test gradient reference in binding for gradient in &lt;binding&gt;</title>
-
-  <rect width="100%" height="100%" fill="red"/>
-
-</svg>
diff --git a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-binding-02.xbl b/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-binding-02.xbl
deleted file mode 100644
--- a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-binding-02.xbl
+++ /dev/null
@@ -1,13 +0,0 @@
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="lime">
-    <content>
-      <children/>
-      <g xmlns="http://www.w3.org/2000/svg">
-        <linearGradient id="grad" gradientUnits="userSpaceOnUse">
-          <stop stop-color="lime"/>
-        </linearGradient>
-        <rect width="100%" height="100%" fill="url(#grad)"/>
-      </g>
-    </content>
-  </binding>
-</bindings>
diff --git a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-binding-03.svg b/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-binding-03.svg
deleted file mode 100644
--- a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-binding-03.svg
+++ /dev/null
@@ -1,26 +0,0 @@
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/publicdomain/zero/1.0/
--->
-<svg xmlns="http://www.w3.org/2000/svg">
-
-  <!-- From https://bugzilla.mozilla.org/show_bug.cgi?id=587585 -->
-
-  <title>Test gradient reference in binding for gradient inside &lt;bindings&gt;</title>
-
-  <g style="-moz-binding: url(#lime);"/>
-
-  <bindings xmlns="http://www.mozilla.org/xbl">
-    <binding id="lime">
-      <content>
-        <rect xmlns="http://www.w3.org/2000/svg"
-              width="100%" height="100%" fill="url(#grad) red"/>
-        <linearGradient xmlns="http://www.w3.org/2000/svg"
-                        id="grad" gradientUnits="userSpaceOnUse">
-          <stop stop-color="lime"/>
-        </linearGradient>
-      </content>
-    </binding>
-  </bindings>
-
-</svg>
diff --git a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-binding-04.svg b/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-binding-04.svg
deleted file mode 100644
--- a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-binding-04.svg
+++ /dev/null
@@ -1,13 +0,0 @@
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/publicdomain/zero/1.0/
--->
-<svg xmlns="http://www.w3.org/2000/svg">
-
-  <!-- From https://bugzilla.mozilla.org/show_bug.cgi?id=587585 -->
-
-  <title>Test gradient reference in binding for gradient inside &lt;bindings&gt; with external binding</title>
-
-  <g style="-moz-binding: url(xbl-grad-ref--grad-in-binding-04.xbl#lime);"/>
-
-</svg>
diff --git a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-binding-04.xbl b/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-binding-04.xbl
deleted file mode 100644
--- a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-binding-04.xbl
+++ /dev/null
@@ -1,16 +0,0 @@
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/publicdomain/zero/1.0/
--->
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="lime">
-    <content>
-      <rect xmlns="http://www.w3.org/2000/svg"
-            width="100%" height="100%" fill="url(#grad) red"/>
-      <linearGradient xmlns="http://www.w3.org/2000/svg"
-                      id="grad" gradientUnits="userSpaceOnUse">
-        <stop stop-color="lime"/>
-      </linearGradient>
-    </content>
-  </binding>
-</bindings>
diff --git a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-bound-01.svg b/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-bound-01.svg
deleted file mode 100644
--- a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-bound-01.svg
+++ /dev/null
@@ -1,27 +0,0 @@
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/publicdomain/zero/1.0/
--->
-<svg xmlns="http://www.w3.org/2000/svg" style="-moz-binding: url(#lime);">
-
-  <!-- From https://bugzilla.mozilla.org/show_bug.cgi?id=389670 -->
-
-  <title>Test gradient reference in binding for gradient outside &lt;bindings&gt;</title>
-
-  <linearGradient id="grad" gradientUnits="userSpaceOnUse">
-    <stop stop-color="lime"/>
-  </linearGradient>
-
-  <bindings xmlns="http://www.mozilla.org/xbl">
-    <binding id="lime">
-      <content>
-        <children/>
-        <rect xmlns="http://www.w3.org/2000/svg"
-              width="100%" height="100%" fill="url(#grad)"/>
-      </content>
-    </binding>
-  </bindings>
-
-  <rect width="100%" height="100%" fill="red"/>
-
-</svg>
diff --git a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-bound-02.svg b/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-bound-02.svg
deleted file mode 100644
--- a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-bound-02.svg
+++ /dev/null
@@ -1,19 +0,0 @@
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/publicdomain/zero/1.0/
--->
-<svg xmlns="http://www.w3.org/2000/svg"
-     style="-moz-binding: url(xbl-grad-ref--grad-in-bound-02.xbl#red);">
-
-  <!-- From https://bugzilla.mozilla.org/show_bug.cgi?id=389670 -->
-
-  <title>Test SVG in XBL can't reference gradient in the bound document</title>
-
-  <!-- SVG in the binding should not be able to reference this gradient -->
-  <linearGradient id="grad" gradientUnits="userSpaceOnUse">
-    <stop stop-color="red"/>
-  </linearGradient>
-
-  <rect width="100%" height="100%" fill="red"/>
-
-</svg>
diff --git a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-bound-02.xbl b/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-bound-02.xbl
deleted file mode 100644
--- a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-bound-02.xbl
+++ /dev/null
@@ -1,10 +0,0 @@
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="red">
-    <content>
-      <children/>
-      <!-- gradient reference should fail, fill should fall back to black -->
-      <rect xmlns="http://www.w3.org/2000/svg"
-            width="100%" height="100%" fill="url(#grad)"/>
-    </content>
-  </binding>
-</bindings>
diff --git a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-bound-03.svg b/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-bound-03.svg
deleted file mode 100644
--- a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-bound-03.svg
+++ /dev/null
@@ -1,25 +0,0 @@
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/publicdomain/zero/1.0/
--->
-<svg xmlns="http://www.w3.org/2000/svg">
-
-  <!-- From https://bugzilla.mozilla.org/show_bug.cgi?id=587585 -->
-
-  <title>Test gradient reference in binding for gradient outside &lt;bindings&gt;</title>
-
-  <g style="-moz-binding: url(#lime);"/>
-
-  <bindings xmlns="http://www.mozilla.org/xbl">
-    <binding id="lime">
-      <content>
-        <rect xmlns="http://www.w3.org/2000/svg"
-              width="100%" height="100%" fill="url(#grad) lime"/>
-      </content>
-    </binding>
-  </bindings>
-
-  <linearGradient id="grad" gradientUnits="userSpaceOnUse">
-    <stop stop-color="red"/>
-  </linearGradient>
-</svg>
diff --git a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-bound-04.svg b/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-bound-04.svg
deleted file mode 100644
--- a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-bound-04.svg
+++ /dev/null
@@ -1,17 +0,0 @@
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/publicdomain/zero/1.0/
--->
-<svg xmlns="http://www.w3.org/2000/svg">
-
-  <!-- From https://bugzilla.mozilla.org/show_bug.cgi?id=587585 -->
-
-  <title>Test gradient reference in binding for gradient in bound document with external binding</title>
-
-  <g style="-moz-binding: url(xbl-grad-ref--grad-in-bound-04.xbl#lime);"/>
-
-  <linearGradient id="grad" gradientUnits="userSpaceOnUse">
-    <stop stop-color="lime"/>
-  </linearGradient>
-
-</svg>
diff --git a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-bound-04.xbl b/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-bound-04.xbl
deleted file mode 100644
--- a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-bound-04.xbl
+++ /dev/null
@@ -1,12 +0,0 @@
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/publicdomain/zero/1.0/
--->
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="lime">
-    <content>
-      <rect xmlns="http://www.w3.org/2000/svg"
-            width="100%" height="100%" fill="url(xbl-grad-ref--grad-in-bound-04.svg#grad) red"/>
-    </content>
-  </binding>
-</bindings>
diff --git a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-resources-01.svg b/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-resources-01.svg
deleted file mode 100644
--- a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-resources-01.svg
+++ /dev/null
@@ -1,37 +0,0 @@
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/publicdomain/zero/1.0/
--->
-<svg xmlns="http://www.w3.org/2000/svg">
-
-  <!-- From https://bugzilla.mozilla.org/show_bug.cgi?id=389670 -->
-
-  <title>Test gradient reference in binding for gradient in &lt;resources&gt;</title>
-
-  <bindings xmlns="http://www.mozilla.org/xbl">
-    <binding id="lime">
-      <resources>
-
-        <!-- don't need <svg> - only used to eliminate its omission as a problem -->
-
-        <svg xmlns="http://www.w3.org/2000/svg">
-          <linearGradient xmlns="http://www.w3.org/2000/svg"
-                          id="grad" gradientUnits="userSpaceOnUse">
-            <stop stop-color="lime"/>
-          </linearGradient>
-        </svg>
-
-      </resources>
-      <content>
-        <children/>
-        <rect xmlns="http://www.w3.org/2000/svg"
-              width="100%" height="100%" fill="url(#grad)"/>
-      </content>
-    </binding>
-  </bindings>
-
-  <rect width="100%" height="100%" fill="red"/>
-
-  <g style="-moz-binding: url(#lime);"/>
-
-</svg>
diff --git a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-resources-02.svg b/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-resources-02.svg
deleted file mode 100644
--- a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-resources-02.svg
+++ /dev/null
@@ -1,14 +0,0 @@
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/publicdomain/zero/1.0/
--->
-<svg xmlns="http://www.w3.org/2000/svg"
-     style="-moz-binding: url(xbl-grad-ref--grad-in-resources-02.xbl#lime);">
-
-  <!-- From https://bugzilla.mozilla.org/show_bug.cgi?id=389670 -->
-
-  <title>Test gradient reference in binding for gradient in &lt;resources&gt;</title>
-
-  <rect width="100%" height="100%" fill="red"/>
-
-</svg>
diff --git a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-resources-02.xbl b/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-resources-02.xbl
deleted file mode 100644
--- a/layout/reftests/svg/moz-only/xbl-grad-ref--grad-in-resources-02.xbl
+++ /dev/null
@@ -1,21 +0,0 @@
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="lime">
-    <resources>
-
-      <!-- don't need <svg> - only used to eliminate its omission as a problem -->
-
-      <svg xmlns="http://www.w3.org/2000/svg">
-        <linearGradient xmlns="http://www.w3.org/2000/svg"
-                        id="grad" gradientUnits="userSpaceOnUse">
-          <stop stop-color="lime"/>
-        </linearGradient>
-      </svg>
-
-    </resources>
-    <content>
-      <children/>
-      <rect xmlns="http://www.w3.org/2000/svg"
-            width="100%" height="100%" fill="url(#grad)"/>
-    </content>
-  </binding>
-</bindings>
diff --git a/layout/reftests/svg/svg-integration/mask-html-xbl-bound-01.html b/layout/reftests/svg/svg-integration/mask-html-xbl-bound-01.html
deleted file mode 100644
--- a/layout/reftests/svg/svg-integration/mask-html-xbl-bound-01.html
+++ /dev/null
@@ -1,22 +0,0 @@
-<!--
-     Any copyright is dedicated to the Public Domain.
-     http://creativecommons.org/publicdomain/zero/1.0/
--->
-<!-- From https://bugzilla.mozilla.org/show_bug.cgi?id=587585 -->
-<!DOCTYPE html>
-<title>Test mask reference in binding for mask in bound document with external binding</title>
-
-<body style="margin:0">
-  <div style="-moz-binding: url(mask-html-xbl-bound-01.xbl#lime);"></div>
-  
-  <svg height="0">
-    <mask id="m1" maskUnits="objectBoundingBox" maskContentUnits="objectBoundingBox">
-      <linearGradient id="g" gradientUnits="objectBoundingBox" x2="0" y2="1">
-        <stop stop-color="white" offset="0"/>
-        <stop stop-color="white" stop-opacity="0" offset="1"/>
-      </linearGradient>
-      <circle cx="0.25" cy="0.25" r="0.25" id="circle" fill="white"/>
-      <rect x="0.5" y="0" width="0.5" height="1" fill="url(#g)"/>
-    </mask>
-  </svg>
-</body>
diff --git a/layout/reftests/svg/svg-integration/reftest.list b/layout/reftests/svg/svg-integration/reftest.list
--- a/layout/reftests/svg/svg-integration/reftest.list
+++ b/layout/reftests/svg/svg-integration/reftest.list
@@ -27,17 +27,16 @@ fuzzy-if(Android,0-255,0-30) == clipPath
 == filter-html-01.xhtml filter-html-01-ref.svg
 == filter-html-dynamic-01.xhtml filter-html-dynamic-01-ref.xhtml
 random-if(Android) == filter-html-01-extref.xhtml filter-html-01-ref.svg # Android: bug 1198380
 == filter-html-zoomed-01.xhtml filter-html-01-ref.svg
 fuzzy-if(webrender,0-1,0-125414) == mask-html-01.xhtml mask-html-01-ref.svg
 fuzzy-if(webrender,0-1,0-125414) == mask-html-01-extref-01.xhtml mask-html-01-ref.svg
 random == mask-html-01-extref-02.xhtml mask-html-01-ref.svg # random due to bug 877661
 fuzzy-if(webrender,0-1,0-125414) == mask-html-zoomed-01.xhtml mask-html-01-ref.svg
-fuzzy-if(webrender,0-1,0-125414) skip-if(!xbl) == mask-html-xbl-bound-01.html mask-html-01-ref.svg
 == mask-transformed-html-01.xhtml ../pass.svg
 == mask-transformed-html-02.xhtml ../pass.svg
 fuzzy-if(skiaContent,0-1,0-5) == patterned-svg-under-transformed-html-01.xhtml ../pass.svg
 == patterned-svg-under-transformed-html-02.xhtml ../pass.svg
 
 fuzzy(0-1,0-5000) == mask-clipPath-opacity-01a.xhtml mask-clipPath-opacity-01-ref.xhtml
 fuzzy(0-1,0-5000) == mask-clipPath-opacity-01b.xhtml mask-clipPath-opacity-01-ref.xhtml
 fuzzy(0-1,0-5000) == mask-clipPath-opacity-01c.xhtml mask-clipPath-opacity-01-ref.xhtml
diff --git a/layout/reftests/usercss/reftest.list b/layout/reftests/usercss/reftest.list
--- a/layout/reftests/usercss/reftest.list
+++ b/layout/reftests/usercss/reftest.list
@@ -1,4 +1,3 @@
 == usercss.html usercss-ref.html
 == usercss-uppercase.html usercss-ref.html
-skip-if(!xbl) == usercss-xbl.html usercss-ref.html
 fails-if(geckoview&&webrender) == usercss-moz-document.html usercss-moz-document-ref.html
diff --git a/layout/reftests/usercss/usercss-xbl.html b/layout/reftests/usercss/usercss-xbl.html
deleted file mode 100644
--- a/layout/reftests/usercss/usercss-xbl.html
+++ /dev/null
@@ -1,13 +0,0 @@
-<!DOCTYPE html>
-<html class="reftest-wait">
-<head>
-<style>
-p {
-  background-color: red;
-}
-</style>
-</head>
-<body>
-<p class="reftest-userxbl">This paragraph should have a green background.</p>
-</body>
-</html>
diff --git a/layout/style/crashtests/1370793-1.xhtml b/layout/style/crashtests/1370793-1.xhtml
deleted file mode 100644
--- a/layout/style/crashtests/1370793-1.xhtml
+++ /dev/null
@@ -1,24 +0,0 @@
-<!DOCTYPE html>
-<html xmlns="http://www.w3.org/1999/xhtml">
-  <head>
-    <bindings xmlns="http://www.mozilla.org/xbl">
-      <binding id="a">
-        <content>
-          <children/>
-        </content>
-      </binding>
-    </bindings>
-    <script>
-      function doTest() {
-        // Cause XBL bindings to be attached to the object element by
-        // wrapping it for JS.
-        document.querySelector("object");
-      }
-    </script>
-  </head>
-  <body onload="doTest()">
-    <div style="display: none;">
-      <object style="-moz-binding: url(#a);" data="about:blank"></object>
-    </div>
-  </body>
-</html>
diff --git a/layout/style/crashtests/crashtests.list b/layout/style/crashtests/crashtests.list
--- a/layout/style/crashtests/crashtests.list
+++ b/layout/style/crashtests/crashtests.list
@@ -176,17 +176,16 @@ load 1331272.html
 HTTP load 1333001-1.html
 load 1340248.html
 pref(dom.animations-api.core.enabled,true) pref(dom.animations-api.implicit-keyframes.enabled,true) load 1340344.html
 load 1342316-1.html
 load 1344210.html
 load 1353312.html
 load 1356601-1.html
 load 1364139-1.html
-skip-if(!xbl) load 1370793-1.xhtml
 load 1371450-1.html
 load 1374175-1.html
 load 1375812-1.html
 load 1377053-1.html
 load 1377256-1.html
 load 1378064-1.html
 load 1378814.html
 load 1380800.html
diff --git a/layout/style/test/mochitest.ini b/layout/style/test/mochitest.ini
--- a/layout/style/test/mochitest.ini
+++ b/layout/style/test/mochitest.ini
@@ -307,18 +307,16 @@ support-files = redundant_font_download.
 [test_rem_unit.html]
 [test_restyle_table_wrapper.html]
 [test_restyles_in_smil_animation.html]
 [test_root_node_display.html]
 [test_rule_insertion.html]
 [test_rule_serialization.html]
 [test_rules_out_of_sheets.html]
 [test_selectors.html]
-[test_selectors_on_anonymous_content.html]
-skip-if = !xbl
 [test_setPropertyWithNull.html]
 [test_shape_outside_CORS.html]
 [test_shorthand_property_getters.html]
 [test_specified_value_serialization.html]
 support-files = file_specified_value_serialization_individual_transforms.html
 [test_style_attr_listener.html]
 [test_style_attribute_quirks.html]
 [test_style_attribute_standards.html]
diff --git a/layout/style/test/test_selectors_on_anonymous_content.html b/layout/style/test/test_selectors_on_anonymous_content.html
deleted file mode 100644
--- a/layout/style/test/test_selectors_on_anonymous_content.html
+++ /dev/null
@@ -1,78 +0,0 @@
-<!DOCTYPE HTML>
-<html>
-<head>
-  <title>Test for CSS Selectors</title>
-  <!--
-      Separate from test_selectors.html so we don't need to deal with
-      waiting for the binding document to load.
-    -->
-  <script src="/tests/SimpleTest/SimpleTest.js"></script>
-  <link rel="stylesheet" type="text/css" href="/tests/SimpleTest/test.css" />
-  <style type="text/css">
-
-  #display { -moz-binding: url(xbl_bindings.xml#onedivchild); }
-
-  </style>
-</head>
-<body onload="run()">
-<div id="display"></div>
-<pre id="test">
-<script class="testbody" type="text/javascript">
-
-SimpleTest.waitForExplicitFinish();
-
-function run() {
-
-    function setup_style() {
-        var style_elem = document.createElement("style");
-        style_elem.setAttribute("type", "text/css");
-        document.getElementsByTagName("head")[0].appendChild(style_elem);
-        var style_text = document.createTextNode("");
-        style_elem.appendChild(style_text);
-        return style_text;
-    }
-
-    var style_text = setup_style();
-
-    var gCounter = 0;
-
-    function test_selector(selector, matches_docdiv, matches_anondiv)
-    {
-        var zi = ++gCounter;
-        style_text.data = selector + "{ z-index: " + zi + " }";
-
-        var doc_div = document.getElementById("display");
-        var anon_div = SpecialPowers.wrap(document).getAnonymousNodes(doc_div)[0];
-        var should_match = [];
-        var should_not_match = [];
-        (matches_docdiv ? should_match : should_not_match).push(doc_div);
-        (matches_anondiv ? should_match : should_not_match).push(anon_div);
-
-        for (var i = 0; i < should_match.length; ++i) {
-            var e = should_match[i];
-            is(SpecialPowers.wrap(window).getComputedStyle(e).zIndex, String(zi),
-               "element matched " + selector);
-        }
-        for (var i = 0; i < should_not_match.length; ++i) {
-            var e = should_not_match[i];
-            is(SpecialPowers.wrap(window).getComputedStyle(e).zIndex, "auto",
-               "element did not match " + selector);
-        }
-
-        style_text.data = "";
-    }
-
-    // Test that the root of an XBL1 anonymous content subtree doesn't
-    // match :nth-child().
-    test_selector("div.anondiv", false, true);
-    test_selector("div:nth-child(odd)", true, false);
-    test_selector("div:nth-child(even)", false, false);
-
-    SimpleTest.finish();
-}
-
-</script>
-</pre>
-</body>
-</html>
-
diff --git a/layout/svg/crashtests/386566-1.svg b/layout/svg/crashtests/386566-1.svg
deleted file mode 100644
--- a/layout/svg/crashtests/386566-1.svg
+++ /dev/null
@@ -1,21 +0,0 @@
-<svg xmlns="http://www.w3.org/2000/svg" height="5" onload="setTimeout(boom, 30);" class="reftest-wait">
-     
-<bindings xmlns="http://www.mozilla.org/xbl"><binding id="foo"><content></content></binding></bindings>
-
-<script>
-function boom()
-{
-  document.getElementById("rr").style.MozBinding = "url('#foo')";
-  document.documentElement.setAttribute('height', "5px");
-  setTimeout(done, 30);
-}
-
-function done()
-{
-  document.documentElement.removeAttribute("class");
-}
-</script>
-
-<rect id="rr" x="50%" width="25%" height="10em" fill="red"/>
-
-</svg>
diff --git a/layout/svg/crashtests/409573-1.svg b/layout/svg/crashtests/409573-1.svg
deleted file mode 100644
--- a/layout/svg/crashtests/409573-1.svg
+++ /dev/null
@@ -1,17 +0,0 @@
-<svg xmlns="http://www.w3.org/2000/svg"
-     xmlns:xlink="http://www.w3.org/1999/xlink"
-     onload="document.documentElement.style.MozBinding = 'url(#empty)';">
-
-  <bindings xmlns="http://www.mozilla.org/xbl"><binding id="empty"><content></content></binding></bindings>
-
-	<defs>
-
-    <filter id="filter1"/>
-    
-    <filter id="filter2">
-      <use filter="url(#filter1)" />
-	  </filter>
-
-  </defs>
-
-</svg>
diff --git a/layout/svg/crashtests/crashtests.list b/layout/svg/crashtests/crashtests.list
--- a/layout/svg/crashtests/crashtests.list
+++ b/layout/svg/crashtests/crashtests.list
@@ -56,23 +56,21 @@ load 384637-1.svg
 load 384728-1.svg
 load 385246-1.svg
 load 385246-2.svg
 load 385552-1.svg
 load 385552-2.svg
 load 385840-1.svg
 load 385852-1.svg
 load 386475-1.xhtml
-skip-if(!xbl) load 386566-1.svg
 load 386690-1.svg
 load 387290-1.svg
 load 402408-1.svg
 load 404677-1.xhtml
 load 409565-1.xhtml
-skip-if(!xbl) load 409573-1.svg
 load 420697-1.svg
 load 420697-2.svg
 load 429774-1.svg
 load 441368-1.svg
 load 453754-1.svg
 load 455314-1.xhtml
 load 458453.html
 load 459666-1.html
diff --git a/layout/xul/crashtests/387033-1.xhtml b/layout/xul/crashtests/387033-1.xhtml
deleted file mode 100644
--- a/layout/xul/crashtests/387033-1.xhtml
+++ /dev/null
@@ -1,31 +0,0 @@
-<?xml version="1.0"?>
-<html xmlns="http://www.w3.org/1999/xhtml"
-      xmlns:xbl="http://www.mozilla.org/xbl"
-      xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-  <head>
-    <xbl:bindings>
-      <xbl:binding id="test" extends="chrome://global/content/bindings/text.xml#text-label">
-        <xbl:implementation>
-          <xbl:property name="accessKey">
-            <xbl:getter>
-              <![CDATA[
-                this.parentNode.remove();
-                return "";
-              ]]>
-            </xbl:getter>
-            <xbl:setter>
-              <![CDATA[
-                return val;
-              ]]>
-            </xbl:setter>
-          </xbl:property>
-        </xbl:implementation>
-      </xbl:binding>
-    </xbl:bindings>
-  </head>
-  <body>
-    <xul:hbox>
-      <xul:label value="foobar" style="-moz-binding: url(#test)"/>
-    </xul:hbox>
-  </body>
-</html>
diff --git a/layout/xul/crashtests/452185.html b/layout/xul/crashtests/452185.html
deleted file mode 100644
--- a/layout/xul/crashtests/452185.html
+++ /dev/null
@@ -1,3 +0,0 @@
-<html><head></head><body><div style="position: absolute;"> </div>
-<style>div, head {-moz-binding:url(452185.xml#a);</style>
-</body></html>
diff --git a/layout/xul/crashtests/467080.xul b/layout/xul/crashtests/467080.xul
deleted file mode 100644
--- a/layout/xul/crashtests/467080.xul
+++ /dev/null
@@ -1,24 +0,0 @@
-<?xml-stylesheet href="chrome://browser/skin/" type="text/css"?>
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:mathml="http://www.w3.org/1998/Math/MathML" style="-moz-binding:url(#a);" class="reftest-wait">
-
-<content xmlns="http://www.mozilla.org/xbl" ordinal="-1">
-<mathml:median style="display: block;"/>
-</content>
-
-<script xmlns="http://www.w3.org/1999/xhtml"><![CDATA[
-function finish() {
-  document.documentElement.removeAttribute("class");
-}
-function doe() {
-document.documentElement.removeAttribute('style');
-setTimeout(finish, 0);
-}
-setTimeout(doe, 100);
-]]></script>
-
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-<binding id="a">
-<content><children/></content>
-</binding></bindings>
-</window>
diff --git a/layout/xul/crashtests/crashtests.list b/layout/xul/crashtests/crashtests.list
--- a/layout/xul/crashtests/crashtests.list
+++ b/layout/xul/crashtests/crashtests.list
@@ -34,29 +34,26 @@ load 378961.html
 load 381862.html
 load chrome://reftest/content/crashtests/layout/xul/crashtests/382746-1.xul
 load chrome://reftest/content/crashtests/layout/xul/crashtests/382899-1.xul
 load 384037-1.xhtml
 load 384105-1.html
 load 384373.html
 load 384871-1.html
 load chrome://reftest/content/crashtests/layout/xul/crashtests/386642.xul
-skip-if(!xbl) load 387033-1.xhtml
 load chrome://reftest/content/crashtests/layout/xul/crashtests/387080-1.xul
 load 391974-1.html
 load chrome://reftest/content/crashtests/layout/xul/crashtests/399013.xul
 load 402912-1.xhtml
 load 404192.xhtml
 load chrome://reftest/content/crashtests/layout/xul/crashtests/408904-1.xul
 load 412479-1.xhtml
 load chrome://reftest/content/crashtests/layout/xul/crashtests/417509.xul
 load 430356-1.xhtml
-skip-if(!xbl) load 452185.html
 asserts(0-1) load 464407-1.xhtml # Bugs 450974, 1267054, 718883
-skip-if(!xbl) load chrome://reftest/content/crashtests/layout/xul/crashtests/467080.xul
 load 470063-1.html
 load 470272.html
 load chrome://reftest/content/crashtests/layout/xul/crashtests/538308-1.xul
 load 557174-1.xml
 load chrome://reftest/content/crashtests/layout/xul/crashtests/564705-1.xul
 load 583957-1.html
 load 617089.html
 load menulist-focused.xhtml
