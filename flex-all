# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  cc903e3f61894e60c3b0efaf05e9a446d1d85888

diff --git a/accessible/tests/mochitest/attributes/test_obj_css.xul b/accessible/tests/mochitest/attributes/test_obj_css.xul
--- a/accessible/tests/mochitest/attributes/test_obj_css.xul
+++ b/accessible/tests/mochitest/attributes/test_obj_css.xul
@@ -51,17 +51,17 @@
 
     <p id="display"></p>
     <div id="content" style="display: none">
     </div>
     <pre id="test">
     </pre>
   </body>
 
-  <vbox id="display_mozbox" style="display: -moz-box;" role="img"/>
+  <vbox id="display_mozbox" style="display: flex;" role="img"/>
   <vbox id="display_mozinlinebox" style="display: -moz-inline-box;" role="img"/>
   <vbox id="display_mozgrid" style="display: -moz-grid;" role="img"/>
   <vbox id="display_mozinlinegrid" style="display: -moz-inline-grid;" role="img"/>
   <vbox id="display_mozgridgroup" style="display: -moz-grid-group;" role="img"/>
   <vbox id="display_mozgridline" style="display: -moz-grid-line;" role="img"/>
   <vbox id="display_mozstack" style="display: -moz-stack;" role="img"/>
   <vbox id="display_mozinlinestack" style="display: -moz-inline-stack;" role="img"/>
   <vbox id="display_mozdeck" style="display: -moz-deck;" role="img"/>
diff --git a/browser/base/content/abouthome/aboutHome.css b/browser/base/content/abouthome/aboutHome.css
--- a/browser/base/content/abouthome/aboutHome.css
+++ b/browser/base/content/abouthome/aboutHome.css
@@ -9,17 +9,17 @@ html {
   font-size: 100%;
   background-color: hsl(0,0%,95%);
   color: #000;
   height: 100%;
 }
 
 body {
   margin: 0;
-  display: -moz-box;
+  display: flex;
   -moz-box-orient: vertical;
   width: 100%;
   height: 100%;
 }
 
 input,
 button {
   font-size: inherit;
@@ -27,17 +27,17 @@ button {
 }
 
 a {
   color: -moz-nativehyperlinktext;
   text-decoration: none;
 }
 
 .spacer {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 #topSection {
   text-align: center;
 }
 
 #brandLogo {
   height: 192px;
@@ -50,34 +50,34 @@ a {
 }
 
 #searchIconAndTextContainer,
 #snippets {
   width: 470px;
 }
 
 #searchIconAndTextContainer {
-  display: -moz-box;
+  display: flex;
   height: 36px;
   position: relative;
 }
 
 #searchIcon {
   border: 1px transparent;
   padding: 0;
   margin: 0;
   width: 36px;
   height: 36px;
   background: url("chrome://browser/skin/search-indicator-magnifying-glass.svg") center center no-repeat;
   position: absolute;
 }
 
 #searchText {
   margin-left: 0;
-  -moz-box-flex: 1;
+  flex: 1;
   padding-top: 6px;
   padding-bottom: 6px;
   padding-inline-start: 34px;
   padding-inline-end: 8px;
   background: hsla(0,0%,100%,.9) padding-box;
   border: 1px solid;
   border-radius: 2px 0 0 2px;
   border-color: hsla(210,54%,20%,.15) hsla(210,54%,20%,.17) hsla(210,54%,20%,.2);
@@ -198,17 +198,17 @@ a {
      with Segoe UI on a default Windows 7 setup. The 15/12 multiplier approximately
      converts em from units of font-size to units of line-height. The goal is to
      preset the height of a three-line snippet to avoid visual moving/flickering as
      the snippets load. */
   min-height: calc(15/12 * 3em);
 }
 
 #launcher {
-  display: -moz-box;
+  display: flex;
   -moz-box-align: center;
   -moz-box-pack: center;
   width: 100%;
   background-color: hsla(0,0%,0%,.03);
   border-top: 1px solid hsla(0,0%,0%,.03);
   box-shadow: 0 1px 2px hsla(0,0%,0%,.02) inset,
               0 -1px 0 hsla(0,0%,100%,.25);
 }
@@ -216,17 +216,17 @@ a {
 #launcher:not([session]),
 body[narrow] #launcher[session] {
   display: block; /* display separator and restore button on separate lines */
   text-align: center;
   white-space: nowrap; /* prevent navigational buttons from wrapping */
 }
 
 .launchButton {
-  display: -moz-box;
+  display: flex;
   -moz-box-orient: vertical;
   margin: 16px 1px;
   padding: 14px 6px;
   min-width: 88px;
   max-width: 176px;
   max-height: 85px;
   vertical-align: top;
   white-space: normal;
diff --git a/browser/base/content/browser.css b/browser/base/content/browser.css
--- a/browser/base/content/browser.css
+++ b/browser/base/content/browser.css
@@ -144,17 +144,17 @@ tabbrowser {
   visibility: hidden; /* temporary space to keep a tab's close button under the cursor */
 }
 
 .tabbrowser-tab {
   -moz-binding: url("chrome://browser/content/tabbrowser.xml#tabbrowser-tab");
 }
 
 .tabbrowser-tab:not([pinned]) {
-  -moz-box-flex: 100;
+  flex: 100;
   max-width: 210px;
   min-width: 100px;
   width: 0;
   transition: min-width 100ms ease-out,
               max-width 100ms ease-out;
 }
 
 .tabbrowser-tab:not([pinned]):not([fadein]) {
@@ -218,17 +218,17 @@ toolbar[overflowable] > .customization-t
 
 toolbar:not([overflowing]) > .overflow-button,
 toolbar[customizing] > .overflow-button {
   display: none;
 }
 
 window:not([chromehidden~="toolbar"]) #nav-bar[nonemptyoverflow] > .overflow-button,
 #nav-bar[customizing][photon-structure] > .overflow-button {
-  display: -moz-box;
+  display: flex;
 }
 
 /* The ids are ugly, but this should be reasonably performant, and
  * using a tagname as the last item would be less so.
  */
 #widget-overflow-list:empty + #widget-overflow-fixed-separator,
 #widget-overflow:not([hasfixeditems]) #widget-overflow-fixed-separator {
   display: none;
@@ -333,21 +333,21 @@ window:not([chromehidden~="toolbar"]) #n
 /* Rules to help integrate SDK widgets */
 toolbaritem[sdkstylewidget="true"] > toolbarbutton,
 toolbarpaletteitem > toolbaritem[sdkstylewidget="true"] > iframe,
 toolbarpaletteitem > toolbaritem[sdkstylewidget="true"] > .toolbarbutton-text {
   display: none;
 }
 
 toolbarpaletteitem:-moz-any([place="palette"], [place="panel"]) > toolbaritem[sdkstylewidget="true"] > toolbarbutton {
-  display: -moz-box;
+  display: flex;
 }
 
 toolbarpaletteitem > toolbaritem[sdkstylewidget="true"][cui-areatype="toolbar"] > .toolbarbutton-text {
-  display: -moz-box;
+  display: flex;
 }
 
 @media not all and (min-resolution: 1.1dppx) {
   .webextension-browser-action {
     list-style-image: var(--webextension-toolbar-image, inherit);
   }
 
   .webextension-browser-action[cui-areatype="menu-panel"],
@@ -411,27 +411,27 @@ toolbarpaletteitem > #personal-bookmarks
 #PlacesToolbarDropIndicatorHolder {
   position: absolute;
   top: 25%;
 }
 
 toolbarpaletteitem > #personal-bookmarks > #bookmarks-toolbar-placeholder,
 #personal-bookmarks[cui-areatype="menu-panel"] > #bookmarks-toolbar-placeholder,
 #personal-bookmarks[cui-areatype="toolbar"][overflowedItem=true] > #bookmarks-toolbar-placeholder {
-  display: -moz-box;
+  display: flex;
 }
 
 #nav-bar-customization-target > #personal-bookmarks,
 toolbar:not(#TabsToolbar) > #wrapper-personal-bookmarks,
 toolbar:not(#TabsToolbar) > #personal-bookmarks {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 #zoom-controls[cui-areatype="toolbar"]:not([overflowedItem=true]) > #zoom-reset-button > .toolbarbutton-text {
-  display: -moz-box;
+  display: flex;
 }
 
 #reload-button:not([displaystop]) + #stop-button,
 #reload-button[displaystop] {
   visibility: collapse;
 }
 
 #PanelUI-feeds > .feed-toolbarbutton:-moz-locale-dir(rtl) {
@@ -537,17 +537,17 @@ html|input.urlbar-input[textoverflow]:no
 .ac-url[actiontype],
 .ac-action:not([actiontype]) {
   display: none;
 }
 
 /* For action items in a noactions popup, show the URL text and hide the action
    text and type icon. */
 #PopupAutoCompleteRichResult[noactions] > richlistbox > richlistitem.overridable-action > .ac-url {
-  display: -moz-box;
+  display: flex;
 }
 #PopupAutoCompleteRichResult[noactions] > richlistbox > richlistitem.overridable-action > .ac-action {
   display: none;
 }
 #PopupAutoCompleteRichResult[noactions] > richlistbox > richlistitem.overridable-action > .ac-type-icon {
   list-style-image: none;
 }
 
@@ -972,17 +972,17 @@ html|*#gcli-output-frame,
 }
 
 #developer-toolbar-toolbox-button[error-count] > .toolbarbutton-icon {
   display: none;
 }
 
 #developer-toolbar-toolbox-button[error-count]:before {
   content: attr(error-count);
-  display: -moz-box;
+  display: flex;
   -moz-box-pack: center;
 }
 
 /* Responsive Mode */
 
 .browserContainer[responsivemode] {
   overflow: auto;
 }
@@ -1026,17 +1026,17 @@ notification[value="translation"] {
    and just show the icon. This is a hack to side-step very weird layout bugs that
    seem to be caused by the indicator stack interacting with the menu panel. */
 #downloads-button[indicator]:not([cui-areatype="menu-panel"]) > .toolbarbutton-badge-stack > image.toolbarbutton-icon,
 #downloads-button[indicator][cui-areatype="menu-panel"] > #downloads-indicator-anchor {
   display: none;
 }
 
 toolbarpaletteitem[place="palette"] > #downloads-button[indicator] > .toolbarbutton-badge-stack > image.toolbarbutton-icon {
-  display: -moz-box;
+  display: flex;
 }
 
 toolbarpaletteitem[place="palette"] > #downloads-button[indicator] > #downloads-indicator-anchor {
   display: none;
 }
 
 /* Combobox dropdown renderer */
 #ContentSelectDropdown > menupopup {
@@ -1200,17 +1200,17 @@ toolbarpaletteitem[place="palette"] > #d
 }
 
 #customization-panelHolder {
   overflow-y: hidden;
 }
 
 #customization-panelWrapper,
 #customization-panelWrapper > .panel-arrowcontent {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 #customization-panelWrapper > .panel-arrowcontent {
   padding: 0 !important;
   overflow: hidden;
 }
 
 #customization-panelHolder > #PanelUI-mainView {
@@ -1257,17 +1257,17 @@ toolbarpaletteitem[dragover] {
 
 #customization-footer {
   display: flex;
   flex-shrink: 0;
   flex-wrap: wrap;
 }
 
 #customization-toolbar-visibility-button > .box-inherit > .button-menu-dropmarker {
-  display: -moz-box;
+  display: flex;
 }
 
 toolbarpaletteitem[place="palette"] {
   width: 10em;
   /* icon (32) + margin (2 * 4) + button padding/border (2 * 4) + label margin (~2) + label
    * line-height (1.5em): */
   height: calc(50px + 1.5em);
   margin-bottom: 5px;
@@ -1276,17 +1276,17 @@ toolbarpaletteitem[place="palette"] {
 }
 
 toolbarpaletteitem[place="palette"][hidden] {
   display: none;
 }
 
 #customization-palette .toolbarpaletteitem-box {
   -moz-box-pack: center;
-  -moz-box-flex: 1;
+  flex: 1;
   width: 10em;
   max-width: 10em;
 }
 
 #main-window[customizing=true] .addon-banner-item,
 #main-window[customizing=true] .panel-banner-item {
   display: none;
 }
diff --git a/browser/base/content/newtab/newTab.css b/browser/base/content/newtab/newTab.css
--- a/browser/base/content/newtab/newTab.css
+++ b/browser/base/content/newtab/newTab.css
@@ -9,19 +9,19 @@ html {
 
 body {
   font: message-box;
   width: 100%;
   height: 100%;
   padding: 0;
   margin: 0;
   background-color: #F9F9F9;
-  display: -moz-box;
+  display: flex;
   position: relative;
-  -moz-box-flex: 1;
+  flex: 1;
   -moz-user-focus: normal;
   -moz-box-orient: vertical;
 }
 
 input {
   font: message-box;
   font-size: 16px;
 }
@@ -52,66 +52,66 @@ input[type=button] {
 
 #newtab-customize-button:dir(rtl) {
   left: 20px;
   right: auto;
 }
 
 /* MARGINS */
 #newtab-vertical-margin {
-  display: -moz-box;
+  display: flex;
   position: relative;
-  -moz-box-flex: 1;
+  flex: 1;
   -moz-box-orient: vertical;
 }
 
 #newtab-margin-undo-container {
-  display: -moz-box;
+  display: flex;
   left: 6px;
   position: absolute;
   top: 6px;
   z-index: 1;
 }
 
 #newtab-margin-undo-container:dir(rtl) {
   left: auto;
   right: 6px;
 }
 
 #newtab-undo-close-button:dir(rtl) {
   float:left;
 }
 
 #newtab-horizontal-margin {
-  display: -moz-box;
-  -moz-box-flex: 1;
+  display: flex;
+  flex: 1;
 }
 
 #newtab-margin-top,
 #newtab-margin-bottom {
-  display: -moz-box;
+  display: flex;
   position: relative;
 }
 
 #newtab-margin-top {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 #newtab-margin-bottom {
-  -moz-box-flex: 2;
+  flex: 2;
 }
 
 .newtab-side-margin {
   min-width: 10px;
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 /* GRID */
 #newtab-grid {
-  -moz-box-flex: 5;
+  flex: 5;
   overflow: hidden;
   text-align: center;
   transition: 100ms ease-out;
   transition-property: opacity;
 }
 
 #newtab-grid[page-disabled] {
   opacity: 0;
@@ -129,32 +129,32 @@ body:not(.compact) #topsites-heading {
 /*
  * If you change the sizes here, make sure you
  * change the preferences:
  * toolkit.pageThumbs.minWidth
  * toolkit.pageThumbs.minHeight
  */
 /* CELLS */
 .newtab-cell {
-  display: -moz-box;
+  display: flex;
   height: 210px;
   margin: 20px 10px 35px;
   width: 290px;
 }
 
 body.compact .newtab-cell {
   width: 110px;
   height: 110px;
   margin: 12px;
 }
 
 /* SITES */
 .newtab-site {
   position: relative;
-  -moz-box-flex: 1;
+  flex: 1;
   transition: 100ms ease-out;
   transition-property: top, left, opacity;
 }
 
 .newtab-site[frozen] {
   position: absolute;
   pointer-events: none;
 }
@@ -224,52 +224,52 @@ body.compact .newtab-cell {
   width: 1px;
   height: 1px;
   background-color: #fff;
   opacity: 0.01;
 }
 
 /* SEARCH */
 #newtab-search-container {
-  display: -moz-box;
+  display: flex;
   position: relative;
   -moz-box-pack: center;
   margin: 55px 0 15px;
 }
 
 body.compact #newtab-search-container {
   margin-top: 0;
   margin-bottom: 80px;
 }
 
 #newtab-search-container[page-disabled] {
   opacity: 0;
   pointer-events: none;
 }
 
 #newtab-search-form {
-  display: -moz-box;
+  display: flex;
   position: relative;
   height: 36px;
-  -moz-box-flex: 1;
+  flex: 1;
   max-width: 600px; /* 2 * (290 cell width + 10 cell margin) */
 }
 
 #newtab-search-icon {
   border: 1px transparent;
   padding: 0;
   margin: 0;
   width: 36px;
   height: 36px;
   background: url("chrome://browser/skin/search-indicator-magnifying-glass.svg") center center no-repeat;
   position: absolute;
 }
 
 #newtab-search-text {
-  -moz-box-flex: 1;
+  flex: 1;
   padding-top: 6px;
   padding-bottom: 6px;
   padding-inline-start: 34px;
   padding-inline-end: 8px;
   background: hsla(0,0%,100%,.9) padding-box;
   border: 1px solid;
   border-spacing: 0;
   border-radius: 2px 0 0 2px;
diff --git a/browser/base/content/tabbrowser.css b/browser/base/content/tabbrowser.css
--- a/browser/base/content/tabbrowser.css
+++ b/browser/base/content/tabbrowser.css
@@ -31,17 +31,17 @@
   display: none;
 }
 
 .tab-sharing-icon-overlay[sharing]:not([selected]),
 .tab-icon-overlay[soundplaying][pinned],
 .tab-icon-overlay[muted][pinned],
 .tab-icon-overlay[blocked][pinned],
 .tab-icon-overlay[crashed] {
-  display: -moz-box;
+  display: flex;
 }
 
 .tab-label {
   white-space: nowrap;
 }
 
 .tab-label-container {
   overflow: hidden;
diff --git a/browser/components/downloads/content/contentAreaDownloadsView.css b/browser/components/downloads/content/contentAreaDownloadsView.css
--- a/browser/components/downloads/content/contentAreaDownloadsView.css
+++ b/browser/components/downloads/content/contentAreaDownloadsView.css
@@ -2,10 +2,10 @@
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
 #downloadsListEmptyDescription {
   display: none;
 }
 
 #downloadsRichListBox:empty + #downloadsListEmptyDescription {
-  display: -moz-box;
+  display: flex;
 }
diff --git a/browser/components/preferences/handlers.css b/browser/components/preferences/handlers.css
--- a/browser/components/preferences/handlers.css
+++ b/browser/components/preferences/handlers.css
@@ -15,17 +15,17 @@
 }
 
 /**
  * Make the icons appear.
  * Note: we display the icon box for every item whether or not it has an icon
  * so the labels of all the items align vertically.
  */
 .actionsMenu > menupopup > menuitem > .menu-iconic-left {
-  display: -moz-box;
+  display: flex;
   min-width: 16px;
 }
 
 listitem.offlineapp {
   -moz-binding: url("chrome://browser/content/preferences/handlers.xml#offlineapp");
 }
 
 /* Apply crisp rendering for favicons at exactly 2dppx resolution */
diff --git a/browser/extensions/mortar/host/pdf/chrome/style/viewer.css b/browser/extensions/mortar/host/pdf/chrome/style/viewer.css
--- a/browser/extensions/mortar/host/pdf/chrome/style/viewer.css
+++ b/browser/extensions/mortar/host/pdf/chrome/style/viewer.css
@@ -778,17 +778,17 @@ html[dir='rtl'] .toolbarButton:first-chi
 
 .toolbarButtonSpacer {
   width: 30px;
   display: inline-block;
   height: 1px;
 }
 
 .toolbarButtonFlexibleSpacer {
-  -moz-box-flex: 1;
+  flex: 1;
   min-width: 30px;
 }
 
 html[dir='ltr'] #findPrevious {
   margin-left: 3px;
 }
 html[dir='ltr'] #findNext {
   margin-right: 3px;
diff --git a/browser/extensions/shield-recipe-client/skin/shared/Heartbeat.css b/browser/extensions/shield-recipe-client/skin/shared/Heartbeat.css
--- a/browser/extensions/shield-recipe-client/skin/shared/Heartbeat.css
+++ b/browser/extensions/shield-recipe-client/skin/shared/Heartbeat.css
@@ -88,17 +88,17 @@ notification.heartbeat {
 }
 
 .heartbeat > .text-link:hover:active {
   color: #006B9D !important;
 }
 
 /* Heartbeat UI Rating Star Classes */
 .heartbeat > #star-rating-container {
-  display: -moz-box;
+  display: flex;
   margin-bottom: 4px;
 }
 
 .heartbeat > #star-rating-container > #star5 {
   -moz-box-ordinal-group: 5;
 }
 
 .heartbeat > #star-rating-container > #star4 {
diff --git a/browser/themes/linux/browser.css b/browser/themes/linux/browser.css
--- a/browser/themes/linux/browser.css
+++ b/browser/themes/linux/browser.css
@@ -45,28 +45,28 @@
   --urlbar-separator-color: ThreeDShadow;
 }
 
 #menubar-items {
   -moz-box-orient: vertical; /* for flex hack */
 }
 
 #main-menubar {
-  -moz-box-flex: 1; /* make menu items expand to fill toolbar height */
+  flex: 1; /* make menu items expand to fill toolbar height */
 }
 
 #navigator-toolbox {
   -moz-appearance: none;
   background-color: transparent;
   border-top: none;
 }
 
 #navigator-toolbox::after {
   content: "";
-  display: -moz-box;
+  display: flex;
   -moz-box-ordinal-group: 101; /* tabs toolbar is 100 */
   border-bottom: 1px solid ThreeDShadow;
 }
 
 #navigator-toolbox:-moz-lwtheme::after {
   border-bottom-color: rgba(0,0,0,.3);
 }
 
diff --git a/browser/themes/linux/downloads/indicator.css b/browser/themes/linux/downloads/indicator.css
--- a/browser/themes/linux/downloads/indicator.css
+++ b/browser/themes/linux/downloads/indicator.css
@@ -39,17 +39,17 @@
 }
 
 toolbar[brighttext] #downloads-button[cui-areatype="toolbar"]:not([attention="success"]) > #downloads-indicator-anchor > #downloads-indicator-icon {
   fill: var(--toolbarbutton-icon-fill-inverted);
 }
 
 #downloads-button[attention="warning"] > .toolbarbutton-badge-stack > .toolbarbutton-badge,
 #downloads-button[attention="severe"] > .toolbarbutton-badge-stack > .toolbarbutton-badge {
-  display: -moz-box;
+  display: flex;
   height: 8px;
   width: 8px;
   min-width: 0;
   border-radius: 50%;
   /* "!important" is necessary to override the rule in toolbarbutton.css */
   margin-top: -1px !important;
   margin-right: -2px !important;
 }
diff --git a/browser/themes/linux/places/editBookmarkOverlay.css b/browser/themes/linux/places/editBookmarkOverlay.css
--- a/browser/themes/linux/places/editBookmarkOverlay.css
+++ b/browser/themes/linux/places/editBookmarkOverlay.css
@@ -5,17 +5,17 @@
 %endif
 /**** folder menulist ****/
 .folder-icon > .menulist-label-box > .menulist-icon {
   width: 16px;
   height: 16px;
 }
 
 .folder-icon > .menu-iconic-left {
-  display: -moz-box;
+  display: flex;
 }
 
 .folder-icon {
   list-style-image: url("moz-icon://stock/gtk-directory?size=menu") !important;
 }
 
 
 /**** expanders ****/
diff --git a/browser/themes/linux/searchbar.css b/browser/themes/linux/searchbar.css
--- a/browser/themes/linux/searchbar.css
+++ b/browser/themes/linux/searchbar.css
@@ -223,17 +223,17 @@ menuitem[cmd="cmd_clearhistory"][disable
   padding: 0;
 }
 
 .searchbar-engine-one-off-item > .button-box > .button-text {
   display: none;
 }
 
 .searchbar-engine-one-off-item > .button-box > .button-icon {
-  display: -moz-box;
+  display: flex;
   margin-inline-end: 0;
   width: 16px;
   height: 16px;
 }
 
 .search-add-engines {
   background-color: var(--arrowpanel-dimmed);
 }
@@ -274,17 +274,17 @@ menuitem[cmd="cmd_clearhistory"][disable
   width: 16px;
   height: 16px;
   margin: -7px -9px 7px 9px;
   list-style-image: url("chrome://browser/skin/badge-add-engine.png");
 }
 
 .addengine-item > .button-box > .button-text,
 .addengine-item[type=menu] > .button-box > .box-inherit > .button-text {
-  -moz-box-flex: 1;
+  flex: 1;
   text-align: start;
   padding-inline-start: 10px;
 }
 
 .addengine-item:not([image]) {
   list-style-image: url("chrome://browser/skin/search-engine-placeholder.png");
 }
 
@@ -294,17 +294,17 @@ menuitem[cmd="cmd_clearhistory"][disable
   }
 
   .addengine-item:not([image]) {
     list-style-image: url("chrome://browser/skin/search-engine-placeholder@2x.png");
   }
 }
 
 .addengine-item[type=menu] > .button-box > .button-menu-dropmarker {
-  display: -moz-box;
+  display: flex;
   -moz-appearance: menuarrow !important;
   list-style-image: none;
 }
 
 .search-panel-tree > .autocomplete-treebody::-moz-tree-cell {
   border-top: none !important;
 }
 
diff --git a/browser/themes/osx/browser.css b/browser/themes/osx/browser.css
--- a/browser/themes/osx/browser.css
+++ b/browser/themes/osx/browser.css
@@ -69,17 +69,17 @@ toolbar:-moz-lwtheme {
 .searchbar-textbox:-moz-lwtheme:not([focused="true"]) {
   opacity: .9;
 }
 %endif
 
 #navigator-toolbox::after {
   -moz-box-ordinal-group: 101; /* tabs toolbar is 100 */
   content: "";
-  display: -moz-box;
+  display: flex;
   border-top: 1px solid hsla(0,0%,100%,.15);
   border-bottom: 1px solid hsla(0,0%,0%,.15);
   margin-top: -2px;
   position: relative;
   z-index: 2; /* navbar is at 1 */
 }
 
 @media (-moz-mac-yosemite-theme) {
@@ -1243,17 +1243,17 @@ html|span.ac-emphasize-text-url {
 
 #editBMPanel_folderMenuList[open="true"],
 #editBMPanel_folderMenuList:hover:active {
   @hudButtonPressed@
 }
 
 #editBMPanel_folderMenuList > .menulist-dropmarker {
   -moz-appearance: none;
-  display: -moz-box;
+  display: flex;
   background-color: transparent;
   border: 0;
   margin: 0;
   padding: 0;
   padding-inline-end: 4px;
   width: 7px;
 }
 
@@ -1411,17 +1411,17 @@ toolbarbutton.chevron > .toolbarbutton-m
   margin: 0;
 }
 
 %include ../shared/tabs.inc.css
 
 .tab-label {
   margin-top: 1px;
   margin-bottom: 0;
-  -moz-box-flex: 1;
+  flex: 1;
   text-align: center;
 }
 
 @media (-moz-mac-yosemite-theme) {
   /* image preloading hack from shared/tabs.inc.css */
   #tabbrowser-tabs::before {
     background-image:
       url(chrome://browser/skin/yosemite/tab-selected-end-inactive.svg),
@@ -1926,17 +1926,17 @@ button.translate-infobar-element[anonid=
 }
 
 button.translate-infobar-element.options-menu-button {
   padding-inline-start: 0.5em !important;
   padding-inline-end: 0em !important;
 }
 
 button.translate-infobar-element.options-menu-button > .button-box > .button-menu-dropmarker {
-  display: -moz-box;
+  display: flex;
   list-style-image: url("chrome://global/skin/icons/glyph-dropdown.png");
   padding: 0 !important;
   margin: 0 !important;
 }
 
 @media (min-resolution: 2dppx) {
   button.translate-infobar-element.options-menu-button > .button-box > .button-menu-dropmarker {
     list-style-image: url("chrome://global/skin/icons/glyph-dropdown@2x.png");
@@ -1972,17 +1972,17 @@ menulist.translate-infobar-element:hover
 }
 
 menulist.translate-infobar-element[open="true"] {
   background-image: linear-gradient(rgba(255,255,255,0.1),
                                     rgba(255,255,255,0.6));
 }
 
 menulist.translate-infobar-element > .menulist-dropmarker {
-  display: -moz-box;
+  display: flex;
   list-style-image: url("chrome://global/skin/icons/glyph-dropdown.png");
 }
 
 @media (min-resolution: 2dppx) {
   menulist.translate-infobar-element > .menulist-dropmarker {
     list-style-image: url("chrome://global/skin/icons/glyph-dropdown@2x.png");
   }
 
@@ -2279,17 +2279,17 @@ html|*.addon-webext-perm-list {
 #main-window[privatebrowsingmode=temporary] .titlebar-placeholder[type="fullscreen-button"],
 #main-window[privatebrowsingmode=temporary] > #titlebar > #titlebar-content > #titlebar-secondary-buttonbox > #titlebar-fullscreen-button {
   margin-left: 0px;
 }
 
 #main-window[privatebrowsingmode=temporary][inFullscreen] .titlebar-placeholder[type="fullscreen-button"] {
   /* Override display:none for .titlebar-placeholder in fullscreen so we can have consistent
      position and padding for the private browsing indicator. */
-  display: -moz-box;
+  display: flex;
 }
 
 #TabsToolbar > .private-browsing-indicator:-moz-locale-dir(rtl) {
   -moz-box-ordinal-group: 0;
 }
 
 %include ../shared/UITour.inc.css
 
diff --git a/browser/themes/osx/downloads/indicator.css b/browser/themes/osx/downloads/indicator.css
--- a/browser/themes/osx/downloads/indicator.css
+++ b/browser/themes/osx/downloads/indicator.css
@@ -42,17 +42,17 @@
 }
 
 toolbar[brighttext] #downloads-indicator-icon {
   fill: var(--toolbarbutton-icon-fill-inverted);
 }
 
 #downloads-button[attention="warning"] > .toolbarbutton-badge-stack > .toolbarbutton-badge,
 #downloads-button[attention="severe"] > .toolbarbutton-badge-stack > .toolbarbutton-badge {
-  display: -moz-box;
+  display: flex;
   height: 8px;
   width: 8px;
   min-width: 0;
   border-radius: 50%;
   /* "!important" is necessary to override the rule in toolbarbutton.css */
   margin-top: -1px !important;
   margin-right: -2px !important;
 }
diff --git a/browser/themes/osx/places/editBookmarkOverlay.css b/browser/themes/osx/places/editBookmarkOverlay.css
--- a/browser/themes/osx/places/editBookmarkOverlay.css
+++ b/browser/themes/osx/places/editBookmarkOverlay.css
@@ -8,17 +8,17 @@
 /**** folder menulist ****/
 .folder-icon > .menulist-label-box > .menulist-icon,
 .folder-icon > .menu-iconic-left > .menu-iconic-icon {
   width: 16px;
   height: 16px;
 }
 
 .folder-icon > .menu-iconic-left {
-  display: -moz-box;
+  display: flex;
 }
 
 .folder-icon {
   list-style-image: url("chrome://global/skin/tree/folder.png") !important;
 }
 
 @media (min-resolution: 2dppx) {
   .folder-icon {
diff --git a/browser/themes/osx/places/places.css b/browser/themes/osx/places/places.css
--- a/browser/themes/osx/places/places.css
+++ b/browser/themes/osx/places/places.css
@@ -142,17 +142,17 @@
 }
 
 #viewButton:-moz-window-inactive {
   border-color: #b6b6b6;
   background-image: linear-gradient(hsla(0,0%,100%,.3),hsla(0,0%,100%,0));
 }
 
 #viewButton .button-menu-dropmarker {
-  display: -moz-box;
+  display: flex;
   list-style-image: url("chrome://global/skin/icons/menulist-dropmarker.png");
 }
 
 #viewButton:focus {
   box-shadow: 0 1px 0 hsla(0, 0%, 0%, .15),
               0 0 0 1px hsla(210, 100%, 60%, .45) inset,
               0 0 0 2px hsla(210, 100%, 60%, .45);
   border-color: hsla(210, 100%, 60%, 1);
diff --git a/browser/themes/osx/searchbar.css b/browser/themes/osx/searchbar.css
--- a/browser/themes/osx/searchbar.css
+++ b/browser/themes/osx/searchbar.css
@@ -256,17 +256,17 @@
   width: 16px;
   height: 16px;
   margin: -7px -9px 7px 9px;
   list-style-image: url("chrome://browser/skin/badge-add-engine.png");
 }
 
 .addengine-item > .button-box > .button-text,
 .addengine-item[type=menu] > .button-box > .box-inherit > .button-text {
-  -moz-box-flex: 1;
+  flex: 1;
   text-align: start;
   padding-inline-start: 10px;
 }
 
 .addengine-item:not([image]) {
   list-style-image: url("chrome://browser/skin/search-engine-placeholder.png");
 }
 
@@ -276,17 +276,17 @@
   }
 
   .addengine-item:not([image]) {
     list-style-image: url("chrome://browser/skin/search-engine-placeholder@2x.png");
   }
 }
 
 .addengine-item[type=menu] > .button-box > .button-menu-dropmarker {
-  display: -moz-box;
+  display: flex;
   -moz-appearance: menuarrow !important;
   list-style-image: none;
 }
 
 .search-panel-tree > .autocomplete-treebody::-moz-tree-cell {
   border-top: none !important;
 }
 
diff --git a/browser/themes/shared/browser.inc.css b/browser/themes/shared/browser.inc.css
--- a/browser/themes/shared/browser.inc.css
+++ b/browser/themes/shared/browser.inc.css
@@ -75,17 +75,17 @@
   background-color: hsla(0,0%,0%,.1);
 }
 
 #urlbar-zoom-button:hover:active {
   background-color: hsla(0,0%,0%,.15);
 }
 
 #urlbar-zoom-button > .toolbarbutton-text {
-  display: -moz-box;
+  display: flex;
 }
 
 #urlbar-zoom-button > .toolbarbutton-icon {
   display: none;
 }
 
 /* Page action button */
 #urlbar-page-action-button {
@@ -129,8 +129,68 @@
 
 .page-action-sendToDevice-device[clientType=desktop] {
   list-style-image: url("chrome://browser/skin/device-desktop.svg");
 }
 
 #page-action-sendToDevice-fxa-button {
   list-style-image: url("chrome://browser/skin/sync.svg");
 }
+
+/* LAYOUT */
+
+/** {
+  -moz-appearance: none;
+  box-sizing: border-box;
+  margin: 0;
+  padding: 0;
+  font-family: sans-serif;
+  font-size: 12px;
+}
+
+html {
+  height: 100%;
+}
+
+body {
+  display: flex;
+  flex-direction: column;
+}*/
+
+box, hbox, vbox, spacer {
+  display: flex;
+  flex-basis: 0;
+  flex-grow: 0;
+  white-space: pre;
+}
+
+spacer {
+  flex-grow: 1;
+}
+
+hbox {
+  flex-direction: row;
+}
+
+vbox {
+  flex-direction: column;
+}
+
+[flex="1"] { flex-grow: 1 }
+[flex="2"] { flex-grow: 2 }
+[flex="3"] { flex-grow: 3 }
+[flex="4"] { flex-grow: 4 }
+[flex="5"] { flex-grow: 5 }
+[flex="6"] { flex-grow: 6 }
+[flex="7"] { flex-grow: 7 }
+[flex="8"] { flex-grow: 8 }
+[flex="9"] { flex-grow: 9 }
+
+[align="start"] { align-items: flex-start }
+[align="center"] { align-items: center }
+[align="end"] { align-items: flex-end }
+[align="baseline"] { align-items: flex-baseline }
+[align="stretch"] { align-items: flex-stretch }
+
+[pack="start"] { justify-content: flex-start }
+[pack="center"] { justify-content: center }
+[pack="end"] { justify-content: flex-end }
+
diff --git a/browser/themes/shared/contextmenu.inc.css b/browser/themes/shared/contextmenu.inc.css
--- a/browser/themes/shared/contextmenu.inc.css
+++ b/browser/themes/shared/contextmenu.inc.css
@@ -1,10 +1,10 @@
 #context-navigation > .menuitem-iconic {
-  -moz-box-flex: 1;
+  flex: 1;
   -moz-box-pack: center;
   -moz-box-align: center;
 }
 
 #context-navigation > .menuitem-iconic > .menu-iconic-left {
   -moz-appearance: none;
 }
 
diff --git a/browser/themes/shared/customizableui/customizeMode.inc.css b/browser/themes/shared/customizableui/customizeMode.inc.css
--- a/browser/themes/shared/customizableui/customizeMode.inc.css
+++ b/browser/themes/shared/customizableui/customizeMode.inc.css
@@ -44,17 +44,17 @@
   -moz-outline-radius: 2.5px;
   outline: 1px dashed transparent;
 }
 
 #main-window[customize-entered] .customization-target:not(:-moz-any(#PanelUI-contents, #TabsToolbar, #toolbar-menubar))::before {
   /* Prevent jumping of tabs when switching a window between inactive and active (bug 853415). */
   -moz-box-ordinal-group: 0;
   content: "";
-  display: -moz-box;
+  display: flex;
   height: 100%;
   left: 0;
   outline-offset: -2px;
   pointer-events: none;
   position: absolute;
   top: 0;
   width: 100%;
 }
@@ -459,17 +459,17 @@ toolbarpaletteitem[place="toolbar"]:not(
 #customization-lwtheme-menu-footer {
   background: linear-gradient(var(--arrowpanel-dimmed) 60%, transparent) border-box;
   border-top: 1px solid var(--arrowpanel-dimmed);
   margin-bottom: -10px;
 }
 
 .customization-lwtheme-menu-footeritem {
   -moz-appearance: none;
-  -moz-box-flex: 1;
+  flex: 1;
   color: inherit;
   border-style: none;
   padding: 10px;
   margin-left: 0;
   margin-right: 0;
 }
 
 .customization-lwtheme-menu-footeritem:hover {
diff --git a/browser/themes/shared/customizableui/customizeTip.inc.css b/browser/themes/shared/customizableui/customizeTip.inc.css
--- a/browser/themes/shared/customizableui/customizeTip.inc.css
+++ b/browser/themes/shared/customizableui/customizeTip.inc.css
@@ -39,17 +39,17 @@
 
 .customization-tipPanel-contentImage {
   margin-top: 25px;
   list-style-image: url(chrome://browser/skin/customizableui/customize-illustration.png);
   min-width: 300px;
   max-width: 300px;
   min-height: 190px;
   max-height: 190px;
-  display: -moz-box;
+  display: flex;
 }
 
 .customization-tipPanel-contentImage:-moz-locale-dir(rtl) {
   list-style-image: url(chrome://browser/skin/customizableui/customize-illustration-rtl.png);
 }
 
 .customization-tipPanel-link {
   -moz-appearance: none;
diff --git a/browser/themes/shared/customizableui/panelUI.inc.css b/browser/themes/shared/customizableui/panelUI.inc.css
--- a/browser/themes/shared/customizableui/panelUI.inc.css
+++ b/browser/themes/shared/customizableui/panelUI.inc.css
@@ -98,17 +98,17 @@
   border-image-slice: 1;
 }
 
 #nav-bar[brighttext] > #PanelUI-button {
   border-image-source: linear-gradient(transparent, rgba(100%,100%,100%,.2) 20%, rgba(100%,100%,100%,.2) 80%, transparent);
 }
 
 #PanelUI-menu-button[badge-status] > .toolbarbutton-badge-stack > .toolbarbutton-badge {
-  display: -moz-box;
+  display: flex;
   height: 10px;
   width: 10px;
   background-size: contain;
   border: none;
 }
 
 #PanelUI-menu-button[badge-status="download-success"] > .toolbarbutton-badge-stack > .toolbarbutton-badge {
   display: none;
@@ -195,28 +195,28 @@
 }
 
 panelmultiview[nosubviews=true] > .panel-viewcontainer > .panel-viewstack > .panel-subviews {
   display: none;
 }
 
 panelview {
   -moz-box-orient: vertical;
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 .panel-subview-body {
   overflow-y: auto;
   overflow-x: hidden;
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 .panel-view-body-unscrollable {
   overflow: hidden;
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 #PanelUI-popup .panel-subview-body {
   margin: -4px;
   padding: 4px 4px;
 }
 
 .panel-subview-header,
@@ -325,17 +325,17 @@ panel[photon] > .panel-arrowcontainer > 
 
 panelview[id^=PanelUI-webext-] {
   overflow: hidden;
 }
 
 panelview:not([mainview]) .toolbarbutton-text,
 .cui-widget-panel toolbarbutton:not([wrap]) > .toolbarbutton-text {
   text-align: start;
-  display: -moz-box;
+  display: flex;
 }
 
 .cui-widget-panel > .panel-arrowcontainer > .panel-arrowcontent {
   padding: 4px 0;
 }
 
 /* START photonpanelview adjustments */
 
@@ -563,21 +563,21 @@ toolbaritem[cui-areatype="menu-panel"][s
   height: 32px;
   min-width: 32px;
   min-height: 32px;
   margin: 0;
   padding: 0;
 }
 
 toolbarpaletteitem[place="palette"] > toolbaritem > toolbarbutton {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 #personal-bookmarks[overflowedItem=true] > #bookmarks-toolbar-placeholder {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 #personal-bookmarks[cui-areatype="toolbar"][overflowedItem=true] > #bookmarks-toolbar-placeholder > .toolbarbutton-icon {
   margin-inline-end: 2px;
 }
 
 #edit-controls@inAnyPanel@ > #copy-button,
 #zoom-controls@inAnyPanel@ > #zoom-reset-button {
@@ -623,17 +623,17 @@ toolbarpaletteitem[place="palette"] > to
 }
 
 .addon-banner-item::after,
 .panel-banner-item::after {
   content: "";
   width: 16px;
   height: 16px;
   margin-inline-end: 16.5px;
-  display: -moz-box;
+  display: flex;
 }
 
 .addon-banner-item {
   background-color: var(--appmenu-yellow-warning-color);
   /* Force border to override `.addon-banner-item` selector below */
   border-top: 1px solid var(--appmenu-yellow-warning-border-color) !important;
   display: flex;
   flex: 1 1 0%;
@@ -733,17 +733,17 @@ toolbarpaletteitem[place="palette"] > to
 
 #appMenu-fxa-label,
 #appMenu-fxa-icon {
   -moz-image-region: rect(0, 16px, 16px, 0);
   list-style-image: url(chrome://browser/skin/sync-horizontalbar.png);
 }
 
 #appMenu-fxa-label {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 #appMenu-fxa-icon[syncstatus="active"] {
   list-style-image: url(chrome://browser/skin/syncProgress-horizontalbar.png);
 }
 
 #appMenu-fxa-status {
   -moz-box-align: center;
@@ -1173,17 +1173,17 @@ panelview .toolbarbutton-1,
   border: none;
 }
 
 .subviewbutton.panel-subview-footer > .menu-text {
   -moz-appearance: none;
   margin-inline-start: 0px !important;
   padding-inline-start: 6px;
   padding-inline-end: 6px;
-  -moz-box-flex: 0;
+  flex: 0;
   text-align: center;
 }
 
 .subviewbutton.panel-subview-footer > .toolbarbutton-icon {
   margin: 0;
 }
 
 panelview:not([mainView]) .subviewbutton.panel-subview-footer > .toolbarbutton-text {
@@ -1295,24 +1295,24 @@ photonpanelmultiview .toolbaritem-combin
   -moz-box-align: center;
   -moz-box-orient: horizontal;
   border: 0;
   border-radius: 0;
   margin-inline-end: 8px;
 }
 
 photonpanelmultiview .toolbaritem-combined-buttons > label {
-  -moz-box-flex: 1;
+  flex: 1;
   font: menu;
   margin: 0;
   padding-inline-start: 36px; /* 12px toolbarbutton padding + 16px icon + 8px label padding start */
 }
 
 photonpanelmultiview .PanelUI-subView .toolbaritem-combined-buttons > .subviewbutton {
-  -moz-box-flex: 0;
+  flex: 0;
   height: auto;
   margin-inline-start: 18px;
   min-width: auto;
   padding: 4px;
 }
 
 #appMenu-zoom-controls > .subviewbutton {
   margin-inline-start: 10px;
@@ -1596,17 +1596,17 @@ toolbarpaletteitem[place="palette"] > #s
 toolbarpaletteitem[haswideitem][place="panel"] + toolbarpaletteitem[haswideitem][place="panel"] {
   margin-top: -1px;
 }
 
 .toolbaritem-combined-buttons@inAnyPanel@ > toolbarbutton {
   border: 0;
   padding: .5em;
   margin: 0;
-  -moz-box-flex: 1;
+  flex: 1;
   min-width: calc(@menuPanelButtonWidth@);
   max-width: calc(@menuPanelButtonWidth@);
   /* We'd prefer to use height: auto here but it leads to layout bugs in the panel. Cope:
      1.2em for line height + 2 * .5em padding + margin on the label (2 * 2px) */
   height: calc(2.2em + 4px);
   max-height: none;
   -moz-box-orient: horizontal;
 }
@@ -1707,17 +1707,17 @@ toolbaritem[overflowedItem=true],
 }
 
 .widget-overflow-list > .toolbaritem-combined-buttons {
   min-height: 28px;
 }
 
 .widget-overflow-list .toolbarbutton-1 > .toolbarbutton-menubutton-button::after {
   content: "";
-  display: -moz-box;
+  display: flex;
   width: 1px;
   height: 18px;
   margin-inline-end: -1px;
   background-image: linear-gradient(hsla(210,54%,20%,.2) 0, hsla(210,54%,20%,.2) 18px);
   background-clip: padding-box;
   background-position: center;
   background-repeat: no-repeat;
   background-size: 1px 18px;
diff --git a/browser/themes/shared/identity-block/identity-block.inc.css b/browser/themes/shared/identity-block/identity-block.inc.css
--- a/browser/themes/shared/identity-block/identity-block.inc.css
+++ b/browser/themes/shared/identity-block/identity-block.inc.css
@@ -135,17 +135,17 @@
   list-style-image: url("chrome://browser/skin/notification-icons.svg#microphone-sharing");
 }
 
 #identity-box[sharing="screen"] > #sharing-icon {
   list-style-image: url("chrome://browser/skin/notification-icons.svg#screen-sharing");
 }
 
 #identity-box[sharing] > #sharing-icon {
-  display: -moz-box;
+  display: flex;
   animation-delay: -1.5s;
 }
 
 #identity-box[sharing] > #identity-icon,
 #sharing-icon {
   animation: 3s linear identity-box-sharing-icon-pulse infinite;
 }
 
diff --git a/browser/themes/shared/incontentprefs-old/preferences.inc.css b/browser/themes/shared/incontentprefs-old/preferences.inc.css
--- a/browser/themes/shared/incontentprefs-old/preferences.inc.css
+++ b/browser/themes/shared/incontentprefs-old/preferences.inc.css
@@ -64,17 +64,17 @@ treecol {
 }
 
 /**
  * We want the last category to always have non-0 getBoundingClientRect().bottom
  * so we can use the value to figure out the max-height of the list in
  * preferences.js, so use collapse instead of display: none; if it's hidden
  */
 #categories > .category[hidden="true"] {
-  display: -moz-box;
+  display: flex;
   visibility: collapse;
 }
 
 #category-general > .category-icon {
   list-style-image: url("chrome://browser/skin/preferences/in-content/icons.svg#general");
 }
 
 #category-search > .category-icon {
@@ -308,17 +308,17 @@ description > html|a {
   background-clip: content-box;
   color: #424e5a;
   font-size: 14px;
   /* `transparent` will use the dialogText color in high-contrast themes and
      when page colors are disabled */
   border: 1px solid transparent;
   border-radius: 3.5px;
   box-shadow: 0 2px 6px 0 rgba(0,0,0,0.3);
-  display: -moz-box;
+  display: flex;
   margin: 0;
   padding: 0;
 }
 
 .dialogBox[resizable="true"] {
   resize: both;
   overflow: hidden;
   min-height: 20em;
@@ -347,24 +347,24 @@ description > html|a {
 }
 
 .dialogBox > .groupbox-body {
   -moz-appearance: none;
   padding: 20px;
 }
 
 .dialogFrame {
-  -moz-box-flex: 1;
+  flex: 1;
   /* Default dialog dimensions */
   width: 66ch;
 }
 
 .largeDialogContainer.doScroll {
   overflow-y: auto;
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 /**
  * End Dialog
  */
 
 /**
  * Font dialog menulist fixes
@@ -405,21 +405,21 @@ description > html|a {
   box-shadow: 0px 0px 0px 1px #ff9500;
 }
 
 #noFxaAccount {
   padding-top: 15px;
 }
 
 #fxaContentWrapper {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 #noFxaGroup {
-  -moz-box-flex: 1;
+  flex: 1;
   margin: 0;
 }
 
 #fxaContentWrapper {
   padding-right: 15px;
 }
 
 #noFxaGroup > vbox,
@@ -428,17 +428,17 @@ description > html|a {
 }
 
 #fxaSyncEngines > vbox:first-child {
   margin-right: 80px;
 }
 
 #fxaSyncComputerName {
   margin-inline-start: 0px;
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 #tosPP-small-ToS {
   margin-bottom: 14px;
 }
 
 #noFxaCaption {
   font-weight: bold;
@@ -481,17 +481,17 @@ description > html|a {
 .fxaAccountBoxButtons {
   margin-bottom: 0 !important;
   margin-top: 11px;
   display: flex;
   align-items: center;
 }
 
 .fxaAccountBoxButtons > * {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 .fxaAccountBoxButtons > button {
   text-align: center;
   padding-left: 11px;
   padding-right: 11px;
   margin: 0;
   min-width: 0;
diff --git a/browser/themes/shared/incontentprefs-old/search.css b/browser/themes/shared/incontentprefs-old/search.css
--- a/browser/themes/shared/incontentprefs-old/search.css
+++ b/browser/themes/shared/incontentprefs-old/search.css
@@ -7,17 +7,17 @@
  }
 
 #defaultEngine > .menulist-label-box > .menulist-icon {
   height: 16px;
 }
 
 /* work around a display: none in Linux's menu.css, see bug 1112310 */
 .searchengine-menuitem > .menu-iconic-left {
-  display: -moz-box;
+  display: flex;
 }
 
 #engineList {
   margin: .5em 0;
 }
 
 #engineList treechildren::-moz-tree-image(engineName) {
   margin-inline-end: 10px;
diff --git a/browser/themes/shared/incontentprefs/preferences.inc.css b/browser/themes/shared/incontentprefs/preferences.inc.css
--- a/browser/themes/shared/incontentprefs/preferences.inc.css
+++ b/browser/themes/shared/incontentprefs/preferences.inc.css
@@ -68,17 +68,17 @@ treecol {
 }
 
 /**
  * We want the last category to always have non-0 getBoundingClientRect().bottom
  * so we can use the value to figure out the max-height of the list in
  * preferences.js, so use collapse instead of display: none; if it's hidden
  */
 #categories > .category[hidden="true"] {
-  display: -moz-box;
+  display: flex;
   visibility: collapse;
 }
 
 #category-general > .category-icon {
   list-style-image: url("chrome://browser/skin/preferences/in-content-new/icons.svg#general");
 }
 
 #category-application > .category-icon {
@@ -313,17 +313,17 @@ groupbox {
   background-clip: content-box;
   color: #424e5a;
   font-size: 14px;
   /* `transparent` will use the dialogText color in high-contrast themes and
      when page colors are disabled */
   border: 1px solid transparent;
   border-radius: 3.5px;
   box-shadow: 0 2px 6px 0 rgba(0,0,0,0.3);
-  display: -moz-box;
+  display: flex;
   margin: 0;
   padding: 0;
 }
 
 .dialogBox[resizable="true"] {
   resize: both;
   overflow: hidden;
   min-height: 20em;
@@ -352,24 +352,24 @@ groupbox {
 }
 
 .dialogBox > .groupbox-body {
   -moz-appearance: none;
   padding: 20px;
 }
 
 .dialogFrame {
-  -moz-box-flex: 1;
+  flex: 1;
   /* Default dialog dimensions */
   width: 66ch;
 }
 
 .largeDialogContainer.doScroll {
   overflow-y: auto;
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 /**
  * End Dialog
  */
 
 /**
  * Font dialog menulist fixes
@@ -410,21 +410,21 @@ groupbox {
   box-shadow: 0px 0px 0px 1px #ff9500;
 }
 
 #noFxaAccount {
   padding-top: 15px;
 }
 
 #fxaContentWrapper {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 #noFxaGroup {
-  -moz-box-flex: 1;
+  flex: 1;
   margin: 0;
 }
 
 #fxaContentWrapper {
   padding-right: 15px;
 }
 
 #noFxaGroup > vbox,
@@ -433,17 +433,17 @@ groupbox {
 }
 
 #fxaSyncEngines > vbox:first-child {
   margin-right: 80px;
 }
 
 #fxaSyncComputerName {
   margin-inline-start: 0px;
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 #tosPP-small-ToS {
   margin-bottom: 14px;
 }
 
 #noFxaCaption {
   font-weight: bold;
@@ -486,17 +486,17 @@ groupbox {
 .fxaAccountBoxButtons {
   margin-bottom: 0 !important;
   margin-top: 11px;
   display: flex;
   align-items: center;
 }
 
 .fxaAccountBoxButtons > * {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 .fxaAccountBoxButtons > button {
   text-align: center;
   padding-left: 11px;
   padding-right: 11px;
   margin: 0;
   min-width: 0;
@@ -651,17 +651,17 @@ groupbox {
   offset-inline-start: calc(50% - 6px);
 }
 
 .search-tooltip-parent {
   position: relative;
 }
 
 menulist[indicator=true] > menupopup menuitem:not([image]) > .menu-iconic-left {
-  display: -moz-box;
+  display: flex;
   width: 10px;
   min-width: auto; /* Override the min-width defined in menu.css */
   height: 10px;
   margin-inline-end: 6px;
 }
 
 menulist[indicator=true] > menupopup menuitem[indicator=true]:not([image]) > .menu-iconic-left {
   background-image: url(chrome://global/skin/icons/search-arrow-indicator.svg);
diff --git a/browser/themes/shared/incontentprefs/search.css b/browser/themes/shared/incontentprefs/search.css
--- a/browser/themes/shared/incontentprefs/search.css
+++ b/browser/themes/shared/incontentprefs/search.css
@@ -7,17 +7,17 @@
  }
 
 #defaultEngine > .menulist-label-box > .menulist-icon {
   height: 16px;
 }
 
 /* work around a display: none in Linux's menu.css, see bug 1112310 */
 .searchengine-menuitem > .menu-iconic-left {
-  display: -moz-box;
+  display: flex;
 }
 
 #engineList {
   margin: .5em 0;
 }
 
 #engineList treechildren::-moz-tree-image(engineName) {
   margin-inline-end: 10px;
diff --git a/browser/themes/shared/notification-icons.inc.css b/browser/themes/shared/notification-icons.inc.css
--- a/browser/themes/shared/notification-icons.inc.css
+++ b/browser/themes/shared/notification-icons.inc.css
@@ -246,17 +246,17 @@ html|*#webRTC-previewVideo {
 .plugin-icon.plugin-blocked {
   list-style-image: url(chrome://browser/skin/notification-icons.svg#plugin-blocked);
   fill: #d92215 !important;
 }
 
 #notification-popup-box[hidden] {
   /* Override display:none to make the pluginBlockedNotification animation work
      when showing the notification repeatedly. */
-  display: -moz-box;
+  display: flex;
   visibility: collapse;
 }
 
 #plugins-notification-icon.plugin-blocked[showing] {
   animation: pluginBlockedNotification 500ms ease 0s 5 alternate both;
 }
 
 @keyframes pluginBlockedNotification {
diff --git a/browser/themes/shared/tabs.inc.css b/browser/themes/shared/tabs.inc.css
--- a/browser/themes/shared/tabs.inc.css
+++ b/browser/themes/shared/tabs.inc.css
@@ -48,17 +48,17 @@
 
 /* The selected tab should appear above adjacent tabs, .tabs-newtab-button and the highlight of #nav-bar */
 .tabbrowser-tab[visuallyselected=true] {
   position: relative;
   z-index: 2;
 }
 
 .tab-background-middle {
-  -moz-box-flex: 1;
+  flex: 1;
   background-clip: padding-box;
   border-left: var(--tab-curve-half-width) solid transparent;
   border-right: var(--tab-curve-half-width) solid transparent;
   margin: 0 calc(-1 * var(--tab-curve-half-width));
 }
 
 .tab-content {
   padding-inline-end: 9px;
@@ -322,25 +322,25 @@
 
 
 .tab-background-start[selected=true]::after,
 .tab-background-end[selected=true]::after {
   /* position ::after on top of its parent */
   margin-inline-start: calc(-1 * var(--tab-curve-width));
   background-size: 100% 100%;
   content: "";
-  display: -moz-box;
+  display: flex;
   position: relative;
 }
 
 .tab-background-start[selected=true]::before,
 .tab-background-end[selected=true]::before {
   /* all ::before pseudo elements */
   content: "";
-  display: -moz-box;
+  display: flex;
 }
 
 .tab-background-start[selected=true]:-moz-locale-dir(ltr):not(:-moz-lwtheme)::before,
 .tab-background-end[selected=true]:-moz-locale-dir(rtl):not(:-moz-lwtheme)::before {
   background-image: url(chrome://browser/skin/tabbrowser/tab-selected-start.svg);
   background-size: 100% 100%;
 }
 
@@ -512,17 +512,17 @@
   opacity: 0.4;
 }
 
 /* Also show separators beside the selected tab when dragging it. */
 #tabbrowser-tabs[movingtab] > .tabbrowser-tab[beforeselected]:not([last-visible-tab])::after,
 .tabbrowser-tab:not([selected]):not([afterselected-visible]):not([afterhovered]):not([first-visible-tab]):not(:hover)::before,
 #tabbrowser-tabs:not([overflow]) > .tabbrowser-tab[last-visible-tab]:not([selected]):not([beforehovered]):not(:hover)::after {
   content: "";
-  display: -moz-box;
+  display: flex;
 }
 
 /* New tab button */
 
 .tabs-newtab-button {
   width: calc(36px + var(--tab-curve-width));
 }
 
@@ -649,11 +649,11 @@
   background-color: hsl(0,0%,100%,.27);
 }
 
 .restore-tabs-button > .toolbarbutton-icon {
   display: none;
 }
 
 .restore-tabs-button > .toolbarbutton-text {
-  display: -moz-box;
+  display: flex;
   padding: 0 5px;
 }
diff --git a/browser/themes/shared/toolbarbuttons.inc.css b/browser/themes/shared/toolbarbuttons.inc.css
--- a/browser/themes/shared/toolbarbuttons.inc.css
+++ b/browser/themes/shared/toolbarbuttons.inc.css
@@ -256,17 +256,17 @@ toolbarbutton.bookmark-item:not(.subview
 #nav-bar .toolbaritem-combined-buttons > .toolbarbutton-1 {
   padding-left: 0;
   padding-right: 0;
 }
 
 #nav-bar .toolbaritem-combined-buttons:not(:hover) > separator,
 #nav-bar .toolbarbutton-1:not(:hover):not(:active):not([open]) > .toolbarbutton-menubutton-dropmarker::before {
   content: "";
-  display: -moz-box;
+  display: flex;
   width: 1px;
   height: 16px;
   margin-inline-end: -1px;
   background-image: linear-gradient(currentColor 0, currentColor 100%);
   background-position: center;
   background-repeat: no-repeat;
   background-size: 1px 16px;
   opacity: .2;
diff --git a/browser/themes/shared/webRTC-indicator.css b/browser/themes/shared/webRTC-indicator.css
--- a/browser/themes/shared/webRTC-indicator.css
+++ b/browser/themes/shared/webRTC-indicator.css
@@ -39,33 +39,33 @@ window {
   background-position: center center;
   background-repeat: no-repeat;
   background-size: 16px;
   min-width: 27px;
   display: none;
 }
 
 window[sharingscreen] > #screenShareButton {
-  display: -moz-box;
+  display: flex;
 }
 
 #audioVideoButton {
   display: none;
   background-repeat: no-repeat;
 }
 
 /* When screen sharing, need to pull in the separator: */
 window[sharingscreen] > #audioVideoButton {
   margin-right: -1px;
 }
 
 /* Single icon button: */
 window[sharingvideo] > #audioVideoButton,
 window[sharingaudio] > #audioVideoButton {
-  display: -moz-box;
+  display: flex;
   background-position: center center;
   background-size: 16px;
   min-width: 26px;
 }
 
 window[sharingvideo] > #audioVideoButton {
   background-image: url("chrome://browser/skin/notification-icons.svg#camera-indicator");
 }
@@ -108,15 +108,15 @@ window[sharingaudio][sharingvideo] > #au
   /* Separator needs to show above either button when they're hovered: */
   position: relative;
   z-index: 1;
   display: none;
 }
 
 window[sharingscreen][sharingvideo] > #shareSeparator,
 window[sharingscreen][sharingaudio] > #shareSeparator {
-  display: -moz-box;
+  display: flex;
 }
 
 :-moz-any(#audioVideoButton, #screenShareButton,
           #firefoxButton):-moz-focusring {
   outline: none;
 }
diff --git a/browser/themes/windows/browser-aero.css b/browser/themes/windows/browser-aero.css
--- a/browser/themes/windows/browser-aero.css
+++ b/browser/themes/windows/browser-aero.css
@@ -321,17 +321,17 @@
     #main-window[customizing] #navigator-toolbox::after {
       box-shadow: 1px 0 0 @toolbarShadowColor@, -1px 0 0 @toolbarShadowColor@;
       margin-left: 1px;
       margin-right: 1px;
     }
 
     #main-window[sizemode=normal] #browser-border-start,
     #main-window[sizemode=normal] #browser-border-end {
-      display: -moz-box;
+      display: flex;
       background-color: @toolbarShadowColor@;
       width: 1px;
     }
 
     #main-window[sizemode=normal] #browser-bottombox {
       border: 1px solid @toolbarShadowColor@;
       border-top-style: none;
       background-clip: padding-box;
@@ -391,17 +391,17 @@
     /* Because we use placeholders for window controls etc. in the tabstrip,
      * and position those with ordinal attributes, and because our layout code
      * expects :before/:after nodes to come first/last in the frame list,
      * we have to reorder this element to come last, hence the
      * ordinal group value (see bug 853415). */
     -moz-box-ordinal-group: 1001;
     box-shadow: 0 0 30px 30px rgba(174,189,204,0.85);
     content: "";
-    display: -moz-box;
+    display: flex;
     height: 0;
     margin: 0 60px; /* (30px + 30px) from box-shadow */
     position: absolute;
     pointer-events: none;
     top: 50%;
     width: -moz-available;
     z-index: -1;
   }
diff --git a/browser/themes/windows/browser.css b/browser/themes/windows/browser.css
--- a/browser/themes/windows/browser.css
+++ b/browser/themes/windows/browser.css
@@ -76,17 +76,17 @@ toolbar[brighttext] {
   --toolbarbutton-checkedhover-backgroundcolor: rgba(255,255,255,.3);
 }
 %endif
 #menubar-items {
   -moz-box-orient: vertical; /* for flex hack */
 }
 
 #main-menubar {
-  -moz-box-flex: 1; /* make menu items expand to fill toolbar height */
+  flex: 1; /* make menu items expand to fill toolbar height */
 }
 
 /* Hides the titlebar-placeholder underneath the window caption buttons when we
    are not autohiding the menubar. */
 #toolbar-menubar:not([autohide="true"]) + #TabsToolbar > .titlebar-placeholder[type="caption-buttons"] {
   display: none;
 }
 
@@ -106,17 +106,17 @@ toolbar[brighttext] {
 %endif
 #navigator-toolbox,
 #navigator-toolbox > toolbar {
   -moz-appearance: none;
 }
 
 #navigator-toolbox::after {
   content: "";
-  display: -moz-box;
+  display: flex;
   -moz-box-ordinal-group: 101; /* tabs toolbar is 100 */
   border-bottom: 1px solid ThreeDShadow;
 }
 
 @media (-moz-windows-default-theme) {
 %ifndef MOZ_PHOTON_THEME
   @media (-moz-os-version: windows-win7) {
     #navigator-toolbox::after {
@@ -229,17 +229,17 @@ toolbar[brighttext] {
     /* Because we use placeholders for window controls etc. in the tabstrip,
      * and position those with ordinal attributes, and because our layout code
      * expects :before/:after nodes to come first/last in the frame list,
      * we have to reorder this element to come last, hence the
      * ordinal group value (see bug 853415). */
     -moz-box-ordinal-group: 1001;
     box-shadow: 0 0 50px 8px ActiveCaption;
     content: "";
-    display: -moz-box;
+    display: flex;
     height: 0;
     margin: 0 50px;
     position: absolute;
     pointer-events: none;
     top: 100%;
     width: -moz-available;
   }
 
@@ -1891,17 +1891,17 @@ notification.pluginVulnerable > .notific
   position: absolute;
 }
 
 #main-window[privatebrowsingmode=temporary][tabsintitlebar] #private-browsing-indicator-titlebar > .private-browsing-indicator {
   display: block;
 }
 
 #main-window[privatebrowsingmode=temporary]:-moz-any([inFullscreen],:not([tabsintitlebar])) #TabsToolbar > .private-browsing-indicator {
-  display: -moz-box;
+  display: flex;
 }
 
 #TabsToolbar > .private-browsing-indicator {
   background: url("chrome://browser/skin/privatebrowsing-mask-tabstrip.png") no-repeat center -3px;
   margin-inline-start: 4px;
   width: 48px;
 }
 
diff --git a/browser/themes/windows/downloads/indicator.css b/browser/themes/windows/downloads/indicator.css
--- a/browser/themes/windows/downloads/indicator.css
+++ b/browser/themes/windows/downloads/indicator.css
@@ -39,17 +39,17 @@
 }
 
 toolbar[brighttext] #downloads-button:not([attention="success"]) > #downloads-indicator-anchor > #downloads-indicator-icon {
   fill: var(--toolbarbutton-icon-fill-inverted);
 }
 
 #downloads-button[attention="warning"] > .toolbarbutton-badge-stack > .toolbarbutton-badge,
 #downloads-button[attention="severe"] > .toolbarbutton-badge-stack > .toolbarbutton-badge {
-  display: -moz-box;
+  display: flex;
   height: 8px;
   width: 8px;
   min-width: 0;
   border-radius: 50%;
   /* "!important" is necessary to override the rule in toolbarbutton.css */
   margin-top: -1px !important;
   margin-right: -2px !important;
 }
diff --git a/browser/themes/windows/places/editBookmarkOverlay.css b/browser/themes/windows/places/editBookmarkOverlay.css
--- a/browser/themes/windows/places/editBookmarkOverlay.css
+++ b/browser/themes/windows/places/editBookmarkOverlay.css
@@ -4,17 +4,17 @@
 
 /**** folder menulist ****/
 .folder-icon > .menulist-label-box > .menulist-icon {
   width: 16px;
   height: 16px;
 }
 
 .folder-icon > .menu-iconic-left {
-  display: -moz-box;
+  display: flex;
 }
 
 .folder-icon {
   list-style-image: url("chrome://global/skin/icons/folder-item.png") !important;
   -moz-image-region: rect(0px, 32px, 16px, 16px) !important;
 }
 
 
diff --git a/browser/themes/windows/searchbar.css b/browser/themes/windows/searchbar.css
--- a/browser/themes/windows/searchbar.css
+++ b/browser/themes/windows/searchbar.css
@@ -271,17 +271,17 @@
   width: 16px;
   height: 16px;
   margin: -7px -9px 7px 9px;
   list-style-image: url("chrome://browser/skin/badge-add-engine.png");
 }
 
 .addengine-item > .button-box > .button-text,
 .addengine-item[type=menu] > .button-box > .box-inherit > .button-text {
-  -moz-box-flex: 1;
+  flex: 1;
   text-align: start;
   padding-inline-start: 10px;
 }
 
 .addengine-item:not([image]) {
   list-style-image: url("chrome://browser/skin/search-engine-placeholder.png");
 }
 
@@ -291,17 +291,17 @@
   }
 
   .addengine-item:not([image]) {
     list-style-image: url("chrome://browser/skin/search-engine-placeholder@2x.png");
   }
 }
 
 .addengine-item[type=menu] > .button-box > .button-menu-dropmarker {
-  display: -moz-box;
+  display: flex;
   -moz-appearance: menuarrow !important;
   list-style-image: none;
 }
 
 .search-panel-tree > .autocomplete-treebody::-moz-tree-cell {
   border-top: none !important;
 }
 
diff --git a/devtools/client/debugger/debugger.css b/devtools/client/debugger/debugger.css
--- a/devtools/client/debugger/debugger.css
+++ b/devtools/client/debugger/debugger.css
@@ -20,21 +20,21 @@
 
 /* Horizontal vs. vertical layout */
 
 #body[layout=vertical] #debugger-widgets {
   -moz-box-orient: vertical;
 }
 
 #body[layout=vertical] #workers-and-sources-pane {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 #body[layout=vertical] #instruments-pane {
-  -moz-box-flex: 2;
+  flex: 2;
 }
 
 #body[layout=vertical] #instruments-pane-toggle {
   display: none;
 }
 
 #body[layout=vertical] #sources-and-editor-splitter,
 #body[layout=vertical] #editor-and-instruments-splitter {
diff --git a/devtools/client/shared/splitview.css b/devtools/client/shared/splitview.css
--- a/devtools/client/shared/splitview.css
+++ b/devtools/client/shared/splitview.css
@@ -1,83 +1,83 @@
 /* vim:set ts=2 sw=2 sts=2 et: */
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
 box,
 .splitview-nav {
-  -moz-box-flex: 1;
+  flex: 1;
   -moz-box-orient: vertical;
 }
 
 .splitview-nav-container {
   -moz-box-pack: center;
 }
 
 .loading .splitview-nav-container > .placeholder {
   display: none !important;
 }
 
 .splitview-controller,
 .splitview-main {
-  -moz-box-flex: 0;
+  flex: 0;
 }
 
 .splitview-controller {
   min-height: 3em;
   max-height: 14em;
   max-width: 400px;
   min-width: 200px;
 }
 
 .splitview-nav {
-  display: -moz-box;
+  display: flex;
   overflow-x: hidden;
   overflow-y: auto;
 }
 
 /* only the active details pane is shown */
 .splitview-side-details > * {
   display: none;
 }
 .splitview-side-details > .splitview-active {
-  display: -moz-box;
+  display: flex;
 }
 
 /* this is to keep in sync with SplitView.jsm's LANDSCAPE_MEDIA_QUERY */
 @media (min-width: 701px) {
   .splitview-root {
     -moz-box-orient: horizontal;
   }
   .splitview-controller {
     max-height: none;
   }
   .splitview-details {
     display: none;
   }
   .splitview-details.splitview-active {
-    display: -moz-box;
+    display: flex;
   }
 }
 
 /* filtered items are hidden */
 ol.splitview-nav > li.splitview-filtered {
   display: none;
 }
 
 /* "empty list" and "all filtered" placeholders are hidden */
 .splitview-nav:empty,
 .splitview-nav.splitview-all-filtered,
 .splitview-nav + .splitview-nav.placeholder {
   display: none;
 }
 .splitview-nav.splitview-all-filtered ~ .splitview-nav.placeholder.all-filtered,
 .splitview-nav:empty ~ .splitview-nav.placeholder.empty {
-  display: -moz-box;
+  display: flex;
 }
 
 /* portrait mode */
 @media (max-width: 700px) {
   .splitview-controller {
     max-width: none;
   }
 }
diff --git a/devtools/client/themes/common.css b/devtools/client/themes/common.css
--- a/devtools/client/themes/common.css
+++ b/devtools/client/themes/common.css
@@ -500,17 +500,17 @@ checkbox:-moz-focusring {
 .devtools-toolbar > .devtools-searchbox:first-child {
   padding-inline-start: 0;
 }
 .devtools-toolbar > .devtools-searchbox:last-child {
   padding-inline-end: 0;
 }
 
 .devtools-rule-searchbox {
-  -moz-box-flex: 1;
+  flex: 1;
   width: 100%;
 }
 
 .devtools-filterinput:-moz-any([filled],.filled) {
   background-color: var(--searchbox-background-color);
   border-color: var(--searchbox-border-color);
 }
 
diff --git a/devtools/client/themes/debugger.css b/devtools/client/themes/debugger.css
--- a/devtools/client/themes/debugger.css
+++ b/devtools/client/themes/debugger.css
@@ -624,17 +624,17 @@
   border-bottom: none;
   padding: 2px 4px;
   background: var(--theme-header-background);
   font-weight: bold;
 }
 
 /* Sections titles (toolbars) in Variables panel they have different height */
 .theme-firebug #variables-tabpanel .title.devtools-toolbar {
-  display: -moz-box;
+  display: flex;
   height: 20px !important;
 }
 
 /* Firebug theme support for the Callstack Panel */
 
 .theme-firebug #callstack-list {
   font-family: var(--proportional-font-family);
 }
diff --git a/devtools/client/themes/firebug-theme.css b/devtools/client/themes/firebug-theme.css
--- a/devtools/client/themes/firebug-theme.css
+++ b/devtools/client/themes/firebug-theme.css
@@ -77,17 +77,17 @@
   margin: 3px 0 -1px 0;
   padding: 1px 4px !important;
   padding-inline-end: 0 !important;
   border: 1px solid transparent !important;
   border-bottom: none !important;
   border-radius: 4px 4px 0 0;
   font-weight: bold;
   color: var(--theme-body-color);
-  -moz-box-flex: initial;
+  flex: initial;
   min-width: 0;
 }
 
 /* For toolbox tabs, the negative margin is applied on the container
    instead of the tab to avoid triggering y-overflow on the container
    that causes the overflow menu to display */
 
 .theme-firebug .devtools-tab {
diff --git a/devtools/client/themes/jit-optimizations.css b/devtools/client/themes/jit-optimizations.css
--- a/devtools/client/themes/jit-optimizations.css
+++ b/devtools/client/themes/jit-optimizations.css
@@ -24,18 +24,18 @@
 }
 
 #jit-optimizations-view > div {
   /* For elements that need to flex to fill the available space and/or
    * scroll on overflow, we need to use the old flexbox model, since the
    * parent nodes are in the XUL namespace. The new flexbox model can't
    * properly compute dimensions and will ignore `flex: ${number}` properties,
    * since no other parent node has a flex display. */
-  display: -moz-box;
-  -moz-box-flex: 1;
+  display: flex;
+  flex: 1;
   -moz-box-orient: vertical;
 }
 
 #jit-optimizations-view .optimization-header,
 #jit-optimizations-view .tree * {
   /* We can, however, display child nodes as flex to take advantage of
    * horizontal/vertical inlining. */
   display: flex;
@@ -48,18 +48,18 @@
 }
 
 #jit-optimizations-view .header-title {
   font-weight: bold;
   padding-inline-end: 7px;
 }
 
 #jit-optimizations-view .tree {
-  display: -moz-box;
-  -moz-box-flex: 1;
+  display: flex;
+  flex: 1;
   -moz-box-orient: vertical;
   overflow: auto;
   background-color: var(--theme-body-background);
 }
 
 #jit-optimizations-view .tree-node {
   height: var(--jit-tree-row-height);
 }
diff --git a/devtools/client/themes/performance.css b/devtools/client/themes/performance.css
--- a/devtools/client/themes/performance.css
+++ b/devtools/client/themes/performance.css
@@ -446,26 +446,26 @@
 }
 
 /**
  * Waterfall markers tree
  */
 
 #waterfall-tree {
   /* DE-XUL: convert this to display: flex once performance.xul is converted to HTML */
-  display: -moz-box;
+  display: flex;
   -moz-box-orient: vertical;
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 .waterfall-markers {
   /* DE-XUL: convert this to display: flex once performance.xul is converted to HTML */
-  display: -moz-box;
+  display: flex;
   -moz-box-orient: vertical;
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 .waterfall-header {
   display: flex;
 }
 
 .waterfall-header-ticks {
   display: flex;
@@ -499,19 +499,19 @@
 }
 
 /**
  * Markers waterfall breakdown
  */
 
 .waterfall-markers .tree {
   /* DE-XUL: convert this to display: flex once performance.xul is converted to HTML */
-  display: -moz-box;
+  display: flex;
   -moz-box-orient: vertical;
-  -moz-box-flex: 1;
+  flex: 1;
   overflow-x: hidden;
   overflow-y: auto;
   --waterfall-tree-row-height: 15px;
 }
 
 .waterfall-markers .tree-node {
   display: flex;
   height: var(--waterfall-tree-row-height);
diff --git a/devtools/client/themes/responsivedesign.css b/devtools/client/themes/responsivedesign.css
--- a/devtools/client/themes/responsivedesign.css
+++ b/devtools/client/themes/responsivedesign.css
@@ -120,17 +120,17 @@
 }
 
 .devtools-responsiveui-menulist > .menulist-label-box {
   text-align: center;
 }
 
 .devtools-responsiveui-menulist > .menulist-dropmarker {
   -moz-appearance: none;
-  display: -moz-box;
+  display: flex;
   background-color: transparent;
   list-style-image: url("chrome://devtools/skin/images/dropmarker.svg");
   -moz-box-align: center;
   border-width: 0;
   min-width: 16px;
 }
 
 .devtools-responsiveui-toolbarbutton[type=menu-button] > .toolbarbutton-menubutton-button {
diff --git a/devtools/client/themes/splitview.css b/devtools/client/themes/splitview.css
--- a/devtools/client/themes/splitview.css
+++ b/devtools/client/themes/splitview.css
@@ -32,17 +32,17 @@
   padding-inline-end: 8px;
   -moz-box-align: center;
   outline: 0;
   vertical-align: bottom;
   border-bottom: 1px solid rgba(128,128,128,0.15);
 }
 
 .placeholder {
-  -moz-box-flex: 1;
+  flex: 1;
   text-align: center;
 }
 
 .splitview-nav > li.splitview-active {
   background-color: var(--theme-selection-background);
   color: var(--theme-selection-color);
   background-image: var(--sidemenu-selected-arrow);
   background-repeat: no-repeat;
diff --git a/devtools/client/themes/styleeditor.css b/devtools/client/themes/styleeditor.css
--- a/devtools/client/themes/styleeditor.css
+++ b/devtools/client/themes/styleeditor.css
@@ -1,40 +1,40 @@
 /* vim:set ts=2 sw=2 sts=2 et: */
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
 #style-editor-chrome {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 .splitview-nav > li,
 .stylesheet-info,
 .stylesheet-more,
 .stylesheet-rule-count,
 li.splitview-active > hgroup > .stylesheet-more > h3 > .stylesheet-saveButton,
 li:hover > hgroup > .stylesheet-more > h3 > .stylesheet-saveButton {
-  display: -moz-box;
+  display: flex;
 }
 
 .devtools-toolbar > spacer {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 .style-editor-newButton {
   list-style-image: url(images/add.svg);
 }
 
 .style-editor-importButton {
   list-style-image: url(images/import.svg);
 }
 
 .stylesheet-details-container {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 .stylesheet-media-container {
   overflow-y: auto;
 }
 
 .stylesheet-error-message {
   display: none;
@@ -55,25 +55,25 @@ li.error > .stylesheet-info > .styleshee
 }
 
 .stylesheet-name > label {
   display: inline;
   cursor: pointer;
 }
 
 .stylesheet-info > h1 {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 .splitview-nav > li > hgroup.stylesheet-info {
   -moz-box-pack: center;
 }
 
 .stylesheet-more > spacer {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 .theme-dark .stylesheet-title,
 .theme-dark .stylesheet-name {
   color: var(--theme-selection-color);
 }
 
 .theme-dark .stylesheet-rule-count,
@@ -113,19 +113,19 @@ li.error > .stylesheet-info > .styleshee
   outline: 0; /* focus ring is on the stylesheet name */
 }
 
 .splitview-nav > li {
   -moz-box-orient: horizontal;
 }
 
 .splitview-nav > li > hgroup {
-  display: -moz-box;
+  display: flex;
   -moz-box-orient: vertical;
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 .splitview-nav > li.unsaved > hgroup .stylesheet-name {
   font-style: italic;
 }
 
 .splitview-nav:-moz-locale-dir(ltr) > li.unsaved > hgroup .stylesheet-name:before,
 .splitview-nav:-moz-locale-dir(rtl) > li.unsaved > hgroup .stylesheet-name:after {
@@ -171,17 +171,17 @@ li.error > .stylesheet-info > .styleshee
 }
 
 .media-rule-condition {
   flex: 1;
   overflow: hidden;
 }
 
 .stylesheet-enabled {
-  display: -moz-box;
+  display: flex;
   cursor: pointer;
   padding: 8px 0;
   margin: 0 8px;
   background-image: url(images/item-toggle.svg);
   background-repeat: no-repeat;
   background-clip: content-box;
   background-position: center;
   background-size: 16px;
@@ -283,45 +283,45 @@ h3 {
 
   .disabled > .stylesheet-enabled {
     background-position: -24px 0;
   }
 
   .splitview-nav > li > hgroup.stylesheet-info {
     -moz-box-align: baseline;
     -moz-box-orient: horizontal;
-    -moz-box-flex: 1;
+    flex: 1;
   }
 
   .stylesheet-sidebar {
     width: 180px;
   }
 
   .stylesheet-more {
-    -moz-box-flex: 1;
+    flex: 1;
     -moz-box-pack: end;
   }
 
   .stylesheet-more > spacer {
-    -moz-box-flex: 0;
+    flex: 0;
   }
 }
 
 /* CSS coverage */
 .csscoverage-report {
   background-color: var(--theme-toolbar-background);
   -moz-box-orient: horizontal;
 }
 
 .csscoverage-report-container {
   height: 100vh;
   padding: 0 10px;
   overflow-x: hidden;
   overflow-y: auto;
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 .csscoverage-report-content {
   margin: 20px auto;
   -moz-column-width: 300px;
   font-size: 13px;
   -moz-user-select: text;
 }
diff --git a/devtools/client/themes/toolbars.css b/devtools/client/themes/toolbars.css
--- a/devtools/client/themes/toolbars.css
+++ b/devtools/client/themes/toolbars.css
@@ -141,17 +141,17 @@
    * then we need to take the border of the buttons into account (1px).
    */
   padding: 0 3px;
   margin: 0;
   min-width: 78px;
   text-align: center;
   background-color: transparent;
   color: inherit;
-  -moz-box-flex: 1;
+  flex: 1;
   border-width: 0;
   border-inline-start-width: 1px;
   border-style: solid;
   border-radius: 0;
   position: static;
   text-shadow: none;
 }
 
diff --git a/devtools/client/themes/toolbox.css b/devtools/client/themes/toolbox.css
--- a/devtools/client/themes/toolbox.css
+++ b/devtools/client/themes/toolbox.css
@@ -137,17 +137,17 @@
 }
 
 .devtools-tab-icon-only {
   min-width: 24px;
 }
 
 /* Save space on the tab-strip in Firebug theme */
 .theme-firebug .devtools-tab {
-  -moz-box-flex: initial;
+  flex: initial;
 }
 
 .theme-dark .devtools-tab {
   color: var(--theme-body-color-alt);
   border-color: #42484f;
 }
 
 .theme-light .devtools-tab {
@@ -396,18 +396,18 @@
 
 #command-button-frames:-moz-locale-dir(rtl) {
   background-position: left;
 }
 
 /* Toolbox panels */
 
 .toolbox-panel {
-  display: -moz-box;
-  -moz-box-flex: 1;
+  display: flex;
+  flex: 1;
   visibility: collapse;
 }
 
 .toolbox-panel[selected] {
   visibility: visible;
 }
 
 /**
diff --git a/devtools/client/themes/webaudioeditor.css b/devtools/client/themes/webaudioeditor.css
--- a/devtools/client/themes/webaudioeditor.css
+++ b/devtools/client/themes/webaudioeditor.css
@@ -14,17 +14,17 @@
 
 #waiting-notice {
   font-size: 110%;
 }
 
 /* Context Graph */
 svg {
   overflow: hidden;
-  -moz-box-flex: 1;
+  flex: 1;
   --arrow-color: var(--theme-splitter-color);
   --text-color: var(--theme-body-color-alt);
 }
 
 .theme-dark svg {
   --arrow-color: var(--theme-body-color-alt);
 }
 
@@ -152,17 +152,17 @@ text {
 
 #automation-param-toolbar .automation-param-button[selected] {
   color: var(--theme-selection-color);
   background-color: var(--theme-selection-background);
 }
 
 #automation-graph {
   overflow: hidden;
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 @media (min-resolution: 1.1dppx) {
   .web-audio-inspector .error {
     background-image: url(images/alerticon-warning@2x.png);
   }
 }
 
diff --git a/devtools/client/themes/webconsole.css b/devtools/client/themes/webconsole.css
--- a/devtools/client/themes/webconsole.css
+++ b/devtools/client/themes/webconsole.css
@@ -629,17 +629,17 @@ a.learn-more-link.webconsole-learn-more-
 }
 
 .devtools-toolbarbutton > .toolbarbutton-menubutton-button > .toolbarbutton-icon {
   margin-inline-end: 4px;
 }
 
 .devtools-menulist > .menulist-dropmarker {
   -moz-appearance: none;
-  display: -moz-box;
+  display: flex;
   list-style-image: url("chrome://devtools/skin/images/dropmarker.svg");
   -moz-box-align: center;
   min-width: 16px;
 }
 
 .devtools-toolbarbutton[type=menu] > .toolbarbutton-menu-dropmarker,
 .devtools-toolbarbutton[type=menu-button] > .toolbarbutton-menubutton-dropmarker {
   -moz-appearance: none !important;
@@ -671,17 +671,17 @@ a.learn-more-link.webconsole-learn-more-
   }
 }
 
 @media (max-width: 300px) {
   .hud-console-filter-toolbar {
     -moz-box-orient: vertical;
   }
   .toolbarbutton-text {
-    display: -moz-box;
+    display: flex;
   }
   .devtools-toolbarbutton {
     margin-top: 3px;
   }
   .hud-console-filter-toolbar .hud-filter-box,
   .hud-console-filter-toolbar .devtools-toolbarbutton {
     margin-top: 5px;
   }
diff --git a/devtools/client/themes/widgets.css b/devtools/client/themes/widgets.css
--- a/devtools/client/themes/widgets.css
+++ b/devtools/client/themes/widgets.css
@@ -741,21 +741,21 @@ widgets.css is overwritten. */
 .variable-or-property:not(:focus) > .title > .variable-or-property-sealed-label,
 .variable-or-property:not(:focus) > .title > .variable-or-property-non-extensible-label {
   color: #666;
 }
 
 /* Aligned values */
 
 .variables-view-container[aligned-values] .title > .separator {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 .variables-view-container[aligned-values] .title > .value {
-  -moz-box-flex: 0;
+  flex: 0;
   width: 70vw;
 }
 
 .variables-view-container[aligned-values] .title > .element-value-input {
   width: calc(70vw - 10px);
 }
 
 /* Actions first */
diff --git a/gfx/tests/crashtests/783041-2.html b/gfx/tests/crashtests/783041-2.html
--- a/gfx/tests/crashtests/783041-2.html
+++ b/gfx/tests/crashtests/783041-2.html
@@ -25,17 +25,17 @@
         text-shadow: 0px 20px 0px, 0px -20px 10px;
         line-height: 4px;
         transform: translate3d(0px, -300px, 0px);
         display: table-row-group;
         border-spacing: 7px;
       } 
       #el1:after {
         counter-reset: c;
-        display: -moz-box;
+        display: flex;
         content: counter(c, cjk-ideographic) attr(id);
         counter-increment: c 694;
       }
       #el2 {
         display: table-row-group;
         -moz-transform:translate3d(0, 80px, 0); 
       }
       #el2:after {
diff --git a/gfx/tests/crashtests/783041-3.html b/gfx/tests/crashtests/783041-3.html
--- a/gfx/tests/crashtests/783041-3.html
+++ b/gfx/tests/crashtests/783041-3.html
@@ -23,19 +23,19 @@
       #el5 { background:red;margin:0;height:1em;display:block } 
       #el5:nth-child(3) { -moz-svg-shadow:5px 5px 5px red; display: link; content: counter(c, asterisks) attr(id); counter-increment: c 266; } 
 
       .c4 { 
         margin: 1em; } 
       #el7 { font-size:.92em } 
       #el3 { font-size:.92em } 
       .c4 { padding:0.4em 0.5em 0.4em 2.5em } 
-      .c4:after { margin:2px; display: -moz-box; content: counter(c, octal) attr(id); counter-increment: c 171; } 
+      .c4:after { margin:2px; display: flex; content: counter(c, octal) attr(id); counter-increment: c 171; } 
       .c4:before { -moz-user-drag:none; display: -moz-inline-flexbox; content: counter(c, hiragana-iroha) attr(id); counter-increment: c 209; } 
-      .c4:only-of-type { -moz-logical-height:50px; display: -moz-box; content: counter(c, binary) attr(id); counter-increment: c 871; } 
+      .c4:only-of-type { -moz-logical-height:50px; display: flex; content: counter(c, binary) attr(id); counter-increment: c 871; } 
     </style>
     <script>
       onload = function() {
         el0=document.createElement('ul')
         el0.setAttribute('id','el0')
         document.body.appendChild(el0)
 
         el1=document.createElement('canvas')
diff --git a/layout/base/crashtests/322436-1.html b/layout/base/crashtests/322436-1.html
--- a/layout/base/crashtests/322436-1.html
+++ b/layout/base/crashtests/322436-1.html
@@ -19,13 +19,13 @@ function bar()
 
 </script>
 
 </head>
 
 <body onload="foo();">
 
 
-<div id="TT"><div style="position: fixed;"><div style="display: -moz-box;"><div style="float: left;"></div></div></div></div>
+<div id="TT"><div style="position: fixed;"><div style="display: flex;"><div style="float: left;"></div></div></div></div>
 
 </body>
 
 </html>
\ No newline at end of file
diff --git a/layout/base/crashtests/372237-1.html b/layout/base/crashtests/372237-1.html
--- a/layout/base/crashtests/372237-1.html
+++ b/layout/base/crashtests/372237-1.html
@@ -17,17 +17,17 @@ function boom2()
 
 </script>
 
 </head>
 
 <body onload="boom();">
 
 <div style="float: left;">
-<div id="b" style="display: -moz-box; border: 1px solid black;"><img width="16" height="16" src="../../../testing/crashtest/images/tree.gif"/></div>
+<div id="b" style="display: flex; border: 1px solid black;"><img width="16" height="16" src="../../../testing/crashtest/images/tree.gif"/></div>
 <div style="position: fixed;"></div>
 </div>
 
 <div id="g" style="display: inline"><div></div></div>
 
 </body>
 
 </html>
diff --git a/layout/base/crashtests/373628.html b/layout/base/crashtests/373628.html
--- a/layout/base/crashtests/373628.html
+++ b/layout/base/crashtests/373628.html
@@ -35,32 +35,32 @@ window.location.reload();
 </q>
 
 </ol>
 </pre>
 </nobr>
 <q style=" display: table-header-group; ">
 <s style=" display: -moz-grid-group; position: absolute; direction: rtl;">
 <q style=" display: table-cell; ">
-<s style=" display: -moz-box; position: absolute; direction: ltr;">
+<s style=" display: flex; position: absolute; direction: ltr;">
 <q style=" display: table; direction: ltr;">
 <bdo style=" display: block;">mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m 
 </bdo>
 </q>
 </s>
 </q>
 </s>
 </q>
 <p style=" display: table; position: absolute; direction: ltr;">
 </p>
 <pre style=" display: inline; position: absolute; float: left; direction: ltr;">
 <q style=" display: table-header-group; ">
 <s style=" display: -moz-grid-group; position: absolute; direction: rtl;">
 <q style=" display: table-cell; ">
-<s style=" display: -moz-box; position: absolute; direction: ltr;">
+<s style=" display: flex; position: absolute; direction: ltr;">
 <q style=" display: table; direction: ltr;">
 <bdo style=" display: block;">mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m 
 <q style=" display: -moz-deck; position: absolute; direction: rtl;">mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m mm m 
 </q>
 </bdo>
 </q>
 </s>
 <map style=" display: inline-table; position: fixed; direction: ltr;">
diff --git a/layout/base/crashtests/393326-1.html b/layout/base/crashtests/393326-1.html
--- a/layout/base/crashtests/393326-1.html
+++ b/layout/base/crashtests/393326-1.html
@@ -4,12 +4,12 @@ div::first-letter {}
 </style>
 </head>
 <body>
 
 <div style="position: fixed; ">
 <q></q>
 </div>
 <span>
-<span style="display: -moz-box; -moz-binding:url(393326-1-binding.xml#a);"></span>
+<span style="display: flex; -moz-binding:url(393326-1-binding.xml#a);"></span>
 </span>
 </body></html>
 
diff --git a/layout/base/crashtests/393326-2.html b/layout/base/crashtests/393326-2.html
--- a/layout/base/crashtests/393326-2.html
+++ b/layout/base/crashtests/393326-2.html
@@ -4,12 +4,12 @@ div::first-letter {}
 </style>
 </head>
 <body>
 
 <div style="position: fixed; ">
 <q></q>
 </div>
 <span>
-<span style="display: -moz-box; -moz-binding:url(data:text/xml;charset=utf-8,%3Cbindings%20xmlns%3D%22http%3A//www.mozilla.org/xbl%22%3E%0A%3Cbinding%20id%3D%22a%22%3E%0A%3Ccontent%3E%3Cchildren/%3E%3C/content%3E%0A%3C/binding%3E%3C/bindings%3E);"></span>
+<span style="display: flex; -moz-binding:url(data:text/xml;charset=utf-8,%3Cbindings%20xmlns%3D%22http%3A//www.mozilla.org/xbl%22%3E%0A%3Cbinding%20id%3D%22a%22%3E%0A%3Ccontent%3E%3Cchildren/%3E%3C/content%3E%0A%3C/binding%3E%3C/bindings%3E);"></span>
 </span>
 </body></html>
 
diff --git a/layout/base/crashtests/422276.html b/layout/base/crashtests/422276.html
--- a/layout/base/crashtests/422276.html
+++ b/layout/base/crashtests/422276.html
@@ -1,18 +1,18 @@
 <html>
-<head>
+<head>
 </head>
 <body>
-<div style="overflow: scroll;">
-  <div>
-    <q>
-      <span style="display: -moz-box;"></span>
+<div style="overflow: scroll;">
+  <div>
+    <q>
+      <span style="display: flex;"></span>
     </q>
   </div>
   <q></q>
-</div>
-
-<style>
-body *+* {quotes: "quote" "quote" !important;}
+</div>
+
+<style>
+body *+* {quotes: "quote" "quote" !important;}
 </style>
 </body>
 </html>
\ No newline at end of file
diff --git a/layout/base/tests/chrome/test_bug396367-1.html b/layout/base/tests/chrome/test_bug396367-1.html
--- a/layout/base/tests/chrome/test_bug396367-1.html
+++ b/layout/base/tests/chrome/test_bug396367-1.html
@@ -30,17 +30,17 @@ https://bugzilla.mozilla.org/show_bug.cg
 <a target="_blank" href="https://bugzilla.mozilla.org/show_bug.cgi?id=396367">Mozilla Bug 396367</a>
 <p id="display"></p>
 <div id="content" style="display: none">
 
 </div>
 <pre id="test">
 
 <input>
-<script>document.body.setAttribute('style', 'display: -moz-box; overflow: scroll;');</script>
+<script>document.body.setAttribute('style', 'display: flex; overflow: scroll;');</script>
 <script>
 var docviewer = getdocviewer();
 docviewer.textZoom=Math.floor(10*Math.random())/4+0.2;
 document.documentElement.offsetHeight;
 setTimeout(finish, 0);
 </script>
 
 
diff --git a/layout/forms/crashtests/363696-3.html b/layout/forms/crashtests/363696-3.html
--- a/layout/forms/crashtests/363696-3.html
+++ b/layout/forms/crashtests/363696-3.html
@@ -1,5 +1,5 @@
 <html><head></head><body>
 
-<span style="display: -moz-box;"><input type="file"><textarea></textarea></span>
+<span style="display: flex;"><input type="file"><textarea></textarea></span>
 
 </body></html>
\ No newline at end of file
diff --git a/layout/forms/test/test_bug402198.html b/layout/forms/test/test_bug402198.html
--- a/layout/forms/test/test_bug402198.html
+++ b/layout/forms/test/test_bug402198.html
@@ -12,36 +12,36 @@ https://bugzilla.mozilla.org/show_bug.cg
 <a target="_blank" href="https://bugzilla.mozilla.org/show_bug.cgi?id=402198">Mozilla Bug 402198</a>
 <p id="display">
   <select></select>
   <select><optgroup></optgroup></select>
   <legend style="overflow: scroll;">
     <select></select>
   </legend>
   <span></span>
-  <span style="display: -moz-box;">
+  <span style="display: flex;">
     <select></select>
   </span>
   <legend style=" ">
-    <label style="overflow: scroll; display: -moz-box;">
+    <label style="overflow: scroll; display: flex;">
       <select></select>
     </label>
   </legend>
   <legend>
     <label style=" display: table;">
       <select id="a">
         <option>High Grade</option>
         <option>Medium Grade</option>
       </select>
     </label>
   </legend>
 
   <input>
   <select multiple="multiple"></select>
-  <select style="overflow: scroll; display: -moz-box;">
+  <select style="overflow: scroll; display: flex;">
     <optgroup></optgroup>
     <optgroup style="display: table-cell;"></optgroup>
   </select>
 </p>
 
 <pre id="test">
 <script class="testbody" type="text/javascript">
 function doe3() {
diff --git a/layout/generic/crashtests/1272983-1.html b/layout/generic/crashtests/1272983-1.html
--- a/layout/generic/crashtests/1272983-1.html
+++ b/layout/generic/crashtests/1272983-1.html
@@ -1,15 +1,15 @@
 <!DOCTYPE html>
 <html>
 <head>
   <style>
     div.foo {
       margin-bottom: 50%;
-      display: -moz-box;
+      display: flex;
       direction: rtl;
     }
   </style>
 </head>
 <body>
   <div class="foo"></div>
 </body>
 </html>
diff --git a/layout/generic/crashtests/1272983-2.html b/layout/generic/crashtests/1272983-2.html
--- a/layout/generic/crashtests/1272983-2.html
+++ b/layout/generic/crashtests/1272983-2.html
@@ -1,15 +1,15 @@
 <!DOCTYPE html>
 <html>
 <head>
   <style>
     div.foo {
       padding-bottom: 50%;
-      display: -moz-box;
+      display: flex;
       direction: rtl;
     }
   </style>
 </head>
 <body>
   <div class="foo"></div>
 </body>
 </html>
diff --git a/layout/generic/crashtests/382129-1.xhtml b/layout/generic/crashtests/382129-1.xhtml
--- a/layout/generic/crashtests/382129-1.xhtml
+++ b/layout/generic/crashtests/382129-1.xhtml
@@ -1,7 +1,7 @@
 <html xmlns="http://www.w3.org/1999/xhtml">
 <body>
 
-<p style="display: -moz-box;"><img style="-moz-appearance: checkbox" src="../../../testing/crashtest/images/tree.gif"/></p>
+<p style="display: flex;"><img style="-moz-appearance: checkbox" src="../../../testing/crashtest/images/tree.gif"/></p>
 
 </body>
 </html>
diff --git a/layout/generic/crashtests/398332-1.html b/layout/generic/crashtests/398332-1.html
--- a/layout/generic/crashtests/398332-1.html
+++ b/layout/generic/crashtests/398332-1.html
@@ -1,17 +1,17 @@
 <html><head>
 <title>Testcase bug - Crash [@ nsHTMLReflowState::GetNearestContainingBlock] with display: -moz-box, generated content, positioning and fieldset</title>
 <style>
 small::before { content: "m m";}
 strike::before { content: "m m";}
 </style>
 </head>
 <body>
-<div style="display: -moz-box;">
+<div style="display: flex;">
   <strike style="overflow: -moz-hidden-unscrollable; position: absolute;"></strike>
   <fieldset style="position: relative;">
     <strike style="overflow: -moz-hidden-unscrollable; position: absolute;"><small style="position: relative;">
       <span style="position: absolute;"></span>
     </small>
   </strike>
 </fieldset>
 </div>
diff --git a/layout/generic/crashtests/416264-1.html b/layout/generic/crashtests/416264-1.html
--- a/layout/generic/crashtests/416264-1.html
+++ b/layout/generic/crashtests/416264-1.html
@@ -1,8 +1,8 @@
 <!DOCTYPE html>
 <html>
 <head>
 </head>
 
-<body style="display: -moz-box;"><div style="-moz-column-count: 2;"><div style="height: 200px;"></div><span style="display: inline-block; width: 100px;"></span></div></body>
+<body style="display: flex;"><div style="-moz-column-count: 2;"><div style="height: 200px;"></div><span style="display: inline-block; width: 100px;"></span></div></body>
 
 </html>
diff --git a/layout/generic/crashtests/467213-1.html b/layout/generic/crashtests/467213-1.html
--- a/layout/generic/crashtests/467213-1.html
+++ b/layout/generic/crashtests/467213-1.html
@@ -1,9 +1,9 @@
 <!DOCTYPE html>
 <html>
 <head></head>
 <body>
 
-<div style="direction: rtl;"><span style="direction: ltr;"><div></div><span style="position: absolute;"></span><span style="display: -moz-box;"></span></span></div>
+<div style="direction: rtl;"><span style="direction: ltr;"><div></div><span style="position: absolute;"></span><span style="display: flex;"></span></span></div>
 
 </body>
 </html>
diff --git a/layout/generic/crashtests/742602.html b/layout/generic/crashtests/742602.html
--- a/layout/generic/crashtests/742602.html
+++ b/layout/generic/crashtests/742602.html
@@ -1,6 +1,6 @@
 <!DOCTYPE html>
 <html style="direction: rtl; border-left: medium solid;">
 <body onload="document.documentElement.style.borderWidth = '109472098330px';">
-<div style="float: right;"><option style="display: -moz-box;">I</option>0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</div>
+<div style="float: right;"><option style="display: flex;">I</option>0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</div>
 </body>
 </html>
diff --git a/layout/generic/crashtests/794693.html b/layout/generic/crashtests/794693.html
--- a/layout/generic/crashtests/794693.html
+++ b/layout/generic/crashtests/794693.html
@@ -1,9 +1,9 @@
 <html xmlns="http://www.w3.org/1999/xhtml">
-  <body style="display: -moz-box;">
+  <body style="display: flex;">
     <font style="display: table; float: left;">
       <span style="display: table;">
         text text
       </span>
     </font>
   </body>
 </html>
diff --git a/layout/reftests/box-ordinal/box-ordinal-with-out-of-flow-1-ref.html b/layout/reftests/box-ordinal/box-ordinal-with-out-of-flow-1-ref.html
--- a/layout/reftests/box-ordinal/box-ordinal-with-out-of-flow-1-ref.html
+++ b/layout/reftests/box-ordinal/box-ordinal-with-out-of-flow-1-ref.html
@@ -1,17 +1,17 @@
 <!DOCTYPE html>
 <!--
      Any copyright is dedicated to the Public Domain.
      http://creativecommons.org/publicdomain/zero/1.0/
 -->
 <html>
 <head>
   <style>
-    #container { display: -moz-box; }
+    #container { display: flex; }
     #highOrdinal {
       background: lime;
       height: 100px; width: 100px;
     }
   </style>
 </head>
 <body>
   <div id="container">
diff --git a/layout/reftests/box-ordinal/box-ordinal-with-out-of-flow-1.html b/layout/reftests/box-ordinal/box-ordinal-with-out-of-flow-1.html
--- a/layout/reftests/box-ordinal/box-ordinal-with-out-of-flow-1.html
+++ b/layout/reftests/box-ordinal/box-ordinal-with-out-of-flow-1.html
@@ -6,17 +6,17 @@
 <!-- Testcase for whether we honor "-moz-box-ordinal-group" on
      absolutely-positioned elements within a -moz-box. Specifically,
      we test whether it affects their paint-order (as it should, since
      it reorders the frame tree).
 -->
 <html>
 <head>
   <style>
-    #container { display: -moz-box; }
+    #container { display: flex; }
     #lowOrdinal {
       position: absolute;
       -moz-box-ordinal-group: 5;
       background: red;
       height: 100px; width: 100px;
     }
     #highOrdinal {
       position: absolute;
diff --git a/layout/reftests/box-properties/box-sizing-mozbox-minmax-height-ref.html b/layout/reftests/box-properties/box-sizing-mozbox-minmax-height-ref.html
--- a/layout/reftests/box-properties/box-sizing-mozbox-minmax-height-ref.html
+++ b/layout/reftests/box-properties/box-sizing-mozbox-minmax-height-ref.html
@@ -6,17 +6,17 @@
 
         html,body {
             color:black; background-color:white; font-size:24px; padding:0; margin:0;
         }
 	
 div { padding:5px; }
 
 hbox {
-  display:-moz-box;
+  display:flex;
   border-top:3px solid;
   border-bottom:2px solid;
   padding-bottom:4px;
   background:lime;
 
   box-sizing:content-box;
 }
 
diff --git a/layout/reftests/box-properties/box-sizing-mozbox-minmax-height.html b/layout/reftests/box-properties/box-sizing-mozbox-minmax-height.html
--- a/layout/reftests/box-properties/box-sizing-mozbox-minmax-height.html
+++ b/layout/reftests/box-properties/box-sizing-mozbox-minmax-height.html
@@ -6,17 +6,17 @@
 
         html,body {
             color:black; background-color:white; font-size:24px; padding:0; margin:0;
         }
 	
 div { padding:5px; }
 
 hbox {
-  display:-moz-box;
+  display:flex;
   border-top:3px solid;
   border-bottom:2px solid;
   padding-bottom:4px;
   height:auto;
   box-sizing:border-box;
   background:lime;
 }
 
diff --git a/layout/reftests/box/flexbox-attributes-no-box-horizontal-ref.xhtml b/layout/reftests/box/flexbox-attributes-no-box-horizontal-ref.xhtml
--- a/layout/reftests/box/flexbox-attributes-no-box-horizontal-ref.xhtml
+++ b/layout/reftests/box/flexbox-attributes-no-box-horizontal-ref.xhtml
@@ -1,31 +1,31 @@
 <!DOCTYPE HTML>
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
 <title>Test that XUL attributes are not supported on non-XUL elements</title>
 <style type="text/css">
 <![CDATA[
 
 html, body {
-  display: -moz-box;
+  display: flex;
   margin: 0; padding: 0;
   width: 100%; height: 100%;
 }
 
 body > div {
-  display: -moz-box;
+  display: flex;
   background: yellow;
-  -moz-box-flex: 1;
+  flex: 1;
   -moz-box-orient: horizontal;
 }
 
 div > div {
-  display: -moz-box;
-  -moz-box-flex: 1;
+  display: flex;
+  flex: 1;
   border: 1px solid blue;
 }
 
 ]]>
 </style>
 </head>
 <body>
 <div>
diff --git a/layout/reftests/box/flexbox-attributes-no-box-horizontal.xhtml b/layout/reftests/box/flexbox-attributes-no-box-horizontal.xhtml
--- a/layout/reftests/box/flexbox-attributes-no-box-horizontal.xhtml
+++ b/layout/reftests/box/flexbox-attributes-no-box-horizontal.xhtml
@@ -1,31 +1,31 @@
 <!DOCTYPE HTML>
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
 <title>Test that XUL attributes are not supported on non-XUL elements</title>
 <style type="text/css">
 <![CDATA[
 
 html, body {
-  display: -moz-box;
+  display: flex;
   margin: 0; padding: 0;
   width: 100%; height: 100%;
 }
 
 body > div {
-  display: -moz-box;
+  display: flex;
   background: yellow;
-  -moz-box-flex: 1;
+  flex: 1;
   -moz-box-orient: horizontal;
 }
 
 div > div {
-  display: -moz-box;
-  -moz-box-flex: 1;
+  display: flex;
+  flex: 1;
   border: 1px solid blue;
 }
 
 ]]>
 </style>
 </head>
 <body>
 <div>
diff --git a/layout/reftests/box/flexbox-attributes-no-box-vertical-ref.xhtml b/layout/reftests/box/flexbox-attributes-no-box-vertical-ref.xhtml
--- a/layout/reftests/box/flexbox-attributes-no-box-vertical-ref.xhtml
+++ b/layout/reftests/box/flexbox-attributes-no-box-vertical-ref.xhtml
@@ -1,31 +1,31 @@
 <!DOCTYPE HTML>
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
 <title>Test that XUL attributes are not supported on non-XUL elements</title>
 <style type="text/css">
 <![CDATA[
 
 html, body {
-  display: -moz-box;
+  display: flex;
   margin: 0; padding: 0;
   width: 100%; height: 100%;
 }
 
 body > div {
-  display: -moz-box;
+  display: flex;
   background: yellow;
-  -moz-box-flex: 1;
+  flex: 1;
   -moz-box-orient: vertical;
 }
 
 div > div {
-  display: -moz-box;
-  -moz-box-flex: 1;
+  display: flex;
+  flex: 1;
   border: 1px solid blue;
 }
 
 ]]>
 </style>
 </head>
 <body>
 <div>
diff --git a/layout/reftests/box/flexbox-attributes-no-box-vertical.xhtml b/layout/reftests/box/flexbox-attributes-no-box-vertical.xhtml
--- a/layout/reftests/box/flexbox-attributes-no-box-vertical.xhtml
+++ b/layout/reftests/box/flexbox-attributes-no-box-vertical.xhtml
@@ -1,31 +1,31 @@
 <!DOCTYPE HTML>
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
 <title>Test that XUL attributes are not supported on non-XUL elements</title>
 <style type="text/css">
 <![CDATA[
 
 html, body {
-  display: -moz-box;
+  display: flex;
   margin: 0; padding: 0;
   width: 100%; height: 100%;
 }
 
 body > div {
-  display: -moz-box;
+  display: flex;
   background: yellow;
-  -moz-box-flex: 1;
+  flex: 1;
   -moz-box-orient: vertical;
 }
 
 div > div {
-  display: -moz-box;
-  -moz-box-flex: 1;
+  display: flex;
+  flex: 1;
   border: 1px solid blue;
 }
 
 ]]>
 </style>
 </head>
 <body>
 <div>
diff --git a/layout/reftests/box/flexbox-attributes-no-input-horizontal-ref.xhtml b/layout/reftests/box/flexbox-attributes-no-input-horizontal-ref.xhtml
--- a/layout/reftests/box/flexbox-attributes-no-input-horizontal-ref.xhtml
+++ b/layout/reftests/box/flexbox-attributes-no-input-horizontal-ref.xhtml
@@ -1,26 +1,26 @@
 <!DOCTYPE HTML>
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
 <title>Test that XUL attributes are not supported on non-XUL elements</title>
 <style type="text/css">
 <![CDATA[
 
 html, body {
-  display: -moz-box;
+  display: flex;
   margin: 0; padding: 0;
   width: 100%; height: 100%;
   pointer-events: none;
 }
 
 body > div {
-  display: -moz-box;
+  display: flex;
   background: yellow;
-  -moz-box-flex: 1;
+  flex: 1;
   -moz-box-orient: horizontal;
 }
 
 ]]>
 </style>
 </head>
 <body>
 <div>
diff --git a/layout/reftests/box/flexbox-attributes-no-input-horizontal.xhtml b/layout/reftests/box/flexbox-attributes-no-input-horizontal.xhtml
--- a/layout/reftests/box/flexbox-attributes-no-input-horizontal.xhtml
+++ b/layout/reftests/box/flexbox-attributes-no-input-horizontal.xhtml
@@ -1,27 +1,27 @@
 <!DOCTYPE HTML>
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
 <title>Test that XUL attributes are not supported on non-XUL elements</title>
 <style type="text/css">
 <![CDATA[
 
 html, body {
-  display: -moz-box;
+  display: flex;
   margin: 0; padding: 0;
   width: 100%; height: 100%;
   /* Disable pointer-events so we don't get weird hover artifacts */
   pointer-events: none;
 }
 
 body > div {
-  display: -moz-box;
+  display: flex;
   background: yellow;
-  -moz-box-flex: 1;
+  flex: 1;
   -moz-box-orient: horizontal;
 }
 
 ]]>
 </style>
 </head>
 <body>
 <div>
diff --git a/layout/reftests/box/flexbox-attributes-no-input-vertical-ref.xhtml b/layout/reftests/box/flexbox-attributes-no-input-vertical-ref.xhtml
--- a/layout/reftests/box/flexbox-attributes-no-input-vertical-ref.xhtml
+++ b/layout/reftests/box/flexbox-attributes-no-input-vertical-ref.xhtml
@@ -1,25 +1,25 @@
 <!DOCTYPE HTML>
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
 <title>Test that XUL attributes are not supported on non-XUL elements</title>
 <style type="text/css">
 <![CDATA[
 
 html, body {
-  display: -moz-box;
+  display: flex;
   margin: 0; padding: 0;
   width: 100%; height: 100%;
 }
 
 body > div {
-  display: -moz-box;
+  display: flex;
   background: yellow;
-  -moz-box-flex: 1;
+  flex: 1;
   -moz-box-orient: vertical;
 }
 
 ]]>
 </style>
 </head>
 <body>
 <div>
diff --git a/layout/reftests/box/flexbox-attributes-no-input-vertical.xhtml b/layout/reftests/box/flexbox-attributes-no-input-vertical.xhtml
--- a/layout/reftests/box/flexbox-attributes-no-input-vertical.xhtml
+++ b/layout/reftests/box/flexbox-attributes-no-input-vertical.xhtml
@@ -1,25 +1,25 @@
 <!DOCTYPE HTML>
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
 <title>Test that XUL attributes are not supported on non-XUL elements</title>
 <style type="text/css">
 <![CDATA[
 
 html, body {
-  display: -moz-box;
+  display: flex;
   margin: 0; padding: 0;
   width: 100%; height: 100%;
 }
 
 body > div {
-  display: -moz-box;
+  display: flex;
   background: yellow;
-  -moz-box-flex: 1;
+  flex: 1;
   -moz-box-orient: vertical;
 }
 
 ]]>
 </style>
 </head>
 <body>
 <div>
diff --git a/layout/reftests/bugs/322436-1.html b/layout/reftests/bugs/322436-1.html
--- a/layout/reftests/bugs/322436-1.html
+++ b/layout/reftests/bugs/322436-1.html
@@ -1,14 +1,14 @@
 <html>
 
 <head>
 
 </head>
 
 <body>
 There should be floating text here!  Look at the source!
-<div style="display: -moz-box;"><div style="float: left;">This&nbsp;text&nbsp;should&nbsp;show&nbsp;up</div></div>
+<div style="display: flex;"><div style="float: left;">This&nbsp;text&nbsp;should&nbsp;show&nbsp;up</div></div>
 <!-- using non-breaking spaces here to match the reference -->
 
 </body>
 
 </html>
diff --git a/layout/reftests/bugs/374719-1-css.css b/layout/reftests/bugs/374719-1-css.css
--- a/layout/reftests/bugs/374719-1-css.css
+++ b/layout/reftests/bugs/374719-1-css.css
@@ -24,22 +24,22 @@ gridlikecol, gridlikeitem, gridlikeheadi
 }
 
 gridlikehead {
   -moz-box-orient: vertical;
 }
 
 gridlikerows {
   -moz-box-orient: vertical;
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 gridlikeboxbody {
   -moz-box-orient: vertical;
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 gridlikecol {
   -moz-box-orient: vertical;
   min-width: 16px;
 }
 
 gridlikeheader {
diff --git a/layout/reftests/bugs/409089-3-ref.html b/layout/reftests/bugs/409089-3-ref.html
--- a/layout/reftests/bugs/409089-3-ref.html
+++ b/layout/reftests/bugs/409089-3-ref.html
@@ -1,5 +1,5 @@
 <html>
 <head>
 </head>
-<body style="display: -moz-box;">x</body>
+<body style="display: flex;">x</body>
 </html>
\ No newline at end of file
diff --git a/layout/reftests/bugs/409089-3.html b/layout/reftests/bugs/409089-3.html
--- a/layout/reftests/bugs/409089-3.html
+++ b/layout/reftests/bugs/409089-3.html
@@ -1,5 +1,5 @@
 <html>
 <head>
 </head>
-<body style="display: -moz-box;" onload="document.body.firstChild.data = 'x';"> </body>
+<body style="display: flex;" onload="document.body.firstChild.data = 'x';"> </body>
 </html>
\ No newline at end of file
diff --git a/layout/reftests/bugs/413027-1.html b/layout/reftests/bugs/413027-1.html
--- a/layout/reftests/bugs/413027-1.html
+++ b/layout/reftests/bugs/413027-1.html
@@ -1,12 +1,12 @@
 <html><head>
 <title>Testcase 3 for bug 413027 - Marquee height is sized too small, clipping text vertically</title>
 </head>
 <body>
 
-<div style="display: -moz-box; background-color: lime; width: 600px;">
+<div style="display: flex; background-color: lime; width: 600px;">
 <div>
   <div style="margin: 100px 0px;">text</div>
 </div>
 </div>
       
 </body></html>
diff --git a/layout/reftests/bugs/413027-2.html b/layout/reftests/bugs/413027-2.html
--- a/layout/reftests/bugs/413027-2.html
+++ b/layout/reftests/bugs/413027-2.html
@@ -1,12 +1,12 @@
 <!DOCTYPE HTML>
 <html>
 <body>
 
-<div style="display:-moz-box; height:20px; border:4px dotted blue;">
+<div style="display:flex; height:20px; border:4px dotted blue;">
   <div>
     <span style="display:inline-block; width:50px; height:200px; background:yellow;">
   </div>
 </div>
 
 </body>
 </html>
diff --git a/layout/reftests/bugs/413027-3.html b/layout/reftests/bugs/413027-3.html
--- a/layout/reftests/bugs/413027-3.html
+++ b/layout/reftests/bugs/413027-3.html
@@ -1,10 +1,10 @@
 <!DOCTYPE HTML>
 <html>
 <body>
 
-<div style="display:-moz-box; height: 5px; border:4px dotted blue;">
+<div style="display:flex; height: 5px; border:4px dotted blue;">
   <div style="overflow:hidden">text<br>more text</div>
 </div>
 
 </body>
 </html>
diff --git a/layout/reftests/bugs/508816-2.html b/layout/reftests/bugs/508816-2.html
--- a/layout/reftests/bugs/508816-2.html
+++ b/layout/reftests/bugs/508816-2.html
@@ -3,14 +3,14 @@
 <head>
   <style type="text/css">
     body { padding-right: 100px; }
     div { border: 1px solid purple; overflow-x: scroll; overflow-y: hidden; width: 300px; margin: 0 50px 0 0; padding: 0; }
     span { display: inline-block; height: 50px; margin: 0; }
   </style>
 </head>
 <body dir="rtl">
-  <div style="display: -moz-box;">
+  <div style="display: flex;">
     <span style="background: green; width: 50px; position: fixed; margin-inline-start: -50px"></span>
     <span style="background: yellow; width: 400px; overflow: hidden"></span>
   </div>
 </body>
 </html>
diff --git a/layout/reftests/bugs/531098-1.html b/layout/reftests/bugs/531098-1.html
--- a/layout/reftests/bugs/531098-1.html
+++ b/layout/reftests/bugs/531098-1.html
@@ -1,12 +1,12 @@
 <!DOCTYPE HTML>
 <style type="text/css">
 html, body { margin: 0; padding: 0; border: none; }
 </style>
 
-<div style="margin: 100px; height: 400px; width: 400px; display: -moz-box; -moz-box-orient: horizontal">
+<div style="margin: 100px; height: 400px; width: 400px; display: flex; -moz-box-orient: horizontal">
 
   <div style="width: 200px; box-shadow: 0 0 14px blue">A</div>
   <div style="width: 100px"></div>
-  <div style="-moz-box-flex: 1; box-shadow: 0 0 14px blue">B</div>
+  <div style="flex: 1; box-shadow: 0 0 14px blue">B</div>
 
 </div>
diff --git a/layout/reftests/bugs/551463-1-ref.html b/layout/reftests/bugs/551463-1-ref.html
--- a/layout/reftests/bugs/551463-1-ref.html
+++ b/layout/reftests/bugs/551463-1-ref.html
@@ -1,12 +1,12 @@
 <!DOCTYPE HTML>
 <html>
 <body>
-<div style="display:-moz-box; width:400px;">
+<div style="display:flex; width:400px;">
   <div id="d" style="overflow:auto; height:100px; width:400px; font-size:20px;">
     Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty.
     Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty.
     Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty.
     Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty.
     Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty.
     Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty.
     Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty.
diff --git a/layout/reftests/bugs/551463-1.html b/layout/reftests/bugs/551463-1.html
--- a/layout/reftests/bugs/551463-1.html
+++ b/layout/reftests/bugs/551463-1.html
@@ -1,12 +1,12 @@
 <!DOCTYPE HTML>
 <html>
 <body>
-<div style="display:-moz-box; width:400px;">
+<div style="display:flex; width:400px;">
   <div id="d" style="overflow:auto; height:100px; width:400px; font-size:20px;">
     Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty.
     Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty.
     Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty.
     Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty.
     Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty.
     Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty.
     Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty. Hello Kitty.
diff --git a/layout/reftests/bugs/579323-1.html b/layout/reftests/bugs/579323-1.html
--- a/layout/reftests/bugs/579323-1.html
+++ b/layout/reftests/bugs/579323-1.html
@@ -1,20 +1,20 @@
 <!DOCTYPE HTML>
 <html class="reftest-wait">
 <head>
 <style>
 body {
   margin: 0;
-  display: -moz-box;
+  display: flex;
   -moz-box-orient: horizontal;
   width: 400px;
 }
 canvas {
-  -moz-box-flex: 1;
+  flex: 1;
   opacity: 0.999;
   border: 1px solid black;
 }
 .censor {
   position: absolute;
   width: 1px;
   height: 1px;
   background: cyan;
diff --git a/layout/reftests/bugs/750551-1-ref.html b/layout/reftests/bugs/750551-1-ref.html
--- a/layout/reftests/bugs/750551-1-ref.html
+++ b/layout/reftests/bugs/750551-1-ref.html
@@ -1,14 +1,14 @@
 <!DOCTYPE html>
 <html>
 <body dir="ltr">
 <p>1
 <p>2
 <p>3
 <style>
 body {
- display: -moz-box;
+ display: flex;
  -moz-box-orient: vertical;
 }
 </style>
 </body>
 </html>
diff --git a/layout/reftests/bugs/750551-1.html b/layout/reftests/bugs/750551-1.html
--- a/layout/reftests/bugs/750551-1.html
+++ b/layout/reftests/bugs/750551-1.html
@@ -1,15 +1,15 @@
 <!DOCTYPE html>
 <html>
 <body dir="rtl">
 <p>1
 <p>2
 <p>3
 <style>
 body {
- display: -moz-box;
+ display: flex;
  -moz-box-orient: vertical;
  text-align: left;
 }
 </style>
 </body>
 </html>
diff --git a/layout/reftests/font-inflation/xul-reflow-1.html b/layout/reftests/font-inflation/xul-reflow-1.html
--- a/layout/reftests/font-inflation/xul-reflow-1.html
+++ b/layout/reftests/font-inflation/xul-reflow-1.html
@@ -1,13 +1,13 @@
 <!DOCTYPE HTML>
 <title>Testcase, bug 764354</title>
 <style>
 #outer {
-  display: -moz-box;
+  display: flex;
   overflow: hidden;
   -moz-box-orient: vertical;
   width: 300px;
   height: 100px;
   background: yellow; color: black;
 }
 .inner {
   background: aqua; color: black;
diff --git a/layout/reftests/generated-content/display-types-01.html b/layout/reftests/generated-content/display-types-01.html
--- a/layout/reftests/generated-content/display-types-01.html
+++ b/layout/reftests/generated-content/display-types-01.html
@@ -22,17 +22,17 @@ div::after {
 .inline::before, .inline::after { display:inline; }
 .inline-block::before, .inline-block::after { display:inline-block; }
 .table::before, .table::after { display:table; }
 .inline-table::before, .inline-table::after { display:inline-table; }
 .table-row-group::before, .table-row-group::after { display:table-row-group; }
 .table-row::before, .table-row::after { display:table-row; }
 .table-cell::before, .table-cell::after { display:table-cell; }
 .table-caption::before, .table-caption::after { display:table-caption; }
-.flexbox::before, .flexbox::after { display:-moz-box; }
+.flexbox::before, .flexbox::after { display:flex; }
 .inline-flexbox::before, .inline-flexbox::after { display:-moz-inline-box; }
 
 div { border:1px solid green; margin:5px; }
 </style>
 </head>
 
 <body>
 <table width="100%"><tr><td valign="top">
diff --git a/layout/reftests/text-overflow/xulscroll-ref.html b/layout/reftests/text-overflow/xulscroll-ref.html
--- a/layout/reftests/text-overflow/xulscroll-ref.html
+++ b/layout/reftests/text-overflow/xulscroll-ref.html
@@ -13,17 +13,17 @@ html,body {
     color:black; background-color:white; font-size:16px; padding:0; margin:0; font-family:DejaVuSansMono;
 }
 	
   .bacon {
     white-space:    nowrap;
     text-overflow:  clip;
     overflow:       hidden;
     width:          30ch;
-    display:        -moz-box;
+    display:        flex;
     background:     lime;
     margin-bottom:  1em;
   }
 
   .auto {
     overflow-x:       auto;
     width:          29.5ch;
     padding-bottom: 2ch;
diff --git a/layout/reftests/text-overflow/xulscroll.html b/layout/reftests/text-overflow/xulscroll.html
--- a/layout/reftests/text-overflow/xulscroll.html
+++ b/layout/reftests/text-overflow/xulscroll.html
@@ -13,17 +13,17 @@ html,body {
     color:black; background-color:white; font-size:16px; padding:0; margin:0; font-family:DejaVuSansMono;
 }
 	
   .bacon {
     white-space:    nowrap;
     text-overflow:  ellipsis ellipsis;
     overflow:       hidden;
     width:          30ch;
-    display:        -moz-box;
+    display:        flex;
     background:     lime;
     margin-bottom:  1em;
   }
 
   .auto {
     overflow-x:       auto;
     padding-bottom: 2ch;
     width:          29.5ch;
diff --git a/layout/reftests/webkit-box/webkit-display-values-1.html b/layout/reftests/webkit-box/webkit-display-values-1.html
--- a/layout/reftests/webkit-box/webkit-display-values-1.html
+++ b/layout/reftests/webkit-box/webkit-display-values-1.html
@@ -18,19 +18,19 @@
     }
   </style>
 </head>
 <body>
   <!-- -webkit-box, possibly mixed with -moz-box: -->
   <div style="display: -webkit-box;">a</div>
 
   <div style="display: -webkit-box;
-              display: -moz-box;">b</div>
+              display: flex;">b</div>
 
-  <div style="display: -moz-box;
+  <div style="display: flex;
               display: -webkit-box;">c</div>
   <br>
 
   <!-- -webkit-inline-box, possibly mixed with -moz-inline-box: -->
   <div style="display: -webkit-inline-box;">d</div>
 
   <div style="display: -webkit-inline-box;
               display: -moz-inline-box;">e</div>
diff --git a/layout/style/res/html.css b/layout/style/res/html.css
--- a/layout/style/res/html.css
+++ b/layout/style/res/html.css
@@ -730,17 +730,17 @@ area {
 iframe:fullscreen {
   /* iframes in full-screen mode don't show a border. */
   border: none !important;
   padding: 0 !important;
 }
 
 /* media elements */
 video > xul|videocontrols, audio > xul|videocontrols {
-  display: -moz-box;
+  display: flex;
   -moz-box-orient: vertical;
   -moz-binding: url("chrome://global/content/bindings/videocontrols.xml#videoControls");
 }
 
 video:not([controls]) > xul|videocontrols,
 audio:not([controls]) > xul|videocontrols {
   visibility: hidden;
   -moz-binding: none;
diff --git a/layout/style/xbl-marquee/xbl-marquee.xml b/layout/style/xbl-marquee/xbl-marquee.xml
--- a/layout/style/xbl-marquee/xbl-marquee.xml
+++ b/layout/style/xbl-marquee/xbl-marquee.xml
@@ -671,18 +671,18 @@
 
   <binding id="marquee-horizontal" bindToUntrustedContent="true"
            extends="chrome://xbl-marquee/content/xbl-marquee.xml#marquee"
            inheritstyle="false">
 
     <!-- White-space isn't allowed because a marquee could be 
          inside 'white-space: pre' -->
     <content>
-      <html:div style="display: -moz-box; overflow: hidden; width: -moz-available;"
-        ><html:div style="display: -moz-box;"
+      <html:div style="display: flex; overflow: hidden; width: -moz-available;"
+        ><html:div style="display: flex;"
           ><html:div class="innerDiv" style="display: table; border-spacing: 0;"
             ><html:div
               ><children
             /></html:div
           ></html:div
         ></html:div
       ></html:div>
     </content>
diff --git a/layout/svg/crashtests/314244-1.xul b/layout/svg/crashtests/314244-1.xul
--- a/layout/svg/crashtests/314244-1.xul
+++ b/layout/svg/crashtests/314244-1.xul
@@ -9,17 +9,17 @@
         screenX="10" screenY="10">
 
   <hbox>
     <svg version="1.0"
          xmlns="http://www.w3.org/2000/svg"
          width="100px" height="100px"
          id="back-button"
          class="nav-button"
-         style="display: -moz-box;">
+         style="display: flex;">
       <rect x="10" y="10" width="80" height="80" fill="blue" />
     </svg>
     <spacer flex="1" />
   </hbox>
 
   <spacer flex="1" />
 
 </window>
diff --git a/layout/svg/crashtests/459883.xhtml b/layout/svg/crashtests/459883.xhtml
--- a/layout/svg/crashtests/459883.xhtml
+++ b/layout/svg/crashtests/459883.xhtml
@@ -1,13 +1,13 @@
 <html xmlns="http://www.w3.org/1999/xhtml" style="filter: url(#r);" class="reftest-wait"><head>
 <script type="text/javascript">
 
 function boom()
 {
-  document.getElementById("s").setAttribute("style", "display: -moz-box;");
+  document.getElementById("s").setAttribute("style", "display: flex;");
   document.documentElement.removeAttribute("class");
 }
 
 window.addEventListener("load", function() { setTimeout(boom, 0); }, false);
 
 </script>
 </head><body><ms xmlns="http://www.w3.org/1998/Math/MathML" id="s"><maction id="r"/></ms></body></html>
diff --git a/layout/xul/crashtests/291702-2.xul b/layout/xul/crashtests/291702-2.xul
--- a/layout/xul/crashtests/291702-2.xul
+++ b/layout/xul/crashtests/291702-2.xul
@@ -2,10 +2,10 @@
 <?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
 
 <window title="Negative flex bug #2"
 		orient="horizontal"
         xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
   <button label="Button" flex="1073741824"/>
   <label value="This is a label" flex="1073741824"/>
   <label value="This is the second label" flex="1073741824"/>
-  <label value="This is another label" style="-moz-box-flex: 1073741824;"/>
+  <label value="This is another label" style="flex: 1073741824;"/>
 </window>
diff --git a/layout/xul/crashtests/291702-3.xul b/layout/xul/crashtests/291702-3.xul
--- a/layout/xul/crashtests/291702-3.xul
+++ b/layout/xul/crashtests/291702-3.xul
@@ -1,137 +1,137 @@
 <?xml version="1.0"?>
 <?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
 
 <window title="Negative flex bug #2"
 		orient="vertical"
         xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
   <hbox>
     <button label="Button" flex="1073741823"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741823;"/>
+    <label value="This is another label" style="flex: 1073741823;"/>
     <button label="Button" flex="1073741823"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741823;"/>
+    <label value="This is another label" style="flex: 1073741823;"/>
   </hbox>
   <hbox>
     <button label="Button" flex="1073741824"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741824;"/>
+    <label value="This is another label" style="flex: 1073741824;"/>
     <button label="Button" flex="1073741824"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741824;"/>
+    <label value="This is another label" style="flex: 1073741824;"/>
   </hbox>
   <hbox>
     <button label="Button" flex="1073741825"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741825;"/>
+    <label value="This is another label" style="flex: 1073741825;"/>
     <button label="Button" flex="1073741825"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741825;"/>
+    <label value="This is another label" style="flex: 1073741825;"/>
   </hbox>
 
   <hbox>
     <button label="Button" flex="1073741823"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741823;"/>
+    <label value="This is another label" style="flex: 1073741823;"/>
     <button label="Button" flex="1073741823"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741825;"/>
+    <label value="This is another label" style="flex: 1073741825;"/>
   </hbox>
   <hbox>
     <button label="Button" flex="1073741823"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741823;"/>
+    <label value="This is another label" style="flex: 1073741823;"/>
     <button label="Button" flex="1073741823"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741824;"/>
+    <label value="This is another label" style="flex: 1073741824;"/>
   </hbox>
   <hbox>
     <button label="Button" flex="1073741824"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741824;"/>
+    <label value="This is another label" style="flex: 1073741824;"/>
     <button label="Button" flex="1073741824"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741825;"/>
+    <label value="This is another label" style="flex: 1073741825;"/>
   </hbox>
   <hbox>
     <button label="Button" flex="1073741824"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741824;"/>
+    <label value="This is another label" style="flex: 1073741824;"/>
     <button label="Button" flex="1073741824"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741823;"/>
+    <label value="This is another label" style="flex: 1073741823;"/>
   </hbox>
   <hbox>
     <button label="Button" flex="1073741825"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741825;"/>
+    <label value="This is another label" style="flex: 1073741825;"/>
     <button label="Button" flex="1073741825"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741824;"/>
+    <label value="This is another label" style="flex: 1073741824;"/>
   </hbox>
   <hbox>
     <button label="Button" flex="1073741825"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741825;"/>
+    <label value="This is another label" style="flex: 1073741825;"/>
     <button label="Button" flex="1073741825"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741823;"/>
+    <label value="This is another label" style="flex: 1073741823;"/>
   </hbox>
 
 
   <hbox>
     <button label="Button" flex="1073741823"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741823;"/>
+    <label value="This is another label" style="flex: 1073741823;"/>
     <button label="Button" flex="1073741823"/>
-    <label value="This is another label" style="-moz-box-flex: 1;"/>
+    <label value="This is another label" style="flex: 1;"/>
   </hbox>
   <hbox>
     <button label="Button" flex="1073741824"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741824;"/>
+    <label value="This is another label" style="flex: 1073741824;"/>
     <button label="Button" flex="1073741824"/>
-    <label value="This is another label" style="-moz-box-flex: 1;"/>
+    <label value="This is another label" style="flex: 1;"/>
   </hbox>
   <hbox>
     <button label="Button" flex="1073741825"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741825;"/>
+    <label value="This is another label" style="flex: 1073741825;"/>
     <button label="Button" flex="1073741825"/>
-    <label value="This is another label" style="-moz-box-flex: 1;"/>
+    <label value="This is another label" style="flex: 1;"/>
   </hbox>
   <hbox>
     <button label="Button" flex="1073741823"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741823;"/>
+    <label value="This is another label" style="flex: 1073741823;"/>
     <button label="Button" flex="1073741823"/>
-    <label value="This is another label" style="-moz-box-flex: 2;"/>
+    <label value="This is another label" style="flex: 2;"/>
   </hbox>
   <hbox>
     <button label="Button" flex="1073741824"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741824;"/>
+    <label value="This is another label" style="flex: 1073741824;"/>
     <button label="Button" flex="1073741824"/>
-    <label value="This is another label" style="-moz-box-flex: 2;"/>
+    <label value="This is another label" style="flex: 2;"/>
   </hbox>
   <hbox>
     <button label="Button" flex="1073741825"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741825;"/>
+    <label value="This is another label" style="flex: 1073741825;"/>
     <button label="Button" flex="1073741825"/>
-    <label value="This is another label" style="-moz-box-flex: 2;"/>
+    <label value="This is another label" style="flex: 2;"/>
   </hbox>
 
   <hbox>
     <button label="Button" flex="1073741823"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741823;"/>
+    <label value="This is another label" style="flex: 1073741823;"/>
     <button label="Button" flex="1"/>
-    <label value="This is another label" style="-moz-box-flex: 1;"/>
+    <label value="This is another label" style="flex: 1;"/>
   </hbox>
   <hbox>
     <button label="Button" flex="1073741824"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741824;"/>
+    <label value="This is another label" style="flex: 1073741824;"/>
     <button label="Button" flex="1"/>
-    <label value="This is another label" style="-moz-box-flex: 1;"/>
+    <label value="This is another label" style="flex: 1;"/>
   </hbox>
   <hbox>
     <button label="Button" flex="1073741825"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741825;"/>
+    <label value="This is another label" style="flex: 1073741825;"/>
     <button label="Button" flex="1"/>
-    <label value="This is another label" style="-moz-box-flex: 1;"/>
+    <label value="This is another label" style="flex: 1;"/>
   </hbox>
   <hbox>
     <button label="Button" flex="1073741823"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741823;"/>
+    <label value="This is another label" style="flex: 1073741823;"/>
     <button label="Button" flex="2"/>
-    <label value="This is another label" style="-moz-box-flex: 2;"/>
+    <label value="This is another label" style="flex: 2;"/>
   </hbox>
   <hbox>
     <button label="Button" flex="1073741824"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741824;"/>
+    <label value="This is another label" style="flex: 1073741824;"/>
     <button label="Button" flex="2"/>
-    <label value="This is another label" style="-moz-box-flex: 2;"/>
+    <label value="This is another label" style="flex: 2;"/>
   </hbox>
   <hbox>
     <button label="Button" flex="1073741825"/>
-    <label value="This is another label" style="-moz-box-flex: 1073741825;"/>
+    <label value="This is another label" style="flex: 1073741825;"/>
     <button label="Button" flex="2"/>
-    <label value="This is another label" style="-moz-box-flex: 2;"/>
+    <label value="This is another label" style="flex: 2;"/>
   </hbox>
 </window>
diff --git a/layout/xul/crashtests/386642.xul b/layout/xul/crashtests/386642.xul
--- a/layout/xul/crashtests/386642.xul
+++ b/layout/xul/crashtests/386642.xul
@@ -1,17 +1,17 @@
 <window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
         title="Bug 386642 Crash [@ IsCanvasFrame] while opening context menu or changing styles">
 <toolbarbutton type="menu" id="a">
 <menupopup id="b"/>
 </toolbarbutton>
 
 <style xmlns="http://www.w3.org/1999/xhtml">
 .one image {
-display: -moz-box;
+display: flex;
 }
 image{
 display: none;
 }
 
 </style>
 <script><![CDATA[
 var gg=0;
diff --git a/layout/xul/tree/crashtests/391178-2.xul b/layout/xul/tree/crashtests/391178-2.xul
--- a/layout/xul/tree/crashtests/391178-2.xul
+++ b/layout/xul/tree/crashtests/391178-2.xul
@@ -1,17 +1,17 @@
 <?xml-stylesheet href="chrome://browser/skin/" type="text/css"?>
 <window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" xmlns:html="http://www.w3.org/1999/xhtml" class="reftest-wait">
 
 <tree id="a" style="position: fixed;">
-  <box style=" display: -moz-box; position: fixed;">
-    <treecol style=" display: -moz-box;"/>
+  <box style=" display: flex; position: fixed;">
+    <treecol style=" display: flex;"/>
   </box>
   <box style="position: fixed;">
-    <treechildren style="display: -moz-box; position: absolute;"/>
+    <treechildren style="display: flex; position: absolute;"/>
   </box>
 </tree>
 
 <script xmlns="http://www.w3.org/1999/xhtml">
 function removestyles(){
   document.getElementById('a').removeAttribute('style');
   document.documentElement.removeAttribute("class");
 }
diff --git a/mobile/android/themes/core/aboutAddons.css b/mobile/android/themes/core/aboutAddons.css
--- a/mobile/android/themes/core/aboutAddons.css
+++ b/mobile/android/themes/core/aboutAddons.css
@@ -138,17 +138,17 @@ setting[type="integer"],
 setting[type="string"],
 setting[type="menulist"],
 setting[type="control"] {
   -moz-box-orient: vertical;
   -moz-box-align: start;
 }
 
 setting > vbox {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 .preferences-description {
   margin-top: 4px;
   color: #666;
 }
 
 .preferences-description:empty {
@@ -259,48 +259,48 @@ select {
 
 /* XBL bindings */
 
 setting {
   display: none;
 }
 
 setting[type="bool"] {
-  display: -moz-box;
+  display: flex;
   -moz-binding: url("chrome://browser/content/bindings/settings.xml#setting-fulltoggle-bool");
 }
 
 setting[type="bool"][localized="true"] {
-  display: -moz-box;
+  display: flex;
   -moz-binding: url("chrome://browser/content/bindings/settings.xml#setting-fulltoggle-localized-bool");
 }
 
 setting[type="boolint"] {
-  display: -moz-box;
+  display: flex;
   -moz-binding: url("chrome://browser/content/bindings/settings.xml#setting-fulltoggle-boolint");
 }
 
 setting[type="integer"] {
-  display: -moz-box;
+  display: flex;
   -moz-binding: url("chrome://mozapps/content/extensions/setting.xml#setting-integer");
 }
 
 setting[type="control"] {
-  display: -moz-box;
+  display: flex;
   -moz-binding: url("chrome://mozapps/content/extensions/setting.xml#setting-control");
 }
 
 setting[type="string"] {
-  display: -moz-box;
+  display: flex;
   -moz-binding: url("chrome://mozapps/content/extensions/setting.xml#setting-string");
 }
 
 setting[type="radio"],
 setting[type="menulist"] {
-  display: -moz-box;
+  display: flex;
   -moz-binding: url("chrome://mozapps/content/extensions/setting.xml#setting-multi");
 }
 
 .hide-on-enable,
 .show-on-error,
 .show-on-uninstall,
 .show-on-install,
 .show-on-restart,
@@ -310,17 +310,17 @@ div[isDisabled="true"] .hide-on-disable 
 
 div[error] .show-on-error,
 div[opType="needs-restart"] .show-on-restart,
 div[opType="needs-uninstall"] .show-on-uninstall,
 div[opType="needs-install"] .show-on-install,
 div[opType="needs-enable"] .show-on-enable,
 div[opType="needs-disable"] .show-on-disable,
 div[isDisabled="true"] .show-on-disable {
-  display: -moz-box;
+  display: flex;
 }
 
 div[opType="needs-restart"] .hide-on-restart,
 div[opType="needs-uninstall"] .hide-on-uninstall,
 div[isDisabled="true"][opType="needs-uninstall"],
 div[opType="needs-install"] .hide-on-install,
 div[opType="needs-enable"] .hide-on-enable,
 div[opType="needs-disable"] .hide-on-disable {
diff --git a/mobile/android/themes/geckoview/videocontrols.css b/mobile/android/themes/geckoview/videocontrols.css
--- a/mobile/android/themes/geckoview/videocontrols.css
+++ b/mobile/android/themes/geckoview/videocontrols.css
@@ -3,39 +3,39 @@
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
 @namespace url(http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul);
 
 /* video controls */
 .controlsOverlay {
   -moz-box-pack: center;
   -moz-box-align: end;
-  -moz-box-flex: 1;
+  flex: 1;
   -moz-box-orient: horizontal;
 }
 
 .controlsOverlay[scaled] {
   /* scaled attribute in videocontrols.css causes conflict
      due to different -moz-box-orient values */
   -moz-box-align: end;
 }
 
 .controlsSpacer {
   display: none;
-  -moz-box-flex: 0;
+  flex: 0;
 }
 
 .controlBar {
-  -moz-box-flex: 1;
+  flex: 1;
   width: 100%;
   background-color: rgba(50,50,50,0.8);
 }
 
 .buttonsBar {
-  -moz-box-flex: 1;
+  flex: 1;
   -moz-box-align: center;
 }
 
 .playButton,
 .castingButton,
 .muteButton,
 .fullscreenButton {
   -moz-appearance: none;
@@ -104,17 +104,17 @@
 }
 
 .controlBar[fullscreen-unavailable] .fullscreenButton {
   display: none;
 }
 
 /* bars */
 .scrubberStack {
-  -moz-box-flex: 1;
+  flex: 1;
   padding: 0px 18px;
 }
 
 .flexibleBar,
 .flexibleBar .progress-bar,
 .bufferBar,
 .bufferBar .progress-bar,
 .progressBar,
@@ -156,17 +156,17 @@
 }
 
 .scrubber {
   margin-left: -12px;
   margin-right: -12px;
 }
 
 .scrubber .scale-thumb {
-  display: -moz-box;
+  display: flex;
   margin: 0px !important;
   padding: 0px !important;
   background: url("chrome://geckoview/skin/images/videocontrols-scrubber.svg") no-repeat center;
   background-size: 12px 12px;
   height: 32px;
   width: 32px;
 }
 
diff --git a/toolkit/content/customizeToolbar.css b/toolkit/content/customizeToolbar.css
--- a/toolkit/content/customizeToolbar.css
+++ b/toolkit/content/customizeToolbar.css
@@ -15,17 +15,17 @@
   width: 110px;
   height: 94px;
   overflow: hidden;
   display: inline-block;
 }
 
 .toolbarpaletteitem-box {
   -moz-box-pack: center;
-  -moz-box-flex: 1;
+  flex: 1;
   width: 110px;
   max-width: 110px;
 }
 
 toolbarpaletteitem > label {
   text-align: center;
 }
 
diff --git a/toolkit/content/menulist.css b/toolkit/content/menulist.css
--- a/toolkit/content/menulist.css
+++ b/toolkit/content/menulist.css
@@ -2,10 +2,10 @@
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
 @namespace html url("http://www.w3.org/1999/xhtml"); /* namespace for HTML elements */
 
 html|*.menulist-editable-input {
   -moz-appearance: none !important;
   background: transparent ! important;
-  -moz-box-flex: 1;
+  flex: 1;
 }
diff --git a/toolkit/content/minimal-xul.css b/toolkit/content/minimal-xul.css
--- a/toolkit/content/minimal-xul.css
+++ b/toolkit/content/minimal-xul.css
@@ -19,17 +19,17 @@
  */
 
 @namespace url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"); /* set default namespace to XUL */
 @namespace html url("http://www.w3.org/1999/xhtml"); /* namespace for HTML elements */
 
 * {
   -moz-user-focus: ignore;
   -moz-user-select: none;
-  display: -moz-box;
+  display: flex;
   box-sizing: border-box;
 }
 
 :root {
   text-rendering: optimizeLegibility;
   -moz-binding: url("chrome://global/content/bindings/general.xml#root-element");
   -moz-control-character-visibility: visible;
 }
@@ -124,10 +124,10 @@ scale {
 scrollbarbutton[sbattr="scrollbar-up-top"]:not(:-moz-system-metric(scrollbar-start-backward)),
 scrollbarbutton[sbattr="scrollbar-down-top"]:not(:-moz-system-metric(scrollbar-start-forward)),
 scrollbarbutton[sbattr="scrollbar-up-bottom"]:not(:-moz-system-metric(scrollbar-end-backward)),
 scrollbarbutton[sbattr="scrollbar-down-bottom"]:not(:-moz-system-metric(scrollbar-end-forward)) {
   display: none;
 }
 
 thumb[sbattr="scrollbar-thumb"]:-moz-system-metric(scrollbar-thumb-proportional) {
-  -moz-box-flex: 1;
+  flex: 1;
 }
diff --git a/toolkit/content/textbox.css b/toolkit/content/textbox.css
--- a/toolkit/content/textbox.css
+++ b/toolkit/content/textbox.css
@@ -5,24 +5,24 @@
 @namespace url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"); /* set default namespace to XUL */
 @namespace html url("http://www.w3.org/1999/xhtml"); /* namespace for HTML elements */
 
 html|*.textbox-input {
   -moz-appearance: none !important;
   text-align: inherit;
   text-shadow: inherit;
   box-sizing: border-box;
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 html|*.textbox-textarea {
   -moz-appearance: none !important;
   text-shadow: inherit;
   box-sizing: border-box;
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 /*
 html|*.textbox-input::placeholder,
 html|*.textbox-textarea::placeholder {
   text-align: left;
   direction: ltr;
 }
diff --git a/toolkit/content/xul.css b/toolkit/content/xul.css
--- a/toolkit/content/xul.css
+++ b/toolkit/content/xul.css
@@ -292,17 +292,17 @@ toolbar[customizing="true"][collapsed="t
   /* Some apps, e.g. Firefox, use 'collapsed' to hide toolbars.
      Override it while customizing. */
   visibility: visible;
 }
 
 toolbar[customizing="true"][hidden="true"] {
   /* Some apps, e.g. SeaMonkey, use 'hidden' to hide toolbars.
      Override it while customizing. */
-  display: -moz-box;
+  display: flex;
 }
 
 %ifdef XP_MACOSX
 toolbar[type="menubar"] {
   min-height: 0 !important;
   border: 0 !important;
 }
 %else
@@ -324,17 +324,17 @@ toolbarseparator {
 }
 
 toolbarspacer {
   -moz-binding: url("chrome://global/content/bindings/toolbar.xml#toolbardecoration");
 }
 
 toolbarspring {
   -moz-binding: url("chrome://global/content/bindings/toolbar.xml#toolbardecoration");
-  -moz-box-flex: 1000;
+  flex: 1000;
 }
 
 toolbarpaletteitem {
   -moz-binding: url("chrome://global/content/bindings/toolbar.xml#toolbarpaletteitem");
 }
 
 toolbarpaletteitem[place="palette"] {
   -moz-box-orient: vertical;
@@ -392,17 +392,17 @@ menuitem.menuitem-non-iconic {
   -moz-binding: url("chrome://global/content/bindings/menu.xml#menubutton-item");
 }
 
 menucaption {
   -moz-binding: url("chrome://global/content/bindings/menu.xml#menucaption");
 }
 
 .menu-text {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 /********* menuseparator ***********/
 
 menuseparator {
   -moz-binding: url("chrome://global/content/bindings/menu.xml#menuseparator");
 }
 
@@ -680,22 +680,22 @@ listbox {
 }
 
 listhead {
   -moz-box-orient: vertical;
 }
 
 listrows {
   -moz-box-orient: vertical;
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 listboxbody {
   -moz-box-orient: vertical;
-  -moz-box-flex: 1;
+  flex: 1;
   /* Don't permit a horizontal scrollbar. See bug 285449 */
   overflow-x: hidden !important;
   overflow-y: auto;
   min-height: 0px;
 }
 
 listcol {
   -moz-box-orient: vertical;
@@ -721,20 +721,20 @@ treecol {
   -moz-box-ordinal-group: 2147483646;
 }
 
 treecol.treecol-image {
   -moz-binding: url("chrome://global/content/bindings/tree.xml#treecol-image");
 }
 
 tree > treechildren {
-  display: -moz-box;
+  display: flex;
   -moz-binding: url("chrome://global/content/bindings/tree.xml#treebody");
   -moz-user-select: none;
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 treerows {
   -moz-binding: url("chrome://global/content/bindings/tree.xml#treerows");
 }
 
 treecolpicker {
   -moz-binding: url("chrome://global/content/bindings/tree.xml#columnpicker");
@@ -753,17 +753,17 @@ tree[hidecolumnpicker="true"] > treecols
 }
 
 treecol {
   min-width: 16px;
 }
 
 treecol[hidden="true"] {
   visibility: collapse;
-  display: -moz-box;
+  display: flex;
 }
 
 .tree-scrollable-columns {
   /* Yes, Virginia, this makes it scrollable */
   overflow: hidden;
 }
 
 /* ::::: lines connecting cells ::::: */
@@ -961,17 +961,17 @@ panel[type="autocomplete-richlistbox"] {
   -moz-binding: url("chrome://global/content/bindings/autocomplete.xml#autocomplete-treerows");
 }
 
 .autocomplete-history-dropmarker {
   display: none;
 }
 
 .autocomplete-history-dropmarker[enablehistory="true"] {
-  display: -moz-box;
+  display: flex;
   -moz-binding: url("chrome://global/content/bindings/autocomplete.xml#history-dropmarker");
 }
 
 %endif
 
 /* the C++ implementation of widgets is too eager to make popups visible.
    this causes problems (bug 120155 and others), thus this workaround: */
 popup[type="autocomplete"][hidden="true"] {
@@ -1194,17 +1194,17 @@ prefpane > .content-box {
   overflow: hidden;
 }
 
 prefwindow[type="child"] > .paneDeckContainer {
   overflow: -moz-hidden-unscrollable;
 }
 
 prefwindow[type="child"] > prefpane > .content-box {
-  -moz-box-flex: 1;
+  flex: 1;
   overflow: -moz-hidden-unscrollable;
 }
 
 preferences {
   -moz-binding: url("chrome://global/content/bindings/preferences.xml#preferences");
   visibility: collapse;
 }
 
diff --git a/toolkit/mozapps/extensions/content/extensions.css b/toolkit/mozapps/extensions/content/extensions.css
--- a/toolkit/mozapps/extensions/content/extensions.css
+++ b/toolkit/mozapps/extensions/content/extensions.css
@@ -85,17 +85,17 @@ setting[type="boolint"] {
 }
 
 setting[type="integer"] {
   display: -moz-grid-line;
   -moz-binding: url("chrome://mozapps/content/extensions/setting.xml#setting-integer");
 }
 
 setting[type="integer"]:not([size]) textbox {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 setting[type="control"] {
   display: -moz-grid-line;
   -moz-binding: url("chrome://mozapps/content/extensions/setting.xml#setting-control");
 }
 
 setting[type="string"] {
diff --git a/toolkit/mozapps/extensions/content/xpinstallConfirm.css b/toolkit/mozapps/extensions/content/xpinstallConfirm.css
--- a/toolkit/mozapps/extensions/content/xpinstallConfirm.css
+++ b/toolkit/mozapps/extensions/content/xpinstallConfirm.css
@@ -1,8 +1,8 @@
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
 installitem {
   -moz-binding: url("chrome://mozapps/content/xpinstall/xpinstallItem.xml#installitem");
-  display: -moz-box;
+  display: flex;
 }
diff --git a/toolkit/mozapps/update/content/updates.css b/toolkit/mozapps/update/content/updates.css
--- a/toolkit/mozapps/update/content/updates.css
+++ b/toolkit/mozapps/update/content/updates.css
@@ -16,18 +16,18 @@
   display: -moz-box !important;
 }
 
 /* Custom header implementation based on the Wizard's header. This allows the
    size of the billboard's remotecontent to size the window since it does not
    have an updateheader on the billboard page. */
 updateheader {
   -moz-binding: url("chrome://mozapps/content/update/updates.xml#updateheader");
-  display: -moz-box;
+  display: flex;
   -moz-box-orient: horizontal;
 }
 
 /* Update History Window */
 update {
   -moz-binding: url("chrome://mozapps/content/update/updates.xml#update");
-  display: -moz-box;
+  display: flex;
   -moz-box-orient: vertical;
 }
diff --git a/toolkit/pluginproblem/content/pluginProblemContent.css b/toolkit/pluginproblem/content/pluginProblemContent.css
--- a/toolkit/pluginproblem/content/pluginProblemContent.css
+++ b/toolkit/pluginproblem/content/pluginProblemContent.css
@@ -94,17 +94,17 @@ a .msgClickToPlay,
 :-moz-handler-vulnerable-no-update .msgVulnerabilityStatus,
 :-moz-handler-vulnerable-no-update .msgClickToPlay,
 :-moz-handler-blocked .msgBlocked,
 :-moz-handler-crashed .msgCrashed {
   display: block;
 }
 
 .submitStatus[status] {
-  display: -moz-box;
+  display: flex;
   -moz-box-align: center;
   -moz-box-pack: center;
   height: 160px;
 }
 
 .submitStatus[status="noReport"]   .msgNoCrashReport,
 .submitStatus[status="please"]     .msgPleaseSubmit,
 .submitStatus[status="noSubmit"]   .msgNotSubmitted,
diff --git a/toolkit/themes/linux/global/findBar.css b/toolkit/themes/linux/global/findBar.css
--- a/toolkit/themes/linux/global/findBar.css
+++ b/toolkit/themes/linux/global/findBar.css
@@ -9,17 +9,17 @@ findbar {
   min-width: 1px;
   transition-property: margin-bottom, opacity, visibility;
   transition-duration: 150ms, 150ms, 0s;
   transition-timing-function: ease-in-out, ease-in-out, linear;
 }
 
 findbar[hidden] {
   /* Override display:none to make the transition work. */
-  display: -moz-box;
+  display: flex;
   visibility: collapse;
   margin-bottom: -1em;
   opacity: 0;
   transition-delay: 0s, 0s, 150ms;
 }
 
 findbar[noanim] {
   transition-duration: 0s !important;
diff --git a/toolkit/themes/linux/global/in-content/common.css b/toolkit/themes/linux/global/in-content/common.css
--- a/toolkit/themes/linux/global/in-content/common.css
+++ b/toolkit/themes/linux/global/in-content/common.css
@@ -41,17 +41,17 @@ xul|*.groupbox-body {
   padding-inline-start: 0;
 }
 
 xul|menulist {
   font-size: inherit;
 }
 
 xul|menulist:not([editable="true"]) > xul|*.menulist-dropmarker {
-  display: -moz-box;
+  display: flex;
   margin-top: 6px;
   margin-bottom: 6px;
 }
 
 xul|*.checkbox-check {
   background-image: none;
 }
 
diff --git a/toolkit/themes/linux/global/menulist.css b/toolkit/themes/linux/global/menulist.css
--- a/toolkit/themes/linux/global/menulist.css
+++ b/toolkit/themes/linux/global/menulist.css
@@ -66,17 +66,17 @@ menulist[editable="true"] {
   -moz-appearance: menulist-textfield;
   padding-top: 3px;
   padding-bottom: 3px;
   padding-inline-start: 2px;
   padding-inline-end: 0px;
 }
 
 menulist[editable="true"] > .menulist-dropmarker {
-  display: -moz-box;
+  display: flex;
   -moz-appearance: menulist-button;
 }
 
 html|*.menulist-editable-input {
   margin: 0px !important;
   border: none !important;
   padding: 0px !important;
   font: inherit;
diff --git a/toolkit/themes/linux/mozapps/extensions/extensions.css b/toolkit/themes/linux/mozapps/extensions/extensions.css
--- a/toolkit/themes/linux/mozapps/extensions/extensions.css
+++ b/toolkit/themes/linux/mozapps/extensions/extensions.css
@@ -6,31 +6,31 @@
 
 #header-utils-btn .toolbarbutton-icon {
   list-style-image: url("chrome://mozapps/skin/extensions/utilities.svg");
   -moz-context-properties: fill;
   fill: GrayText;
 }
 
 .sorter[checkState="1"] .button-icon {
-  display: -moz-box;
+  display: flex;
   list-style-image: url("moz-icon://stock/gtk-sort-descending?size=16");
 }
 
 .sorter[checkState="2"] .button-icon {
-  display: -moz-box;
+  display: flex;
   list-style-image: url("moz-icon://stock/gtk-sort-ascending?size=16");
 }
 
 .addon .relnotes-toggle {
   list-style-image: url("moz-icon://stock/gtk-go-down?size=16");
 }
 
 .addon .relnotes-toggle > .button-box > .button-icon {
-  display: -moz-box;
+  display: flex;
 }
 
 .addon[show-relnotes] .relnotes-toggle {
   list-style-image: url("moz-icon://stock/gtk-go-up?size=16");
 }
 
 .meta-rating[showrating="average"] > .star {
   list-style-image: url("chrome://mozapps/skin/extensions/rating-not-won.png");
diff --git a/toolkit/themes/osx/global/findBar.css b/toolkit/themes/osx/global/findBar.css
--- a/toolkit/themes/osx/global/findBar.css
+++ b/toolkit/themes/osx/global/findBar.css
@@ -11,17 +11,17 @@ findbar {
   min-width: 1px;
   transition-property: margin-bottom, opacity, visibility;
   transition-duration: 150ms, 150ms, 0s;
   transition-timing-function: ease-in-out, ease-in-out, linear;
 }
 
 findbar[hidden] {
   /* Override display:none to make the transition work. */
-  display: -moz-box;
+  display: flex;
   visibility: collapse;
   margin-bottom: -1em;
   opacity: 0;
   transition-delay: 0s, 0s, 150ms;
 }
 
 findbar[noanim] {
   transition-duration: 0s !important;
diff --git a/toolkit/themes/osx/global/in-content/common.css b/toolkit/themes/osx/global/in-content/common.css
--- a/toolkit/themes/osx/global/in-content/common.css
+++ b/toolkit/themes/osx/global/in-content/common.css
@@ -42,17 +42,17 @@ xul|groupbox > xul|*.groupbox-body {
 }
 
 xul|menulist:not([editable="true"]) > xul|menupopup > xul|menuitem[checked="true"]::before,
 xul|menulist:not([editable="true"]) > xul|menupopup > xul|menuitem[selected="true"]::before {
   display: none;
 }
 
 xul|menulist:not([editable="true"]) > xul|*.menulist-dropmarker {
-  display: -moz-box;
+  display: flex;
   margin-top: 1px;
   margin-bottom: 1px;
 }
 
 xul|menulist > xul|menupopup xul|menu,
 xul|menulist > xul|menupopup xul|menuitem,
 xul|button[type="menu"] > xul|menupopup xul|menu,
 xul|button[type="menu"] > xul|menupopup xul|menuitem {
diff --git a/toolkit/themes/osx/global/spinbuttons.css b/toolkit/themes/osx/global/spinbuttons.css
--- a/toolkit/themes/osx/global/spinbuttons.css
+++ b/toolkit/themes/osx/global/spinbuttons.css
@@ -8,24 +8,24 @@ spinbuttons {
   height: 24px;
   min-height: 24px;
   -moz-appearance: spinner;
   cursor: default;
 }
 
 .spinbuttons-up {
   -moz-appearance: none;
-  -moz-box-flex: 1;
+  flex: 1;
   min-width: 1px;
   min-height: 1px;
   margin: 0;
   padding: 0;
 }
 
 .spinbuttons-down {
   -moz-appearance: none;
-  -moz-box-flex: 1;
+  flex: 1;
   min-width: 1px;
   min-height: 1px;
   margin: 0;
   padding: 0;
 }
 
diff --git a/toolkit/themes/osx/global/tabbox.css b/toolkit/themes/osx/global/tabbox.css
--- a/toolkit/themes/osx/global/tabbox.css
+++ b/toolkit/themes/osx/global/tabbox.css
@@ -56,17 +56,17 @@ tab[visuallyselected="true"] {
 }
 
 .tab-middle {
   padding: 1px 6px 2px;
 }
 
 .tabs-left,
 .tabs-right  {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 /* Tabs at the bottom
  * These tabs are smaller, left aligned and don't extend into the tabpanel.
  */
 
 tabbox.tabs-bottom > tabpanels {
   padding: 10px;
@@ -80,17 +80,17 @@ tabs.tabs-bottom {
   border-top: 2px solid;
   -moz-border-top-colors: #888 rgba(0, 0, 0, 0.08);
   -moz-box-align: start;
   font: message-box;
 }
 
 tabbox.tabs-bottom > tabs > .tabs-left,
 tabs.tabs-bottom > .tabs-left {
-  -moz-box-flex: 0;
+  flex: 0;
 }
 
 tabbox.tabs-bottom > tabs > tab,
 tabs.tabs-bottom > tab {
   -moz-appearance: none;
   margin: -1px 0 0;
   padding: 0 0 2px 0;
   position: relative;
diff --git a/toolkit/themes/shared/alert-common.css b/toolkit/themes/shared/alert-common.css
--- a/toolkit/themes/shared/alert-common.css
+++ b/toolkit/themes/shared/alert-common.css
@@ -100,33 +100,33 @@
   padding-inline-start: 8px;
 }
 
 #alertTextLabel {
   padding-inline-end: 8px;
 }
 
 .alertTitle {
-  -moz-box-flex: 1;
+  flex: 1;
   font-weight: bold;
   padding: 6px 8px 0;
   width: 255px;
 }
 
 #alertFooter {
   -moz-box-align: start;
 }
 
 #alertBox:not([hasOrigin]) > box > #alertTextBox,
 #alertFooter {
   padding-bottom: 5px;
 }
 
 #alertSourceLabel {
-  -moz-box-flex: 1;
+  flex: 1;
   font-size: 83.334%;
   color: GrayText;
 }
 
 #alertSettings {
   -moz-appearance: none;
   background-color: transparent;
   border-width: 0;
diff --git a/toolkit/themes/shared/extensions/extensions.inc.css b/toolkit/themes/shared/extensions/extensions.inc.css
--- a/toolkit/themes/shared/extensions/extensions.inc.css
+++ b/toolkit/themes/shared/extensions/extensions.inc.css
@@ -98,21 +98,21 @@
 
 .alert-container {
   -moz-box-align: center;
   margin-right: 48px;
   margin-left: 48px;
 }
 
 .alert-spacer-before {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 .alert-spacer-after {
-  -moz-box-flex: 3;
+  flex: 3;
 }
 
 .alert {
   -moz-box-align: center;
   padding: 10px;
   color: #333;
   border: 1px solid #c1c1c1;
   border-radius: 2px;
@@ -342,22 +342,22 @@ button.warning {
   margin-inline-start: 6px;
 }
 
 
 /*** discover view ***/
 
 .discover-spacer-before,
 .discover-spacer-after {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 #discover-error .alert {
   max-width: 45em;
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 .discover-logo {
   list-style-image: url("chrome://mozapps/skin/extensions/discover-logo.png");
   margin-inline-end: 15px;
 }
 
 .discover-title {
@@ -452,17 +452,17 @@ button.warning {
 .addon-view[type="experiment"] .icon {
   list-style-image: url("chrome://mozapps/skin/extensions/experimentGeneric.png");
 }
 
 .name-container {
   font-size: 1.3rem;
   font-weight: bold;
   -moz-box-align: end;
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 .legacy-warning {
   background-color: #FFE900;
   color: #3E2800;
   padding: 4px 5px 3px;
   font-size: 0.9rem;
   font-weight: 600;
@@ -1103,11 +1103,11 @@ button.button-link:not([disabled="true"]
   margin-bottom: .5em;
 }
 
 #signing-dev-info {
   font-style: italic;
 }
 
 #detail-findUpdates-btn[hidden] {
-  display: -moz-box;
+  display: flex;
   visibility: hidden;
 }
diff --git a/toolkit/themes/shared/extensions/newaddon.inc.css b/toolkit/themes/shared/extensions/newaddon.inc.css
--- a/toolkit/themes/shared/extensions/newaddon.inc.css
+++ b/toolkit/themes/shared/extensions/newaddon.inc.css
@@ -7,25 +7,25 @@
 
 #addon-page {
   font-size: 1.1em;
 }
 
 #addon-scrollbox {
   overflow: auto;
   -moz-box-orient: vertical;
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 #spacer-start {
-  -moz-box-flex: 1;
+  flex: 1;
 }
 
 #spacer-end {
-  -moz-box-flex: 3;
+  flex: 3;
 }
 
 #addon-container {
   overflow: visible;
   max-width: 800px;
   margin: 20px;
   padding: 30px 90px;
 }
diff --git a/toolkit/themes/shared/popupnotification.inc.css b/toolkit/themes/shared/popupnotification.inc.css
--- a/toolkit/themes/shared/popupnotification.inc.css
+++ b/toolkit/themes/shared/popupnotification.inc.css
@@ -110,17 +110,17 @@
 
 .popup-notification-dropmarker > .button-box > hbox {
   display: none;
 }
 
 .popup-notification-dropmarker > .button-box > .button-menu-dropmarker {
   /* This is to override the linux !important */
   -moz-appearance: none !important;
-  display: -moz-box;
+  display: flex;
   padding: 0;
   margin: 0;
 }
 
 .popup-notification-dropmarker > .button-box > .button-menu-dropmarker > .dropmarker-icon {
   width: 16px;
   height: 16px;
   list-style-image: url(chrome://global/skin/icons/menubutton-dropmarker.svg);
diff --git a/toolkit/themes/windows/global/findBar.css b/toolkit/themes/windows/global/findBar.css
--- a/toolkit/themes/windows/global/findBar.css
+++ b/toolkit/themes/windows/global/findBar.css
@@ -12,17 +12,17 @@ findbar {
   min-width: 1px;
   transition-property: margin-bottom, opacity, visibility;
   transition-duration: 150ms, 150ms, 0s;
   transition-timing-function: ease-in-out, ease-in-out, linear;
 }
 
 findbar[hidden] {
   /* Override display:none to make the transition work. */
-  display: -moz-box;
+  display: flex;
   visibility: collapse;
   margin-bottom: -1em;
   opacity: 0;
   transition-delay: 0s, 0s, 150ms;
 }
 
 findbar[noanim] {
   transition-duration: 0s !important;
diff --git a/widget/cocoa/crashtests/373122-1-inner.html b/widget/cocoa/crashtests/373122-1-inner.html
--- a/widget/cocoa/crashtests/373122-1-inner.html
+++ b/widget/cocoa/crashtests/373122-1-inner.html
@@ -26,14 +26,14 @@ function boom3()
 </script>
 
 
 </head>
 
 
 <body bgcolor="black" onload="boom()">
 
-  <span style="overflow: scroll; display: -moz-box;"></span>
+  <span style="overflow: scroll; display: flex;"></span>
 
   <embed id="lappy" src="" width=550 height=400 TYPE="application/x-shockwave-flash" ></embed>
  
 </body>
 </html>
diff --git a/widget/cocoa/crashtests/449111-1.html b/widget/cocoa/crashtests/449111-1.html
--- a/widget/cocoa/crashtests/449111-1.html
+++ b/widget/cocoa/crashtests/449111-1.html
@@ -1,4 +1,4 @@
 <html>
 <head></head>
-<body><div style="display: -moz-box; word-spacing: 549755813889px;"><button>T </button></div></body>
+<body><div style="display: flex; word-spacing: 549755813889px;"><button>T </button></div></body>
 </html>
diff --git a/xpfe/components/autocomplete/resources/content/autocomplete.css b/xpfe/components/autocomplete/resources/content/autocomplete.css
--- a/xpfe/components/autocomplete/resources/content/autocomplete.css
+++ b/xpfe/components/autocomplete/resources/content/autocomplete.css
@@ -21,17 +21,17 @@
   -moz-user-focus: ignore;
 }
 
 .autocomplete-history-dropmarker {
   display: none;
 }
 
 .autocomplete-history-dropmarker[enablehistory="true"] {
-  display: -moz-box;
+  display: flex;
 }
 
 /* The following rule is here to fix bug 96899 (and now 117952).  
    Somehow trees create a situation
    in which a popupset flows itself as if its popup child is directly within it
    instead of the placeholder child that should actually be inside the popupset.
    This is a stopgap measure, and it does not address the real bug.  */
 popupset {
